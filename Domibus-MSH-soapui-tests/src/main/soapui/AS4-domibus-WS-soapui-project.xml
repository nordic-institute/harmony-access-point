<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="1c29d1fb-f8ae-4ddb-ac43-1469a15001ec" activeEnvironment="Default" name="TESTS_WS" resourceRoot="" soapui-version="5.2.1" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="ProjectSettings@hermesConfig">C:\ec</con:setting></con:settings><con:interface xsi:type="con:WsdlInterface" id="9581111c-248c-4085-bf9f-dc452577042f" wsaVersion="NONE" name="BackendService_1_1SoapBinding" type="wsdl" bindingName="{http://org.ecodex.backend/1_1/}BackendService_1_1SoapBinding" soapVersion="1_2" anonymous="optional" definition="${#Project#localUrl}/services/backend?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://localhost:8080/domibus/services/backend?wsdl"><con:part><con:url>http://localhost:8080/domibus/services/backend?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="BackendService_1_1" targetNamespace="http://org.ecodex.backend/1_1/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://org.ecodex.backend/1_1/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:ns2="http://schemas.xmlsoap.org/soap/http" xmlns:ns1="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/">
  <wsdl:types>
    <xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:tns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/">
      <xsd:import namespace="http://www.w3.org/XML/1998/namespace"/>
      <xsd:annotation>
        <xsd:appinfo>Schema for Domibus messages' headers submission</xsd:appinfo>
        <xsd:documentation xml:lang="en">This schema defines an XML subset of ebMS-3 headers which is used to validate messages submitted to Domibus
            through WS plugin.</xsd:documentation>
      </xsd:annotation>
      <xsd:element name="Messaging" type="Messaging"/>
      <xsd:complexType name="Messaging">
        <xsd:sequence>
          <xsd:element maxOccurs="1" minOccurs="0" name="UserMessage" type="UserMessage"/>
        </xsd:sequence>
        <xsd:attribute name="mustUnderstand" type="xsd:boolean" use="optional"/>
      </xsd:complexType>
      <xsd:complexType name="UserMessage">
        <xsd:all>
          <xsd:element maxOccurs="1" minOccurs="0" name="MessageInfo" type="MessageInfo"/>
          <xsd:element maxOccurs="1" minOccurs="1" name="PartyInfo" type="PartyInfo"/>
          <xsd:element maxOccurs="1" minOccurs="1" name="CollaborationInfo" type="CollaborationInfo"/>
          <xsd:element maxOccurs="1" minOccurs="1" name="MessageProperties" type="tns:MessageProperties"/>
          <xsd:element maxOccurs="1" minOccurs="1" name="PayloadInfo" type="tns:PayloadInfo"/>
        </xsd:all>
        <xsd:attribute name="mpc" type="xsd:anyURI" use="optional"/>
      </xsd:complexType>
      <xsd:complexType name="MessageInfo">
        <xsd:all>
          <xsd:element maxOccurs="1" minOccurs="0" name="Timestamp" type="xsd:dateTime"/>
          <xsd:element maxOccurs="1" minOccurs="0" name="MessageId" type="tns:max255-non-empty-string"/>
          <xsd:element maxOccurs="1" minOccurs="0" name="RefToMessageId" type="tns:max255-non-empty-string"/>
        </xsd:all>
      </xsd:complexType>
      <xsd:complexType name="PartyInfo">
        <xsd:all>
          <xsd:element maxOccurs="1" minOccurs="1" name="From" type="tns:From"/>
          <xsd:element maxOccurs="1" minOccurs="0" name="To" type="tns:To"/>
        </xsd:all>
      </xsd:complexType>
      <xsd:complexType name="PartyId">
        <xsd:simpleContent>
          <xsd:extension base="tns:max255-non-empty-string">
            <xsd:attribute name="type" type="tns:max255-non-empty-string" use="required"/>
          </xsd:extension>
        </xsd:simpleContent>
      </xsd:complexType>
      <xsd:complexType name="From">
        <xsd:all>
          <xsd:element maxOccurs="1" minOccurs="1" name="PartyId" type="tns:PartyId"/>
          <xsd:element maxOccurs="1" minOccurs="1" name="Role" type="tns:max255-non-empty-string"/>
        </xsd:all>
      </xsd:complexType>
      <xsd:complexType name="To">
        <xsd:all>
          <xsd:element maxOccurs="1" minOccurs="1" name="PartyId" type="tns:PartyId"/>
          <xsd:element maxOccurs="1" minOccurs="1" name="Role" type="tns:max255-non-empty-string"/>
        </xsd:all>
      </xsd:complexType>
      <xsd:complexType name="CollaborationInfo">
        <xsd:all>
          <xsd:element minOccurs="0" name="AgreementRef" type="tns:AgreementRef"/>
          <xsd:element maxOccurs="1" minOccurs="1" name="Service" type="tns:Service"/>
          <xsd:element maxOccurs="1" minOccurs="1" name="Action" type="xsd:token"/>
          <xsd:element maxOccurs="1" minOccurs="0" name="ConversationId" type="xsd:token"/>
        </xsd:all>
      </xsd:complexType>
      <xsd:complexType name="Service">
        <xsd:simpleContent>
          <xsd:extension base="tns:max255-non-empty-string">
            <xsd:attribute name="type" type="tns:max255-non-empty-string" use="required"/>
          </xsd:extension>
        </xsd:simpleContent>
      </xsd:complexType>
      <xsd:complexType name="AgreementRef">
        <xsd:simpleContent>
          <xsd:extension base="tns:max255-non-empty-string">
            <xsd:attribute name="type" type="tns:max255-non-empty-string" use="optional"/>
            <xsd:attribute name="pmode" type="tns:max255-non-empty-string" use="optional"/>
          </xsd:extension>
        </xsd:simpleContent>
      </xsd:complexType>
      <xsd:complexType name="PayloadInfo">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" minOccurs="1" name="PartInfo" type="tns:PartInfo"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="PartInfo">
        <xsd:all>
          <xsd:element minOccurs="0" name="Schema" type="Schema"/>
          <xsd:element maxOccurs="1" minOccurs="0" name="Description" type="tns:Description"/>
          <xsd:element minOccurs="0" name="PartProperties" type="tns:PartProperties"/>
        </xsd:all>
        <xsd:attribute name="href" type="xsd:token" use="required"/>
      </xsd:complexType>
      <xsd:complexType name="Property">
        <xsd:simpleContent>
          <xsd:extension base="tns:max255-non-empty-string">
            <xsd:attribute name="name" type="tns:max255-non-empty-string" use="required"/>
            <xsd:attribute name="type" type="tns:max255-non-empty-string" use="optional"/>
          </xsd:extension>
        </xsd:simpleContent>
      </xsd:complexType>
      <xsd:complexType name="PartProperties">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" name="Property" type="tns:Property"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="MessageProperties">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" name="Property" type="Property"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="Schema">
        <xsd:attribute name="location" type="xsd:anyURI" use="optional"/>
        <xsd:attribute name="version" type="tns:max255-non-empty-string" use="optional"/>
        <xsd:attribute name="namespace" type="tns:max255-non-empty-string" use="optional"/>
      </xsd:complexType>
      <xsd:complexType name="Description">
        <xsd:simpleContent>
          <xsd:extension base="tns:max255-non-empty-string">
            <xsd:attribute ref="xml:lang" use="required"/>
          </xsd:extension>
        </xsd:simpleContent>
      </xsd:complexType>
      <xsd:simpleType name="max255-non-empty-string">
        <xsd:restriction base="xsd:string">
          <xsd:minLength value="1"/>
          <xsd:maxLength value="255"/>
        </xsd:restriction>
      </xsd:simpleType>
    </xsd:schema>
    <xsd:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://org.ecodex.backend/1_1/" xmlns:ns1="http://www.w3.org/2005/05/xmlmime">
      <xsd:import namespace="http://www.w3.org/2005/05/xmlmime"/>
      <xsd:simpleType name="max255-non-empty-string">
        <xsd:restriction base="xsd:string">
          <xsd:minLength value="1"/>
          <xsd:maxLength value="255"/>
        </xsd:restriction>
      </xsd:simpleType>
      <xsd:element name="FaultDetail">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="code" type="xsd:string"/>
            <xsd:element name="message" nillable="true" type="xsd:string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="retrieveMessageRequest">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="messageID" nillable="true" type="tns:max255-non-empty-string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="retrieveMessageResponse">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element minOccurs="0" name="bodyload" type="tns:LargePayloadType"/>
            <xsd:element maxOccurs="unbounded" minOccurs="0" name="payload" type="tns:LargePayloadType"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="listPendingMessagesRequest" nillable="false" type="xsd:anyType"/>
      <xsd:element name="listPendingMessagesResponse">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element maxOccurs="unbounded" minOccurs="0" name="messageID" nillable="true" type="xsd:string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="messageErrorsRequest">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="messageID" type="tns:max255-non-empty-string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="messageStatusRequest">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="messageID" type="tns:max255-non-empty-string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="submitRequest">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element minOccurs="0" name="bodyload" type="tns:LargePayloadType"/>
            <xsd:element maxOccurs="unbounded" minOccurs="0" name="payload" nillable="true" type="tns:LargePayloadType"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="submitResponse">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element maxOccurs="unbounded" minOccurs="0" name="messageID" nillable="true" type="xsd:string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:complexType name="PayloadType">
        <xsd:simpleContent>
          <xsd:extension base="ns1:base64Binary">
            <xsd:attribute name="payloadId" type="xsd:token" use="required"/>
          </xsd:extension>
        </xsd:simpleContent>
      </xsd:complexType>
      <xsd:complexType name="LargePayloadType">
        <xsd:sequence>
          <xsd:element name="value" ns1:expectedContentTypes="application/octet-stream" type="xsd:base64Binary"/>
        </xsd:sequence>
        <xsd:attribute name="payloadId" type="xsd:token" use="required"/>
        <xsd:attribute name="contentType" type="xsd:string"/>
      </xsd:complexType>
      <xsd:complexType name="errorResultImpl">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="errorCode" type="tns:errorCode"/>
          <xsd:element minOccurs="0" name="errorDetail" type="xsd:string"/>
          <xsd:element minOccurs="0" name="messageInErrorId" type="xsd:string"/>
          <xsd:element minOccurs="0" name="mshRole" type="tns:mshRole"/>
          <xsd:element minOccurs="0" name="notified" type="xsd:dateTime"/>
          <xsd:element minOccurs="0" name="timestamp" type="xsd:dateTime"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="PayloadURLType">
        <xsd:simpleContent>
          <xsd:extension base="xsd:string">
            <xsd:attribute name="payloadId" type="xsd:token" use="required"/>
          </xsd:extension>
        </xsd:simpleContent>
      </xsd:complexType>
      <xsd:simpleType name="messageStatus">
        <xsd:restriction base="xsd:string">
          <xsd:enumeration value="READY_TO_SEND"/>
          <xsd:enumeration value="READY_TO_PULL"/>
          <xsd:enumeration value="BEING_PULLED"/>
          <xsd:enumeration value="SEND_ENQUEUED"/>
          <xsd:enumeration value="SEND_IN_PROGRESS"/>
          <xsd:enumeration value="WAITING_FOR_RECEIPT"/>
          <xsd:enumeration value="ACKNOWLEDGED"/>
          <xsd:enumeration value="ACKNOWLEDGED_WITH_WARNING"/>
          <xsd:enumeration value="SEND_ATTEMPT_FAILED"/>
          <xsd:enumeration value="SEND_FAILURE"/>
          <xsd:enumeration value="NOT_FOUND"/>
          <xsd:enumeration value="WAITING_FOR_RETRY"/>
          <xsd:enumeration value="RECEIVED"/>
          <xsd:enumeration value="RECEIVED_WITH_WARNINGS"/>
          <xsd:enumeration value="DELETED"/>
          <xsd:enumeration value="DOWNLOADED"/>
        </xsd:restriction>
      </xsd:simpleType>
      <xsd:simpleType name="errorCode">
        <xsd:restriction base="xsd:string">
          <xsd:enumeration value="EBMS_0001"/>
          <xsd:enumeration value="EBMS_0002"/>
          <xsd:enumeration value="EBMS_0003"/>
          <xsd:enumeration value="EBMS_0004"/>
          <xsd:enumeration value="EBMS_0005"/>
          <xsd:enumeration value="EBMS_0006"/>
          <xsd:enumeration value="EBMS_0007"/>
          <xsd:enumeration value="EBMS_0008"/>
          <xsd:enumeration value="EBMS_0009"/>
          <xsd:enumeration value="EBMS_0010"/>
          <xsd:enumeration value="EBMS_0011"/>
          <xsd:enumeration value="EBMS_0101"/>
          <xsd:enumeration value="EBMS_0102"/>
          <xsd:enumeration value="EBMS_0103"/>
          <xsd:enumeration value="EBMS_0201"/>
          <xsd:enumeration value="EBMS_0202"/>
          <xsd:enumeration value="EBMS_0301"/>
          <xsd:enumeration value="EBMS_0302"/>
          <xsd:enumeration value="EBMS_0303"/>
          <xsd:enumeration value="EBMS_0020"/>
          <xsd:enumeration value="EBMS_0021"/>
          <xsd:enumeration value="EBMS_0022"/>
          <xsd:enumeration value="EBMS_0023"/>
          <xsd:enumeration value="EBMS_0030"/>
          <xsd:enumeration value="EBMS_0031"/>
          <xsd:enumeration value="EBMS_0040"/>
          <xsd:enumeration value="EBMS_0041"/>
          <xsd:enumeration value="EBMS_0042"/>
          <xsd:enumeration value="EBMS_0043"/>
          <xsd:enumeration value="EBMS_0044"/>
          <xsd:enumeration value="EBMS_0045"/>
          <xsd:enumeration value="EBMS_0046"/>
          <xsd:enumeration value="EBMS_0047"/>
          <xsd:enumeration value="EBMS_0048"/>
          <xsd:enumeration value="EBMS_0049"/>
          <xsd:enumeration value="EBMS_0050"/>
          <xsd:enumeration value="EBMS_0051"/>
          <xsd:enumeration value="EBMS_0052"/>
          <xsd:enumeration value="EBMS_0053"/>
          <xsd:enumeration value="EBMS_0054"/>
          <xsd:enumeration value="EBMS_0055"/>
          <xsd:enumeration value="EBMS_0060"/>
          <xsd:enumeration value="EBMS_0065"/>
        </xsd:restriction>
      </xsd:simpleType>
      <xsd:simpleType name="mshRole">
        <xsd:restriction base="xsd:string">
          <xsd:enumeration value="SENDING"/>
          <xsd:enumeration value="RECEIVING"/>
        </xsd:restriction>
      </xsd:simpleType>
      <xsd:complexType final="#all" name="errorResultImplArray">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" minOccurs="0" name="item" nillable="true" type="tns:errorResultImpl"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="getStatusRequest" nillable="true">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="messageID" type="tns:max255-non-empty-string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="statusRequest" nillable="true">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="messageID" type="tns:max255-non-empty-string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="getStatusResponse" nillable="true" type="tns:messageStatus"/>
      <xsd:element name="getErrorsRequest" nillable="true">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="messageID" type="tns:max255-non-empty-string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="getMessageErrorsResponse" nillable="true" type="tns:errorResultImplArray"/>
    </xsd:schema>
    <xs:schema targetNamespace="http://www.w3.org/XML/1998/namespace" xml:lang="en" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:annotation>
        <xs:documentation>See http://www.w3.org/XML/1998/namespace.html and
   http://www.w3.org/TR/REC-xml for information about this namespace.

    This schema document describes the XML namespace, in a form
    suitable for import by other schema documents.  

    Note that local names in this namespace are intended to be defined
    only by the World Wide Web Consortium or its subgroups.  The
    following names are currently defined in this namespace and should
    not be used with conflicting semantics by any Working Group,
    specification, or document instance:

    base (as an attribute name): denotes an attribute whose value
         provides a URI to be used as the base for interpreting any
         relative URIs in the scope of the element on which it
         appears; its value is inherited.  This name is reserved
         by virtue of its definition in the XML Base specification.

    id   (as an attribute name): denotes an attribute whose value
         should be interpreted as if declared to be of type ID.
         The xml:id specification is not yet a W3C Recommendation,
         but this attribute is included here to facilitate experimentation
         with the mechanisms it proposes.  Note that it is _not_ included
         in the specialAttrs attribute group.

    lang (as an attribute name): denotes an attribute whose value
         is a language code for the natural language of the content of
         any element; its value is inherited.  This name is reserved
         by virtue of its definition in the XML specification.
  
    space (as an attribute name): denotes an attribute whose
         value is a keyword indicating what whitespace processing
         discipline is intended for the content of the element; its
         value is inherited.  This name is reserved by virtue of its
         definition in the XML specification.

    Father (in any context at all): denotes Jon Bosak, the chair of 
         the original XML Working Group.  This name is reserved by 
         the following decision of the W3C XML Plenary and 
         XML Coordination groups:

             In appreciation for his vision, leadership and dedication
             the W3C XML Plenary on this 10th day of February, 2000
             reserves for Jon Bosak in perpetuity the XML name
             xml:Father</xs:documentation>
      </xs:annotation>
      <xs:annotation>
        <xs:documentation>This schema defines attributes and an attribute group
        suitable for use by
        schemas wishing to allow xml:base, xml:lang, xml:space or xml:id
        attributes on elements they define.

        To enable this, such a schema must import this schema
        for the XML namespace, e.g. as follows:
        &lt;schema . . .>
         . . .
         &lt;import namespace="http://www.w3.org/XML/1998/namespace"
                    schemaLocation="http://www.w3.org/2001/xml.xsd"/>

        Subsequently, qualified reference to any of the attributes
        or the group defined below will have the desired effect, e.g.

        &lt;type . . .>
         . . .
         &lt;attributeGroup ref="xml:specialAttrs"/>
 
         will define a type which will schema-validate an instance
         element with any of those attributes</xs:documentation>
      </xs:annotation>
      <xs:annotation>
        <xs:documentation>In keeping with the XML Schema WG's standard versioning
   policy, this schema document will persist at
   http://www.w3.org/2005/08/xml.xsd.
   At the date of issue it can also be found at
   http://www.w3.org/2001/xml.xsd.
   The schema document at that URI may however change in the future,
   in order to remain compatible with the latest version of XML Schema
   itself, or with the XML namespace itself.  In other words, if the XML
   Schema or XML namespaces change, the version of this document at
   http://www.w3.org/2001/xml.xsd will change
   accordingly; the version at
   http://www.w3.org/2005/08/xml.xsd will not change.</xs:documentation>
      </xs:annotation>
      <xs:attribute name="lang">
        <xs:annotation>
          <xs:documentation>Attempting to install the relevant ISO 2- and 3-letter
         codes as the enumerated possible values is probably never
         going to be a realistic possibility.  See
         RFC 3066 at http://www.ietf.org/rfc/rfc3066.txt and the IANA registry
         at http://www.iana.org/assignments/lang-tag-apps.htm for
         further information.

         The union allows for the 'un-declaration' of xml:lang with
         the empty string.</xs:documentation>
        </xs:annotation>
        <xs:simpleType>
          <xs:union memberTypes="xs:language">
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:enumeration value=""/>
              </xs:restriction>
            </xs:simpleType>
          </xs:union>
        </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="space">
        <xs:simpleType>
          <xs:restriction base="xs:NCName">
            <xs:enumeration value="default"/>
            <xs:enumeration value="preserve"/>
          </xs:restriction>
        </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="base" type="xs:anyURI">
        <xs:annotation>
          <xs:documentation>See http://www.w3.org/TR/xmlbase/ for
                     information about this attribute.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="id" type="xs:ID">
        <xs:annotation>
          <xs:documentation>See http://www.w3.org/TR/xml-id/ for
                     information about this attribute.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attributeGroup name="specialAttrs">
        <xs:attribute ref="xml:base"/>
        <xs:attribute ref="xml:lang"/>
        <xs:attribute ref="xml:space"/>
      </xs:attributeGroup>
    </xs:schema>
    <xs:schema targetNamespace="http://www.w3.org/2005/05/xmlmime" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
      <xs:attribute name="contentType">
        <xs:simpleType>
          <xs:restriction base="xs:string">
            <xs:minLength value="3"/>
          </xs:restriction>
        </xs:simpleType>
      </xs:attribute>
      <xs:attribute name="expectedContentTypes" type="xs:string"/>
      <xs:complexType name="base64Binary">
        <xs:simpleContent>
          <xs:extension base="xs:base64Binary">
            <xs:attribute ref="xmime:contentType"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
      <xs:complexType name="hexBinary">
        <xs:simpleContent>
          <xs:extension base="xs:hexBinary">
            <xs:attribute ref="xmime:contentType"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="getStatusResponse">
    <wsdl:part element="tns:getStatusResponse" name="getStatusResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="listPendingMessagesResponse">
    <wsdl:part element="tns:listPendingMessagesResponse" name="listPendingMessagesResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getMessageErrorsResponse">
    <wsdl:part element="tns:getMessageErrorsResponse" name="getMessageErrorsResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="submitMessageResponse">
    <wsdl:part element="tns:submitResponse" name="submitResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="RetrieveMessageFault">
    <wsdl:part element="tns:FaultDetail" name="RetrieveMessageFault"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getMessageErrors">
    <wsdl:part element="tns:getErrorsRequest" name="getErrorsRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getStatus">
    <wsdl:part element="tns:statusRequest" name="statusRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="listPendingMessages">
    <wsdl:part element="tns:listPendingMessagesRequest" name="listPendingMessagesRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="SubmitMessageFault">
    <wsdl:part element="tns:FaultDetail" name="SubmitMessageFault"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="StatusFault">
    <wsdl:part element="tns:FaultDetail" name="StatusFault"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="submitMessage">
    <wsdl:part element="tns:submitRequest" name="submitRequest"></wsdl:part>
    <wsdl:part element="ns1:Messaging" name="ebMSHeaderInfo"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="retrieveMessage">
    <wsdl:part element="tns:retrieveMessageRequest" name="retrieveMessageRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="retrieveMessageResponse">
    <wsdl:part element="tns:retrieveMessageResponse" name="retrieveMessageResponse"></wsdl:part>
    <wsdl:part element="ns1:Messaging" name="ebMSHeaderInfo"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="BackendInterface">
    <wsdl:operation name="listPendingMessages">
      <wsdl:input message="tns:listPendingMessages" name="listPendingMessages"></wsdl:input>
      <wsdl:output message="tns:listPendingMessagesResponse" name="listPendingMessagesResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getMessageErrors">
      <wsdl:input message="tns:getMessageErrors" name="getMessageErrors"></wsdl:input>
      <wsdl:output message="tns:getMessageErrorsResponse" name="getMessageErrorsResponse"></wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getStatus">
      <wsdl:input message="tns:getStatus" name="getStatus"></wsdl:input>
      <wsdl:output message="tns:getStatusResponse" name="getStatusResponse"></wsdl:output>
      <wsdl:fault message="tns:StatusFault" name="StatusFault"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="submitMessage">
      <wsdl:input message="tns:submitMessage" name="submitMessage"></wsdl:input>
      <wsdl:output message="tns:submitMessageResponse" name="submitMessageResponse"></wsdl:output>
      <wsdl:fault message="tns:SubmitMessageFault" name="SubmitMessageFault"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="retrieveMessage" parameterOrder="retrieveMessageRequest retrieveMessageResponse ebMSHeaderInfo">
      <wsdl:input message="tns:retrieveMessage" name="retrieveMessage"></wsdl:input>
      <wsdl:output message="tns:retrieveMessageResponse" name="retrieveMessageResponse"></wsdl:output>
      <wsdl:fault message="tns:RetrieveMessageFault" name="RetrieveMessageFault"></wsdl:fault>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="BackendService_1_1SoapBinding" type="tns:BackendInterface">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="listPendingMessages">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="listPendingMessages">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="listPendingMessagesResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getMessageErrors">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="getMessageErrors">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getMessageErrorsResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getStatus">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="getStatus">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getStatusResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="StatusFault">
        <soap12:fault name="StatusFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="submitMessage">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="submitMessage">
        <soap12:header message="tns:submitMessage" part="ebMSHeaderInfo" use="literal"></soap12:header>
        <soap12:body parts="submitRequest" use="literal"/>
      </wsdl:input>
      <wsdl:output name="submitMessageResponse">
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="SubmitMessageFault">
        <soap12:fault name="SubmitMessageFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="retrieveMessage">
      <soap12:operation soapAction="" style="document"/>
      <wsdl:input name="retrieveMessage">
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="retrieveMessageResponse">
        <soap12:header message="tns:retrieveMessageResponse" part="ebMSHeaderInfo" use="literal"></soap12:header>
        <soap12:body parts="retrieveMessageResponse" use="literal"/>
      </wsdl:output>
      <wsdl:fault name="RetrieveMessageFault">
        <soap12:fault name="RetrieveMessageFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="BackendService_1_1">
    <wsdl:port binding="tns:BackendService_1_1SoapBinding" name="BACKEND_PORT">
      <soap12:address location="http://localhost:8080/domibus/services/backend"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:endpoint>http://localhost:8080/domibus/services/backend</con:endpoint><con:endpoint>http://wltdgt02.cc.cec.eu.int:1063/domibus-weblogic/services/backend</con:endpoint></con:endpoints><con:operation id="767cb481-8b7d-45ef-957f-e823696a27be" isOneWay="false" action="" name="getMessageErrors" bindingOperationName="getMessageErrors" type="Request-Response" outputName="getMessageErrorsResponse" inputName="getMessageErrors" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3f9edeb6-0fb8-4ac3-b8fe-3fe3b7ec2fc0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>?</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="f3563058-db2b-4135-a5e0-ddcfb8386683" isOneWay="false" action="" name="listPendingMessages" bindingOperationName="listPendingMessages" type="Request-Response" outputName="listPendingMessagesResponse" inputName="listPendingMessages" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/></con:operation><con:operation id="854782c9-2abc-4349-93f6-240147556428" isOneWay="false" action="" name="submitMessage" bindingOperationName="submitMessage" type="Request-Response" outputName="submitMessageResponse" inputName="submitMessage" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3f133f98-0a64-4fae-bcf5-2e64d1a04e16" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header>
      <ns:Messaging mustUnderstand="?">
         </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:call><con:call id="e984a797-da44-4ed9-88e6-118cdebcc075" name="Request 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header>\r
      <ns:Messaging mustUnderstand="?">\r
         <!--Optional:-->\r
         <ns:UserMessage mpc="?">\r
            <!--You may enter the following 5 items in any order-->\r
            <!--Optional:-->\r
            <ns:MessageInfo>\r
               <!--You may enter the following 3 items in any order-->\r
               <!--Optional:-->\r
               <ns:Timestamp>?</ns:Timestamp>\r
               <!--Optional:-->\r
               <ns:MessageId>?</ns:MessageId>\r
               <!--Optional:-->\r
               <ns:RefToMessageId>?</ns:RefToMessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <!--You may enter the following 2 items in any order-->\r
               <ns:From>\r
                  <!--You may enter the following 2 items in any order-->\r
                  <ns:PartyId type="?">?</ns:PartyId>\r
                  <ns:Role>?</ns:Role>\r
               </ns:From>\r
               <!--Optional:-->\r
               <ns:To>\r
                  <!--You may enter the following 2 items in any order-->\r
                  <ns:PartyId type="?">?</ns:PartyId>\r
                  <ns:Role>?</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <!--You may enter the following 4 items in any order-->\r
               <!--Optional:-->\r
               <ns:AgreementRef type="?" pmode="?">?</ns:AgreementRef>\r
               <ns:Service type="?">?</ns:Service>\r
               <ns:Action>?</ns:Action>\r
               <!--Optional:-->\r
               <ns:ConversationId>?</ns:ConversationId>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <!--1 or more repetitions:-->\r
               <ns:Property name="?" type="?">?</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <!--1 or more repetitions:-->\r
               <ns:PartInfo href="?">\r
                  <!--You may enter the following 3 items in any order-->\r
                  <!--Optional:-->\r
                  <ns:Schema location="?" version="?" namespace="?"/>\r
                  <!--Optional:-->\r
                  <ns:Description xml:lang="?">?</ns:Description>\r
                  <!--Optional:-->\r
                  <ns:PartProperties>\r
                     <!--1 or more repetitions:-->\r
                     <ns:Property name="?" type="?">?</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <!--Optional:-->\r
         <bodyload payloadId="?" contentType="?">\r
            <value>cid:527230167435</value>\r
         </bodyload>\r
         <!--Zero or more repetitions:-->\r
         <payload payloadId="?" contentType="?">\r
            <value>cid:993829285671</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="fa93f66f-0dee-457b-9182-2f3dac23e65c" isOneWay="false" action="" name="retrieveMessage" bindingOperationName="retrieveMessage" type="Request-Response" outputName="retrieveMessageResponse" inputName="retrieveMessage" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="8955e910-8ad0-4f6a-84e5-e5305aa8bda4" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>?</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:call><con:call id="e7667214-6a86-430e-a470-7a5c7d463ed5" name="Request 2"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>?</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="f3c6fe64-3e6d-4241-b6ef-c2238e21fd0b" isOneWay="false" action="" name="getStatus" bindingOperationName="getStatus" type="Request-Response" outputName="getStatusResponse" inputName="getStatus" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="9e9c4dbc-0255-4c97-bd4e-59e96bee396d" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>?</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" id="0761ba9c-ffa6-4c5d-98a2-55beea4087b2" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://${localUrl}" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#localUrl}</con:endpoint></con:endpoints><con:resource name="Authentication" path="/rest/security/authentication" id="d3c10c37-44fb-4716-a729-db1b3c932315"><con:settings/><con:parameters/><con:method name="Authentication 1" id="ffd8755b-382d-4855-8029-75bfa2a0f506" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:aut="http://localhost/domibus/domibus/rest/security/authentication">aut:Fault</con:element></con:representation><con:request name="Super User login" id="c0cd0de1-98d1-4b07-89a7-4495c89e24cc" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>{"username":"super","password":"Domibus-123"}</con:request><con:originalUri>http://localhost/domibus/domibus/rest/security/authentication</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="Default C1 User login" id="c0cd0de1-98d1-4b07-89a7-4495c89e24cc" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>{"username":"admin","password":"123456"}</con:request><con:originalUri>http://localhost/domibus/domibus/rest/security/authentication</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="domain" path="/rest/security/user/domain" id="b03bb848-9ed3-41ca-822a-48afb2299b66"><con:settings/><con:parameters/><con:method name="Method 1" id="3f55624d-a3dc-4ad0-a396-82bbfd85cb19" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:dom="http://localhost/domibus/rest/security/user/domain">dom:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" id="44cd08af-c459-40d4-9a2d-ca310c316ad1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="JSESSIONID=C75BAA1EEC2824A14BDF61417943615F"/>
  &lt;con:entry key="Content-Type" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request/><con:originalUri>http://localhost/domibus/rest/security/user/domain</con:originalUri><con:credentials><con:username>super</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:request></con:method></con:resource><con:resource name="pmode" path="/rest/pmode" id="cd79698b-4a38-44f7-aa94-312044093960"><con:settings/><con:parameters><con:parameter><con:name>description</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>file</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="fb500a08-6e8f-43cc-b07c-79bcc283f391" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>multipart/form-data</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:pmod="http://localhost/domibus/rest/pmode">pmod:Fault</con:element></con:representation><con:request name="Request 1" id="9fe84fe6-27d8-4034-af2b-0567c46ed541" mediaType="multipart/form-data" postQueryString="true"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request/><con:originalUri>http://localhost/domibus/rest/pmode</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="file" value="file:${filename}"/>
  <con:entry key="description" value="SoapUI sample test description for PMode upload. Used Pmode: "/>
</con:parameters><con:parameterOrder><con:entry>description</con:entry><con:entry>file</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="users" path="/rest/plugin/users" id="08af65c3-6bc8-423b-a1a7-81c17a4f29f5"><con:settings/><con:parameters><con:parameter><con:name>passwordPl</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userPl</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>userRole</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="cf6c97aa-d10f-4b09-bf25-c4dff8bfd958" method="PUT"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>400</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="addPluginUserRequest" id="8d49ecc8-e544-4792-8b4a-a9ab83c23e94" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>{ "status": "NEW",
"userName": "${=request.getProperty('userPl').getValue()}",
"authenticationType": "BASIC", 
"authRoles": "${=request.getProperty('userRole').getValue()}", 
"password": "${=request.getProperty('passwordPl').getValue()}", 
"active": "true" }</con:request><con:originalUri>http://localhost/domibus/rest/plugin/users</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="passwordPl" value="Domibus-123"/>
  <con:entry key="userPl" value="pluginAdmin"/>
  <con:entry key="userRole" value="ADMIN_ROLE"/>
</con:parameters><con:parameterOrder><con:entry>passwordPl</con:entry><con:entry>userPl</con:entry><con:entry>userRole</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="properties" path="/rest/configuration/properties" id="c9d66526-374f-4179-ae29-bffa3524027c"><con:settings/><con:parameters><con:parameter><con:name>propName</con:name><con:value/><con:style>PLAIN</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:resource name="${propName}" path="{propName}" id="5eef888f-1598-4d59-b65d-6541a72db60a"><con:settings/><con:parameters><con:parameter><con:name>propName</con:name><con:value>domibus.UI.title.name</con:value><con:style>TEMPLATE</con:style><con:default>domibus.UI.title.name</con:default></con:parameter></con:parameters><con:method name="Method 1" id="0c35d316-221b-4bf4-a88c-86a389579351" method="PUT"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>text/xml</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/x-www-form-urlencoded</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>multipart/form-data</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>multipart/mixed</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="cdb83ed7-cbca-4d93-b6f2-f64dd386d908" mediaType="text/xml" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>"New data"</con:request><con:originalUri>http://localhost/domibus/rest/configuration/properties/</con:originalUri><con:credentials><con:username>${#Project#defaultAdminUsername}</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="propName" value="domibus.UI.title.name" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:method name="Method 1" id="96738251-924a-47ed-b00c-b61fc620b382" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="72ac648c-e949-4748-8334-6153846daf64" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>"New Tab Title"</con:request><con:originalUri>http://localhost/domibus/domibus/rest/configuration/properties</con:originalUri><con:credentials><con:username>${#Project#defaultAdminUsername}</con:username><con:password>${#Project#defaultAdminPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="propName" value="domibus.UI.title.name" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>propName</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="26f47105-33a8-4994-9eb3-c2073227b909" name="Administration"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Clean Database" searchProperties="true" id="3588311a-372e-4dce-80ad-21700d5a5684">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Clean All" id="26e462e9-8013-49da-b45b-b91a5e83d07f"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDatabaseAll();
test.finalize();

</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-localhost-tomcat-tomcat" searchProperties="true" id="70e2f6e4-1daa-45da-b9f2-770d07f94ed8">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties-Default-Default-Main Branch" id="b767208c-4dbc-4382-8f1c-c604bfe7c180"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-BugFix Branch" id="ad1675a7-d45b-418b-b0ef-3e59a0bda22e"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default_3GWs-Main Branch" id="0d5d57e2-4762-4c90-8204-3f82f45f41b9"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red","dbUser":"root","dbPassword":"root"}, 
"thirdDefault":{"site":"Third","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_green","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default_3GWs-BugFix Branch" id="444ee4ba-7304-4c99-8749-792f0517bb44"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_bugfix","dbUser":"root","dbPassword":"root"}, 
"thirdDefault":{"site":"Third","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_green_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy1D-Default-Main Branch" id="783117c3-72fe-4a3c-be74-0405e9239eea"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red","dbUser":"root","dbPassword":"root"},  
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy1D-Default-BugFix Branch" id="b29a9534-027f-4b06-8d2a-d81dc70ec356"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy2D-Default-Main Branch" id="e4511ce1-1c50-470f-be7b-a0e87fc3d24c"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom2","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy2D-Default-BugFix Branch" id="ff9deea4-a98e-49f3-9aab-04e309c49f6a"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1_bugfix","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom2_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy3D(Name=Min Length)-Default-Main Branch" id="1fb0daae-8372-4ed0-947c-be6ff714318f"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom2","dbUser":"root","dbPassword":"root"},
"C2Dom3":{"site":"C2","domainName":"a","domNo":3,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom3","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy3D(Name=Min Length)-Default-BugFix Branch" id="dccf93c6-dd8d-41fb-ba68-4998c8a383d5"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1_bugfix","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom2_bugfix","dbUser":"root","dbPassword":"root"},
"C2Dom3":{"site":"C2","domainName":"a","domNo":3,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom3_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy3D(Name=Max Length)-Default-Main Branch" id="1f41a57c-dc9b-4e66-8de9-a64dd7725820"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom2","dbUser":"root","dbPassword":"root"},
"C2Dom3":{"site":"C2","domainName":"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc","domNo":3,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom3","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy3D(Name=Max Length)-Default-BugFix Branch" id="9bd09b8a-0c8f-4188-afa1-e1e4a3df0807"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1_bugfix","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom2_bugfix","dbUser":"root","dbPassword":"root"},
"C2Dom3":{"site":"C2","domainName":"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc","domNo":3,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom3_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy2D-Multitenancy2D-Main Branch" id="379852e6-769f-4534-9895-9510a919c867"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom2","dbUser":"root","dbPassword":"root"},
"C3Dom1":{"site":"C3","domainName":"domibus_C3Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c3dom1","dbUser":"root","dbPassword":"root"},
"C3Dom2":{"site":"C3","domainName":"domibus_C3Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c3dom2","dbUser":"root","dbPassword":"root"}
}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Multitenancy2D-Multitenancy2D-BugFix Branch" id="ebca9bcf-c407-43b6-985e-ad0b3731bac1"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom1_bugfix","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c2dom2_bugfix","dbUser":"root","dbPassword":"root"},
"C3Dom1":{"site":"C3","domainName":"domibus_C3Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c3dom1_bugfix","dbUser":"root","dbPassword":"root"},
"C3Dom2":{"site":"C3","domainName":"domibus_C3Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c3dom2_bugfix","dbUser":"root","dbPassword":"root"}
}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Multitenancy2D-Dynamic PEPPOL-Main Branch" id="8d7731e3-8113-434f-89f1-20ed38faa297"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c2","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c3","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C3","domainName":"domain1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c3dom1","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C3","domainName":"domain2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c3dom2","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Multitenancy2D-Dynamic PEPPOL-BugFix Branch" id="5535fd92-ac49-477a-9b33-3b1cc4054f8e"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c2_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c3_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C3","domainName":"domain1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c3dom1_bugfix","dbUser":"root","dbPassword":"root"},
"C2Dom2":{"site":"C3","domainName":"domain2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_c3dom2_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-Dynamic OASIS-3GWs-Main Branch" id="44d184e9-dc43-4ff2-ac5d-aad61fd69928"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c2","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c3","dbUser":"root","dbPassword":"root"},
"thirdDefault":{"site":"Third","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_green","dbUser":"root","dbPassword":"root"}}''');
// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-Dynamic OASIS-3GWs-BugFix Branch" id="c6639e96-8e3f-4e19-8661-454c6530e014"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c2_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c3_bugfix","dbUser":"root","dbPassword":"root"},
"thirdDefault":{"site":"Third","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_green_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-Dynamic OASIS-Main Branch" id="5a4d57fc-eac8-48f1-ac26-49502edc207b"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c2","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c3","dbUser":"root","dbPassword":"root"}}''');
// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-Dynamic OASIS-BugFix Branch" id="fd2b665f-fb43-4bff-9bd0-cd190f1971f8"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c2_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_dd_c3_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-https-Main Branch" id="f6108080-7356-49b3-8fca-c80c1cfcd885"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_https","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_https","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-https-BugFix Branch" id="86f1fcab-f216-4f7a-a702-5500f244bbf7"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_https_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_https_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-taxud-Main Branch" id="0e657656-9b96-45fa-ac0c-7d9ebdf57751"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_tpap","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_tapas","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties-Default-Default-taxud-BugFix Branch" id="f914cfdb-ce4d-46c8-8173-05a93802f3e6"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_tpap_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_tapas_bugfix","dbUser":"root","dbPassword":"root"}}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";

</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-localhost-DynamicDiscovery" searchProperties="true" id="297b2f5c-d4d8-4af4-ac8d-dddbeec7c97b">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="dbe07709-94f2-4d38-9483-f898d19cc536"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:3306/domibus_dd_c2");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "root");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "root");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:3306/domibus_dd_c3");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "root");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "root");

log.info "Update done.";

</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-cloud-weblogic-tomcat" searchProperties="true" id="9453740e-f4e9-48a4-8706-d9647da9f4a7">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="a54afde9-4f74-472a-b265-db3c073a4f4d"><con:settings/><con:config><script>
// blue: weblogic (edeltest1)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://edeltest4.westeurope.cloudapp.azure.com:7003/domibus-weblogic");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://edeltest2.westeurope.cloudapp.azure.com:9080/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"oracle","dbDriver":"oracle.jdbc.OracleDriver","dbJdbcUrl":"jdbc:oracle:thin:@localhost:41521/xe","dbUser":"domibus_default","dbPassword":"domibus_default"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:23306/domibus_default_tomcat","dbUser":"root","dbPassword":"edelCld2017"}, 
}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="ea5898b0-6b18-42a2-885c-68778c567789"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\cloud\\weblogic\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\cloud\\weblogic\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-cloud-wildfly-tomcat" searchProperties="true" id="cd2bbf68-7b19-4a53-a0cf-9931a8e5cc90">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="6495e4a6-bc87-411f-ad66-4e24c2e8d110"><con:settings/><con:config><script>// blue: weblogic (edeltest1)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://edeltest2.westeurope.cloudapp.azure.com:8085/domibus-wildfly");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://edeltest2.westeurope.cloudapp.azure.com:9080/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:23306/domibus_default","dbUser":"domibus_default","dbPassword":"domibus_default"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:23306/domibus_default_tomcat","dbUser":"domibus_default_tomcat","dbPassword":"domibus_default_tomcat"}, 
}''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="963be318-57cf-49ca-acb4-c22d8f9a7fa7"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\cloud\\wildfly\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\cloud\\wildfly\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-cloud-tomcat-tomcat" searchProperties="true" id="e3a6b85c-54ab-4079-85ef-faa75c77a2f7">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="5e8696ff-8112-435d-89e1-3f57f508da56"><con:settings/><con:config><script>// blue: tomcat (edeltest1)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://edeltest4.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:13306/domtestusr");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "domtestusr");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "domtestusr");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://edeltest2.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:23306/domtestusr");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "domtestusr");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "domtestusr");

testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="f3649904-524d-4247-ac56-165045265460"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\cloud\\tomcat\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\cloud\\tomcat\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-localhost-tomcat-tomcat-bugfix" searchProperties="true" id="709740f4-55e6-4cb8-99e2-ec66d7e81f9c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="b1dbab6a-92de-4719-b758-7f19611ef681"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");

// Set DB configurations
testRunner.testCase.testSuite.project.setPropertyValue("allDomainsProperties",'''\
{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue_bugfix","dbUser":"root","dbPassword":"root"}, 
"C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red_bugfix","dbUser":"root","dbPassword":"root"}, 
"thirdDefault":{"site":"Third","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_green_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom1":{"site":"C2","domainName":"domibus_C2Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_C2Dom1_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom2":{"site":"C2","domainName":"domibus_C2Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_C2Dom2_bugfix","dbUser":"root","dbPassword":"root"}, 
"C2Dom3":{"site":"C2","domainName":"domibus_C2Dom3","domNo":3,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_C2Dom3_bugfix","dbUser":"root","dbPassword":"root"},  
"C3Dom1":{"site":"C3","domainName":"domibus_C3Dom1","domNo":1,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_C3Dom1_bugfix","dbUser":"root","dbPassword":"root"},  
"C3Dom2":{"site":"C3","domainName":"domibus_C3Dom2","domNo":2,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_C3Dom2_bugfix","dbUser":"root","dbPassword":"root"},  
"C3Dom3":{"site":"C3","domainName":"domibus_C3Dom3","domNo":3,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_C3Dom3_bugfix","dbUser":"root","dbPassword":"root"} }''');

// Set third gateway option
testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

// Set Multitenancy Modes
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="8643c684-8fd8-4038-bcbe-56df90e97205"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-localhost-DynamicDiscovery-bugfix" searchProperties="true" id="992c4668-6a29-4f68-80ac-0f57b66145d7">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="30ee6457-dbfc-48f9-a1be-b97ef7405f72"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:3306/domibus_dd_c2_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "root");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "root");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:3306/domibus_dd_c3_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "root");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "root");

log.info "Update done.";

</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-cloud-weblogic-tomcat-bugfix" searchProperties="true" id="f37e4ca9-1e67-4c6d-8efd-75ae4869d186">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="939170e7-f476-41fd-abaa-fb3b8a2a363d"><con:settings/><con:config><script>// blue: weblogic (edeltest1)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://edeltest4.westeurope.cloudapp.azure.com:7003/domibus-weblogic");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "oracle");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "oracle.jdbc.OracleDriver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:oracle:thin:@localhost:41521/xe");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "edelivery_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "edelivery_bugfix");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://edeltest2.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:23306/domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "domtestusr_bugfix");

testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="72b781dc-d580-4a53-9b49-881860361e76"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\cloud\\weblogic\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\cloud\\weblogic\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-cloud-wildfly-tomcat-bugfix" searchProperties="true" id="e09664e3-a969-44b7-a0ca-d6a2d462585c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="10f6d8df-3e1c-4f41-afec-0954451dc095"><con:settings/><con:config><script>// blue: wildfly (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://edeltest2.westeurope.cloudapp.azure.com:8085/domibus-wildfly");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:23306/domwildfly_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "domwildfly_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "domwildfly_bugfix");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://edeltest2.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:23306/domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "domtestusr_bugfix");

testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="e25e683e-bcd5-4e00-a4a8-582d02ad0a6b"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\cloud\\wildfly\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\cloud\\wildfly\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-cloud-tomcat-tomcat-bugfix" searchProperties="true" id="c623d027-54d4-454c-878f-b5314f2b3a44">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="419ace83-08ef-4719-85e5-57bef85afac9"><con:settings/><con:config><script>// blue: tomcat (edeltest1)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://edeltest4.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:43306/domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "domtestusr_bugfix");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://edeltest2.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:23306/domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "domtestusr_bugfix");

testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="ea8fe5fb-696d-438e-90c7-c178bc17b3ed"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\cloud\\tomcat\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\cloud\\tomcat\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Configuration-setLocalInstallationsPaths" searchProperties="true" id="02393bb8-9d26-467d-a438-fd170d9748db">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set ec path" id="e62838d3-dbdb-4199-89a7-6e17986dabd6"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/ec/blue/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/ec/red/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathGreen", "C:/ec/greenReceiver/domibus/");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set domibus path" id="3bf57055-d07c-4f5f-91b2-2bbc9f85dbe7"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/sender/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/receiver/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathGreen", "C:/domibus/greenReceiver/domibus/");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Dynamic Discovery path PEPPOL" id="03cc965d-b5fb-4d6f-84b4-5aca37a4788d"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/senderDynPeppol/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/receiver/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathGreen", "C:/domibus/greenReceiver/domibus/");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Dynamic Discovery path OASIS" id="5f2292f8-1805-41fa-ba6b-95505f408731"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/senderDynOasis/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/receiver/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathGreen", "C:/domibus/greenReceiver/domibus/");

log.info "Update done.";
</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="46463b13-b064-42b6-9ed0-401345959b1a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestConnection" searchProperties="true"><con:settings/><con:testStep type="groovy" name="test connection DB" id="2c9c448c-5fcb-4640-9414-f29007a7c540" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.openConnection();
log.info "CONNECTION OPENED";
test.closeConnection();
log.info "CONNECTION CLOSED";
test.finalize();</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="97bc49fa-2279-4302-8acc-155612e19dcb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Start default configuration" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configure multitenancy mode" id="9b30fcdb-0e41-446d-8e9e-f7936eeb54c3"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Set custom properties" id="435f492f-77f4-468a-8a64-7f30d9f20bde"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:3306/domibus_blue");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "root");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "root");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:3306/domibus_red");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "root");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "root");

testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");

log.info "Update done.";

</script></con:config></con:testStep><con:testStep type="groovy" name="Start Blue-Red" id="cbf3007c-e26e-4eeb-9c9c-10af2e26518e"><con:settings/><con:config><script>// Start 2 Domibus: sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="63787218-6a20-4641-9ed1-fc14d0102b75"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="eb0f9a78-570b-4743-9175-af541ff94086"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="dde79d96-7769-48c1-9587-80790e1e040a"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="78b0bad4-275d-4e9c-965c-52c11269dfe0"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="e513202b-f3b9-475d-bbea-135e60ab2f83"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS Blue-Red" id="e0770222-357d-4945-8dc3-359ac88d14ca"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendWebservice",context,log);


</script></con:config></con:testStep><con:tearDownScript/><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>65ecdf7b-e0e2-477b-b020-da4c7fb8c855</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3bc33515-eae2-46e7-a50f-1104a8d1a301</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7aefe4d7-98b5-43b1-8f34-4aa71764de77</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2a3f229a-1557-4ea8-8c4e-3dbc4573d7db" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Start 3 gateways configuration" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Set custom properties" id="a108c0d9-ff1b-42e0-a27b-1ff477b8f769"><con:settings/><con:config><script>// blue: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://localhost:8080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:3306/domibus_blue");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "root");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "root");

// red: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://localhost:8180/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:3306/domibus_red");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "root");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "root");

// green: tomcat (localhost)
testRunner.testCase.testSuite.project.setPropertyValue("greenUrl", "http://localhost:8280/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseGreen", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverGreen", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlGreen", "jdbc:mysql://localhost:3306/domibus_green");
testRunner.testCase.testSuite.project.setPropertyValue("greenDbPassword", "root");
testRunner.testCase.testSuite.project.setPropertyValue("greenDbPassword", "root");

testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Start Blue-Red-Green" id="88b330c5-b031-4ede-80e5-5de5f34c5412"><con:settings/><con:config><script>// Start 3 Domibus: sender, receiver and green.
Domibus.startSetMSHs(1,1,1,context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="c1640a93-60ca-459d-bc4d-2ac0411c7cdc"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes Blue-Red-Green" id="c844be46-6075-498c-8bbe-78d3ad2c8889"><con:settings/><con:config><script>// Upload PModes: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadPmode("sender","special","\\Threegateways\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\Threegateways\\red\\domibus-pmode-red.xml",context,log);
Domibus.uploadPmode("receivergreen","special","\\Threegateways\\green\\domibus-pmode-green.xml",context,log);</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="d43ba76f-a0a6-41c9-ad41-d092833c6714"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red-Green" id="13538478-2163-44b9-bca7-1b8552495fe6"><con:settings/><con:config><script>// Upload truststores: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadTruststore("sender","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\Threegateways\\red\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receivergreen","special","\\Threegateways\\green\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="8d6dac94-92a2-4a88-9103-7eac71ddae12"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS Blue-Red-Green" id="9f24cf9c-ed68-4324-958b-003cf8d498ec"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendWebservice",context,log);
Domibus.setMessageFilters("receivergreen","backendWebservice",context,log);
</script></con:config></con:testStep><con:tearDownScript/><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>8d861779-0a64-417b-b81f-dbaed89dc796</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>42781f68-9908-4231-93af-c83bd2d27190</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f10dbea4-cf15-49a7-93b9-ab0ef7752097</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="7cdd0b09-082e-4608-b56e-e02ce95a200c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update Domibus users" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Add admin console user" id="f863832c-aa8f-49bf-bef2-5525ea1bb04e"><con:settings/><con:config><script>// Create admin console user
/*
 * addAdminConsoleUser(side,context,log,domainValue,userRole,userAC,passwordAC,authUser,authPwd)
 * side: to select Domibus corner. Set to "Blue", "C2" or "sender" to select corner 2. Set to "Red", "C3" or "receiver" to select corner 3
 * context: context
 * log: log
 * domainValue: to select the domain by its name (default value is "Default")
 * userRole: to select the user role (default value "ROLE_ADMIN")
 * userAC: username to add  
 * passwordAC: password for userAC (default value is "Domibus-123")
 * authUser: user for domibus authentication to be able to add userAC (default value is null)
 * authPwd: password for domibus authentication to be able to add userAC (default value is null)
 */
 def side="Blue";
 def domainValue="domibus_C2Dom1";
 def userAC="userC1C2Dom1";
 def passwordAC="Domibus-123";
 def userRole="ROLE_USER"
Domibus.addAdminConsoleUser(side,context,log,domainValue,userRole,userAC,passwordAC);</script></con:config></con:testStep><con:testStep type="groovy" name="Add plugin user" id="ffd67502-fa9c-4bfc-bcca-b1bbb829951a"><con:settings/><con:config><script>// Create plugin user
/*
 * addPluginUser(side,context,log,domainValue,userRole,userPl,passwordPl,originalUser,authUser,authPwd)
 * side: to select Domibus corner. Set to "Blue", "C2" or "sender" to select corner 2. Set to "Red", "C3" or "receiver" to select corner 3
 * context: context
 * log: log
 * domainValue: to select the domain by its name (default value is "Default")
 * userRole: to select the user role (default value "ROLE_ADMIN")
 * userPl: username to add  
 * passwordPl: password for userPl (default value is "Domibus-123")
 * originalUser: to select C1 or C4 (default value is "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1")
 * authUser: user for domibus authentication to be able to add userAC (default value is null)
 * authPwd: password for domibus authentication to be able to add userAC (default value is null)
 */
 def side="Blue";
 def domainValue="domibus_C2Dom1";
 def userPl="userC1C2Dom1";
 def passwordPl="Domibus-123";
 def userRole="ROLE_USER";
 def originalUser="urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1";
Domibus.addPluginUser(side,context,log,domainValue,userRole,userPl,passwordPl,originalUser);</script></con:config></con:testStep><con:testStep type="groovy" name="Remove admin console user" id="9857d9f3-0e6f-46ac-baab-c8c8a63ad429"><con:settings/><con:config><script>// Remove admin console user
/*
 * removeAdminConsoleUser(side,context,log,domainValue,userAC,authUser,authPwd)
 * side: to select Domibus corner. Set to "Blue", "C2" or "sender" to select corner 2. Set to "Red", "C3" or "receiver" to select corner 3
 * context: context
 * log: log
 * domainValue: to select the domain by its name (default value is "Default")
 * userAC: username to remove  
 * authUser: user for domibus authentication to be able to remove userAC (default value is null)
 * authPwd: password for domibus authentication to be able to remove userAC (default value is null)
 */
 def side="Blue";
 def domainValue="Default";
 def userAC="adminC2";
Domibus.removeAdminConsoleUser(side,context,log,domainValue,userAC);</script></con:config></con:testStep><con:testStep type="groovy" name="Remove plugin user" id="3c14eb86-cbd9-4e24-9dba-fd03bcf13064"><con:settings/><con:config><script>// Remove plugin user
/*
 * removePluginUser(side,context,log,domainValue,userPl,authUser,authPwd)
 * side: to select Domibus corner. Set to "Blue", "C2" or "sender" to select corner 2. Set to "Red", "C3" or "receiver" to select corner 3
 * context: context
 * log: log
 * domainValue: to select the domain by its name (default value is "Default")
 * userRole: to select the user role (default value "ROLE_ADMIN")
 * userPl: username to remove  
 * passwordPl: password for userPl (default value is "Domibus-123")
 * originalUser: to select C1 or C4 (default value is "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1")
 * authUser: user for domibus authentication to be able to remove userAC (default value is null)
 * authPwd: password for domibus authentication to be able to remove userAC (default value is null)
 */
 def side="Blue";
 def domainValue="Default";
 def userPl="adminC2";
 def passwordPl="Domibus-123";
 def userRole="ROLE_ADMIN";
 def originalUser="urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1";
Domibus.removePluginUser(side,context,log,domainValue,userPl);</script></con:config></con:testStep><con:testStep type="groovy" name="workspace" id="5054a0db-d820-4352-9d20-7c3c90a3ecd3"><con:settings/><con:config><script>//Domibus.addAdminConsoleUser("BLUE",context,log,"Default","ROLE_USER","userTest3","Domibus-123");
//Domibus.someFunc("BLUE",context,log,"Default","ROLE_USER","userTest1","Domibus-123");
//import groovy.json.JsonSlurper 
//import groovy.json.JsonOutput
//def userAC="toto"; def passwordAC= "titi"; def userRole="ROLE_ADMIN"; 
//def jsonSlurper = new JsonSlurper()



//Domibus.addAdminConsoleUser("BLUE",context,log,"Default","ROLE_USER","userTest301","Domibus-123");
//Domibus.addPluginUser("blue",context,log,"domibus_C2Dom1","ROLE_ADMIN", "adminTestSp","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1")
Domibus.removePluginUser("blue",context,log,"Default", "toto");
//def usersMap=jsonSlurper.parseText(Domibus.getPluginUsers("blue",context,log));
//log.info usersMap 
//log.info Domibus.userExists(usersMap,"userresponse01",true)
//log.info Domibus.getDomain("blue",context,log)
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="2c951d55-9253-4042-8a65-c1e7524fbbfd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Add or change Teardown script" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AddToTearDown" id="829d27b4-c5b8-460c-a726-0cfd5a19ba9e"><con:settings/><con:config><script>def lineToAdd = "ExcelReporting.reportTestCase(testRunner, log)"
log.info "START: Amendment tear down sciprts"
testRunner.testCase.testSuite.project.getTestSuiteList().each { testSuite ->
	testSuite.getTestCaseList().each { testCase ->
 		def td = testCase.getTearDownScript()
  		if (td == null) 
  		{
  			testCase.setTearDownScript(lineToAdd)
  		}
  		else if(!td.contains("ExcelReporting.reportTestCase")) {
  			def newTearDown = td + System.getProperty("line.separator") + lineToAdd
  			testCase.setTearDownScript(newTearDown)
  		}
 	}
 }
log.info "END: Amendment tear down sciprts"
</script></con:config></con:testStep><con:testStep type="groovy" name="ReplaceTearDownLine" id="100dfd9e-81f3-47de-ace0-d1cc48497c8d"><con:settings/><con:config><script>def newLine = System.getProperty("line.separator")
/*testRunner.testCase.testSuite.project.getTestSuiteList().each{
	testsuite -> log.info testsuite.name
}*/
//def oldLineToBeChanged = /(?m)\/*\ExcelReporting.reportTestCase/
//def newLineToBeChanged = "ExcelReporting.reportTestCase"

def newLineToBeChanged = "//ExcelReporting.reportTestCase"
def oldLineToBeChanged = /(?m)(^|[^\/]+)ExcelReporting.reportTestCase/


log.info "START: Amend tear down scripts"
testRunner.testCase.testSuite.project.getTestSuiteList().each { testSuite ->
	testSuite.getTestCaseList().each { testCase ->
 		def tdScript = testCase.getTearDownScript()
 		log.info tdScript;
  		if (tdScript != null) {			
  			testCase.setTearDownScript( tdScript.replaceAll(oldLineToBeChanged, newLineToBeChanged) )
  		}
 	}
 }

 log.info "end"</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="12ba0736-f0ec-440d-9f24-8ad8034a4eb8"><con:settings/><con:config><script>def newLine = System.getProperty("line.separator")
def oldLineToBeChanged = /(?m)\/*ExcelReporting.reportTestCase/

def newLineToBeChanged = "AxcelReporting.reportTestCase"

def tdScript="""
//ExcelReporting.reportTestCase(testRunner, log)
ss
//ExcelReporting.reportTestCase(testRunner, log)
  //ExcelReporting.reportTestCase(testRunner, log)
"""
log.info tdScript.trim().replaceAll(oldLineToBeChanged, newLineToBeChanged)</script></con:config></con:testStep><con:tearDownScript/><con:properties/><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Hash Participant" searchProperties="true" id="d33be978-614a-48b5-bf31-341dbb886c15">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Hash" id="b622a97d-a254-4c68-b58e-fb9ca0d668e5"><con:settings/><con:config><script>def test = new BDMSL(log,null,context);
def CNAMEhash=test.encodeHash("0088:579800000778","MD5",false);
def NAPTRhash=test.encodeHash("0088:579800000778","SHA256",true);
log.info "CNAMEhash:"+CNAMEhash;
log.info "NAPTRhash:"+NAPTRhash;
test.finalize();</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="41736836-2b1a-4d8c-8077-807684023d81" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Properties handling" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Sample  domibus.property change" id="e81788b6-ea8a-4a0d-84f3-687ebe6af345"><con:settings/><con:config><script>def newValueToAssignOne="test1s23"
def propertyToChangeNameOne = "domibus.security.keystore.password"
def propValueDict = ["${propertyToChangeNameOne}" : newValueToAssignOne, 'domibus.database.port':'13306', 'domibus.deployment.clustered' : 'true']

Domibus.changeDomibusProperties("RED", propValueDict,  log, context, testRunner)
//Domibus.restoreDomibusPropertiesFromBackup("RED",  log, context, testRunner)

</script></con:config></con:testStep><con:testStep type="groovy" name="Sample  restore domibus.property" id="9238452b-3138-4853-bf96-1a730a0c5f90"><con:settings/><con:config><script>Domibus.restoreDomibusPropertiesFromBackup("RED",  log, context, testRunner)

</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="d4951981-87e8-4a0f-a61a-f8b873d19625" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Set Third gateway property" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Set true" id="a8782f9e-b280-4123-91f0-351ca080772c"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");
log.info "thirdGateway custom property set to true."</script></con:config></con:testStep><con:testStep type="groovy" name="Set false" id="b9018206-92ca-43c4-9fc4-a37368af106d"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");
log.info "thirdGateway custom property set to false."</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="dc9ba13a-ec6b-4606-b912-7115ff3dec74" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Cloud 3 gateways configuration" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Set custom properties" id="c10c8997-acc2-40c7-81f9-435976e01652"><con:settings/><con:config><script>// blue: weblogic (edeltest1)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://edeltest4.westeurope.cloudapp.azure.com:7005/domibus-weblogic");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "oracle");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "oracle.jdbc.OracleDriver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:oracle:thin:@localhost:41521/xe");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "domtstuser");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "domtstuser");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://edeltest2.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:23306/domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "domtestusr");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "domtestusr");

// green: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("greenUrl", "http://edeltest4.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:43306/domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "domtestusr");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "domtestusr");

testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");
log.info "thirdGateway custom property set to true."

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes Blue-Red-Green" id="6f42cc71-7cec-4560-95cd-f3729c8e8dc5"><con:settings/><con:config><script>// Upload PModes: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadPmode("sender","special","\\CloudThreegateways\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\CloudThreegateways\\red\\domibus-pmode-red.xml",context,log);
Domibus.uploadPmode("receivergreen","special","\\CloudThreegateways\\green\\domibus-pmode-green.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red-Green" id="00399fd9-8e42-4234-b454-8369810f82ba"><con:settings/><con:config><script>// Upload truststores: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadTruststore("sender","special","\\CloudThreegateways\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\CloudThreegateways\\red\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receivergreen","special","\\CloudThreegateways\\green\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS Blue-Red-Green" id="f8226f4b-3ed8-4d7a-a87e-1737cd50c557"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendWebservice",context,log);
Domibus.setMessageFilters("receivergreen","backendWebservice",context,log);
</script></con:config></con:testStep><con:tearDownScript/><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>8d861779-0a64-417b-b81f-dbaed89dc796</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>42781f68-9908-4231-93af-c83bd2d27190</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f10dbea4-cf15-49a7-93b9-ab0ef7752097</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="29077ece-8efa-4b56-a882-06dcf8971e0b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Cloud 3 gateways configuration-bugfix" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Set custom properties" id="9491c0b9-e9c7-4ed2-98a5-9157467316fa"><con:settings/><con:config><script>// blue: weblogic (edeltest4)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://edeltest4.westeurope.cloudapp.azure.com:7005/domibus-weblogic");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "oracle");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "oracle.jdbc.OracleDriver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:oracle:thin:@localhost:41521/xe");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "edelivery_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "edelivery_bugfix");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://edeltest2.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:23306/domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbUser", "domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "domtestusr_bugfix");

// green: tomcat (edeltest4)
testRunner.testCase.testSuite.project.setPropertyValue("greenUrl", "http://edeltest4.westeurope.cloudapp.azure.com:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:mysql://localhost:43306/domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbUser", "domtestusr_bugfix");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "domtestusr_bugfix");

testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");
log.info "thirdGateway custom property set to true."

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes Blue-Red-Green" id="25382160-55c6-4f0b-b434-2d841e22ff04"><con:settings/><con:config><script>// Upload PModes: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadPmode("sender","special","\\CloudThreegateways\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\CloudThreegateways\\red\\domibus-pmode-red.xml",context,log);
Domibus.uploadPmode("receivergreen","special","\\CloudThreegateways\\green\\domibus-pmode-green.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red-Green" id="d51164bc-2bc5-43f9-91f1-a441b7c909b7"><con:settings/><con:config><script>// Upload truststores: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadTruststore("sender","special","\\CloudThreegateways\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\CloudThreegateways\\red\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receivergreen","special","\\CloudThreegateways\\green\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS Blue-Red-Green" id="5afc46f7-9b85-41d9-a9cf-3ab31ea50cb1"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendWebservice",context,log);
Domibus.setMessageFilters("receivergreen","backendWebservice",context,log);
</script></con:config></con:testStep><con:tearDownScript/><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>8d861779-0a64-417b-b81f-dbaed89dc796</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>42781f68-9908-4231-93af-c83bd2d27190</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f10dbea4-cf15-49a7-93b9-ab0ef7752097</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0ee1674e-2e10-48a1-8416-1a9e6c59ef96" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update plugin security option" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Enable Security-no domain-C2" id="ef011ca8-cdbb-408c-95a2-64857210f0b3"><con:settings/><con:config><script>def newValueToAssign="false";
def propertyToChangeName = "domibus.auth.unsecureLoginAllowed";
def propValueDict = ["${propertyToChangeName}" : newValueToAssign];

Domibus.changeDomibusProperties("BLUE", propValueDict,  log, context, testRunner);
</script></con:config></con:testStep><con:testStep type="groovy" name="Enable Security-no domain-C3" id="821f9f3f-cfe3-433d-8501-340d16806996"><con:settings/><con:config><script>def newValueToAssign="false";
def propertyToChangeName = "domibus.auth.unsecureLoginAllowed";
def propValueDict = ["${propertyToChangeName}" : newValueToAssign];

Domibus.changeDomibusProperties("RED", propValueDict,  log, context, testRunner);
</script></con:config></con:testStep><con:testStep type="groovy" name="Disable Security-no domain-C2" id="43c04011-c2d8-4f84-8f1f-efe70b4f6c91"><con:settings/><con:config><script>def newValueToAssign="true";
def propertyToChangeName = "domibus.auth.unsecureLoginAllowed";
def propValueDict = ["${propertyToChangeName}" : newValueToAssign];

Domibus.changeDomibusProperties("BLUE", propValueDict,  log, context, testRunner);</script></con:config></con:testStep><con:testStep type="groovy" name="Disable Security-no domain-C3" id="01692ee3-946b-4e38-835b-d1f19d38623c"><con:settings/><con:config><script>def newValueToAssign="true";
def propertyToChangeName = "domibus.auth.unsecureLoginAllowed";
def propValueDict = ["${propertyToChangeName}" : newValueToAssign];

Domibus.changeDomibusProperties("RED", propValueDict,  log, context, testRunner);</script></con:config></con:testStep><con:testStep type="groovy" name="Restore Default-no domain-C2" id="a4fcc0a8-3c9c-4782-b53e-89d61c18657a"><con:settings/><con:config><script>Domibus.restoreDomibusPropertiesFromBackup("BLUE",  log, context, testRunner);

</script></con:config></con:testStep><con:testStep type="groovy" name="Restore Default-no domain-C3" id="a20f9058-f847-4715-974c-281c720fe3ba"><con:settings/><con:config><script>Domibus.restoreDomibusPropertiesFromBackup("RED",  log, context, testRunner);

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="85674ef4-40b0-4024-a8bd-dd54cfc441e0"><con:settings/><con:config><script>Domibus.stopSetMSHs(1,0,0,context, log);</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="5202e73f-2164-4969-aa8e-760705c61442" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Liste test cases names" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script" id="c84167a6-32cf-4814-813e-7fd65386d3dc"><con:settings/><con:config><script> log.info "BEGIN PROJECT"
testRunner.testCase.testSuite.project.getTestSuiteList().each { testSuite ->
	log.info "==== BEGIN "+testSuite.getName()+" ===="
	testSuite.getTestCaseList().each { testCase ->
 		def testCaseName = testCase.getName()
 		log.info testCaseName;
 	}
 	log.info "==== END "+testSuite.getName()+" ===="
 }
 log.info "END PROJECT"</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="ebdf6b02-1379-4d01-932f-1efc38d376e8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Update authentications details" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Add default authentication to all test steps in test suite" id="a530136f-2fea-49fa-a412-c0837dd8bbe0" disabled="true"><con:settings/><con:config><script>//IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII
//// filterForTestSuite = /WS-Auto-Not-for-Bamboo/   // for multiple test suite use more advanced regexp like for example:  /PASSING_AUTO_BAMBOO|PASSING_NOT_FOR_BAMBOO/ 
import com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep
    
def filterForTestSuite = "WS-Auto-for-Bamboo" //  //"ToBeAdded" "WS-Auto-for-Bamboo"
	
	log.info("START: modyfication of test requests")
	context.testCase.testSuite.project.getTestSuiteList().each { testSuite ->
		if (testSuite.getLabel() =~ filterForTestSuite) {
		log.info("test suite: " + testSuite.getLabel())
			testSuite.getTestCaseList().each { testCase ->
					log.info("test label:" + testCase.getLabel())
					testCase.getTestStepList().each {testStep ->
		      				if (testStep instanceof WsdlTestRequestStep) {
		      				log.info("Ammending test step: " +  testStep.name) 
							def h = testStep.getHttpRequest()
							def endpoint = testStep.getPropertyValue("Endpoint")
							
							def userValue = null
							if ( endpoint =~ /remoteUrl/) {
								userValue = '${#Project#adminC4Default}'
							}
							else 
							if  ( endpoint =~ /localUrl/) {
								userValue = '${#Project#adminC1Default}'
								}
							else 
								log.warn "Endpoint is not refering to remoteUrl neither localUrl property - need manual setup."

							log.info h.getUsername()
							log.info h.getPassword()
							
							h.setSelectedAuthProfileAndAuthType(null, com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("No Authorization"))

							h.removeBasicAuthenticationProfile("Basic")
							//h.setSelectedAuthProfileAndAuthType(null, com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("No Authorization"))
							
							//h.setAuthType("No Authorization")
							//h.setAuthType(com.eviware.soapui.config.CredentialsConfig.AuthType.NO_AUTHORIZATION)
							//testStep.getTestRequest().setSelectedAuthProfileAndAuthType(AbstractHttpRequest.BASIC_AUTH_PROFILE,CredentialsConfig.AuthType.PREEMPTIVE)
							
							//h.setSelectedAuthProfileAndAuthType("Basic", com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("Preemptive"))
							// h.setUsername(userValue) 
							//h.setPassword('${#Project#adminDefaultPassword}') 
							
						}
	 			}
			}
		}
	 }
	log.info("END: Modification of requests hedears finished")



/*

//import com.eviware.soapui.config.CredentialsConfig.AuthType.Enum
	def h = context.getTestCase().getTestStepByName("tmp").getHttpRequest() 
	def endpoint = context.getTestCase().getTestStepByName("tmp").getPropertyValue("Endpoint")

	def userValue = null
	if ( endpoint =~ /remoteUrl/) {
		log.info "Remote"
		userValue = '${#Project#adminC4Default}'
	}
	else 
	     if  ( endpoint =~ /localUrl/) {
	     	log.info "Local"	     	
	     	userValue = '${#Project#adminC1Default}'
	     }
	     else 
	     	log.warn "Something different need manual settings"
	
	h.removeBasicAuthenticationProfile("Basic")
	log.info h.getSelectedAuthProfile()
		log.info h.getAuthType()
		log.info h.getBasicAuthenticationProfiles() 

		h.setSelectedAuthProfileAndAuthType("Basic", com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("Preemptive"))
		h.setUsername(userValue) 
		h.setPassword('${#Project#adminDefaultPassword}') 
		


//def p =  Enum.forString("Preemptive") //INT_GLOBAL_HTTP_SETTINGS") //INT_PREEMPTIVE")
//log.info p.getClass()
//log.info p
// def e = Enum.INT_GLOBAL_HTTP_SETTINGS
// log.info e
//
// log.info Enum.forInt(2)
//h.removeBasicAuthenticationProfile("Basic")
	log.info h.getSelectedAuthProfile()
		log.info h.getAuthType()
		log.info h.getBasicAuthType("Basic")
		log.info h.getBasicAuthenticationProfiles() 
		log.info h.getUsername()
		log.info h.getPassword()

// public void setSelectedAuthProfileAndAuthType(String authProfile, CredentialsConfig.AuthType.Enum authType)
// addBasicAuthenticationProfile
// setPassword, setUsername
*/</script></con:config></con:testStep><con:testStep type="groovy" name="List not disabled requests" id="3e2728eb-6a57-4b71-a0a6-a364640f7b86" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.getTestCaseList().findAll{ ! it.isDisabled() }.each { testCase ->
                       log.info ("test label:" + testCase.getLabel())
                         testCase.getTestStepList().findAll{ ! it.isDisabled() }.each { testStep ->
                            if (testStep instanceof com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep) {
                                log.info("              The test step: " + testStep.name)
                             }
                    }
               }</script></con:config></con:testStep><con:testStep type="groovy" name="Copy of Domibus methods Add or remove authentication details" id="03a0bf37-b162-435e-a351-18e3cfd3c8c1"><con:settings/><con:config><script>def filterForTestSuite = "ToBeAdded" //  "WS-Auto-for-Bamboo" //"ToBeAdded"
Domibus.enableAuthenticationForTestSuite(filterForTestSuite, context, log, "Basic", com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("Preemptive"), /remoteUrl/)
//Domibus.disableAuthenticationForTestSuite(filterForTestSuite, context, log) //"Basic", com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("No Authorization")</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="d1ff0ce5-6cea-4ea5-b910-906db1c01548" failOnError="true" failTestCaseOnErrors="true" keepSession="true" maxResults="0" name="Add plugin user" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="restrequest" name="Authentication" id="9614f763-1712-4cfc-91f6-2ddf3d4b1f53"><con:settings/><con:config service="http://${localUrl}" resourcePath="/rest/security/authentication" methodName="Authentication 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Authentication" id="c0cd0de1-98d1-4b07-89a7-4495c89e24cc" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>{"username":"super","password":"123456"}</con:request><con:originalUri>http://localhost/domibus/domibus/rest/security/authentication</con:originalUri><con:assertion type="GroovyScriptAssertion" id="98a7e031-2cfa-45d7-90f6-6962151520cb" name="Script Assertion"><con:configuration><scriptText>/**
 * This is the Script Assertion
 * which sets headers to the requested  targeted steps
 * by extracting header from current step response
 **/
//Assert if response has headers
assert messageExchange.responseHeaders, "Response does not have any headers"

 //Specify all the headers to retrieve from current test step response as keys, target step request headers as values
 //key - current response header name
 //value - target request header name
 //Add more key, values into map if you need to extract and set more headers
def headerMap = ['Set-Cookie' : 'Cookie']
//Specify the test  step name for which headers to be set. Change step name as needed.
//Add call to setHttpHeaders with different test step names as needed to apply for more steps
setHttpHeaders('UserDomainRequest', headerMap)


/**
  * method sets headers to targeted step
  * step is the step name for which headers to be set
  * header map consists key, header name in the current step and value, header name to appear in the 
  * targeted step
  * 
  **/
def setHttpHeaders(def step, def headerMap) {    
    def nextRequest = context.testCase.testSteps[step]?.httpRequest
    def existingHeaders = nextRequest?.requestHeaders
    headerMap.each {
        existingHeaders[it.value] = getHttpHeaderValue(it.key)
    }
    nextRequest?.requestHeaders = existingHeaders
}

/**
 * method to retrieve the value of the specified header
 **/
def getHttpHeaderValue(def headerToLookup) {    
    if (messageExchange.responseHeaders.containsKey(headerToLookup)) {
        log.info "Found ${headerToLookup} in the response headers"
        return messageExchange.responseHeaders[headerToLookup]
    } else {
        log.warn "${headerToLookup} is not found in the response headers"
    }
    null
}</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script 2" id="569fd924-71d5-488d-b496-98e2a569c260"><con:settings/><con:config><script>// This is the Script Assertion for extracted header check current step response
//log.info testRunner.testCase.getTestStepByName("Authentication 1").httpRequest.getResponse().getRequestHeaders()

    
  /* method sets headers to targeted step
  * step is the step name for which headers to be set
  **/
def setHttpHeaders(authTestStepName, addAuthToStep) {    
    def nextRequest = context.testCase.testSteps[addAuthToStep]?.httpRequest
    def existingHeaders = nextRequest?.requestHeaders
    existingHeaders['Cookie'] = getHttpHeaderValue(authTestStepName, 'Set-Cookie')
  
	def xsrfTokenSting = getHttpHeaderValue(authTestStepName, 'Set-Cookie').find{"XSRF-TOKEN.*;"}
     def matches = ( xsrfTokenSting  =~ /XSRF-TOKEN=(.+);.+/ )
     if (matches.find()) {
        	log.info "XSRF-TOKEN value found. Creating X-XSRF-TOKEN header entry"
        	existingHeaders["X-XSRF-TOKEN"] = [ matches.group(1) ]
       }
    nextRequest?.requestHeaders = existingHeaders
}    
 
// method to retrieve the value of the specified header
def getHttpHeaderValue(authTestStepName, headerToLookup) {    
	def authenticationResponse = testRunner.testCase.getTestStepByName(authTestStepName).httpRequest.getResponse()
    if (authenticationResponse.responseHeaders.containsKey(headerToLookup)) {
        log.info "Found ${headerToLookup} in the response headers" 
        return authenticationResponse.responseHeaders[headerToLookup]
    } else {
        log.warn "${headerToLookup} is not found in the response headers"
    }
    null
}
 
//Assert if response has headers
assert testRunner.testCase.getTestStepByName("Authentication").httpRequest.getResponse().getRequestHeaders(), "Response does not have any headers"

setHttpHeaders('Authentication', 'UserDomainRequest 2')
setHttpHeaders('Authentication', 'uploadPmode')
setHttpHeaders('Authentication', 'uploadPmode - default blue')
setHttpHeaders('Authentication', 'addPluginUserRequest')

log.info "END"


</script></con:config></con:testStep><con:testStep type="restrequest" name="UserDomainRequest" id="a99bc35c-4d4a-4040-a2ef-9675b4f9b1a9"><con:settings/><con:config service="http://${localUrl}" resourcePath="/rest/security/user/domain" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="UserDomainRequest" id="44cd08af-c459-40d4-9a2d-ca310c316ad1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="XSRF-TOKEN=6a53f207-3871-48e8-97ed-0489991133bc; Path=/domibus"/>
  <con:entry key="Cookie" value="JSESSIONID=EEDDA2F3A12B3288681DFA0C33DB055D; Path=/domibus; HttpOnly"/>
  <con:entry key="X-XSRF-TOKEN" value="8c1bbe64-5764-45c7-8fd8-af04a99ac613"/>
  <con:entry key="Content-Type" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request/><con:originalUri>http://localhost/domibus/rest/security/user/domain</con:originalUri><con:credentials><con:username>super</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="UserDomainRequest 2" id="06548bd8-9e42-4bce-b273-de947d768cfe"><con:settings/><con:config service="http://${localUrl}" methodName="Method 1" resourcePath="/rest/security/user/domain" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="UserDomainRequest 2" id="f9881054-65f7-46c4-8aad-6e1134de9021" mediaType="application/json"><con:settings><con:setting id="RecordRequestRepresentations">true</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="XSRF-TOKEN=6a53f207-3871-48e8-97ed-0489991133bc; Path=/domibus"/>
  &lt;con:entry key="Cookie" value="JSESSIONID=EEDDA2F3A12B3288681DFA0C33DB055D; Path=/domibus; HttpOnly"/>
  &lt;con:entry key="X-XSRF-TOKEN" value="6a53f207-3871-48e8-97ed-0489991133bc"/>
&lt;/xml-fragment></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}</con:endpoint><con:request/><con:originalUri>http://localhost/domibus/rest/security/user/domain</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Check OS type Windows Linux" id="f7f981de-0319-4c39-b1d5-e127bbb8d953"><con:settings/><con:config><script>/*import org.apache.commons.lang.SystemUtils


log.info SystemUtils.IS_OS_LINUX
log.info SystemUtils.IS_OS_WINDOWS
*/
log.info System.properties['os.name']

if (System.properties['os.name'].toLowerCase().contains('windows')) 
log.warn "Windows"</script></con:config></con:testStep><con:testStep type="restrequest" name="uploadPmode" id="e2c74b59-7ab3-4f4d-8283-fa331ab0137b"><con:settings/><con:config service="http://${localUrl}" resourcePath="/rest/pmode" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="uploadPmode" id="9fe84fe6-27d8-4034-af2b-0567c46ed541" mediaType="multipart/form-data" postQueryString="true"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="XSRF-TOKEN=6a53f207-3871-48e8-97ed-0489991133bc; Path=/domibus"/>
  &lt;con:entry key="Cookie" value="JSESSIONID=EEDDA2F3A12B3288681DFA0C33DB055D; Path=/domibus; HttpOnly"/>
  &lt;con:entry key="X-XSRF-TOKEN" value="6a53f207-3871-48e8-97ed-0489991133bc"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request/><con:originalUri>http://localhost/domibus/rest/pmode</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>domibus-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:size>29306</con:size><con:contentId>domibus-pmode-blue.xml</con:contentId><con:data>UEsDBBQACAgIABVtzk4AAAAAAAAAAAAAAAAWAAAAZG9taWJ1cy1wbW9kZS1ibHVlLnhtbO1dW3ebuBZ+nv4Kjt9tEMbXIZ2Vk7RrMnPSesXp6WMXBsVhldtwSZrz648EAgQIyTh2k8bkoeEi7a397U9Ce0tK9T9+uI70AMPI9r2zARgpAwl6pm/Z3vZs8OX243A++OP9O93aLE3fu7O3SWjEqKiEqnnR0tqcDe7jOFjKsuW79iaJRjCRKyUHUmCE8dPZYOMk8Nv2cfD+3W+6G5gR+p1eSJ7hwrOBBe+MxImvA3Mg/ZMYjn1nQ+tT+qrQYEYj34jsaOgH0Bv54VaGG9SQoRvhKzeSH8YjRfYi1IIQyqqizBRNzgWvLrBpxsaB1tkgDhM4kMir/DaEMfRwm79Z/qPn+IaFiyr0i8SjX00VZSC32vF1fTRLsOgD2zLOjPmt3ZpL3wXK4og2XX6+ThXsY9mUY5nYLHV8ZLOwgn3MAmq7XUDDhqGfNtv+uj4eA1PZ+1ikiSlYM2gT2tHhh4VU6hHGBJUzInz24NEcksrei2J7D3C3j/7RzEll72XOZG9z7kN4PP8Q6T/1C/TRT8KjGZQJ38cezpgmsMd+OJ6DMuH72LM349bwAXpHM4hIP1Yn0mUyi9PRtM/2YBStQt9Ev2A2tQt9J7vKLqvGX3l2bBuxH96gVwPpwUCTw+dabucyM8RZam9gFPieBQ+pNsxltqutWPvBDeKnQre0Y2OZtXS5AFnHs2w7Bzydcl9Zt08BeVJ5RNSkT/D9l9ArJCeht0wxWOJC0TI2l3CDzV2mxW1rGKMay8QL4daOYhhCi1jAVVFtfm6z3GhnJoPURrJxwIAYbAW+7cWFp4CijbTpaKKOVACWc2Wu5OGHHMHwwUYslN3ofiAZjuM/Xtwn3vc0nrkznAgOSGttC9MbdbtQIs1AyGdShtgqiWpcDaxK85vtziOdloYrI6DNRmA+PUbLse5nNP3x3o5frO2p8mfhbpjfX4gxqe5ntH2LZgceu+2ObxrOvR/Fx2h3qrdTu7NLMtToLgxIz0VXxBbfg4/G04GGVyTsKxIm15XEj/7hlCBhlJKN7eH8Rz6GJRjfg6hJRbUocZyDKUGiWi0596zVYQ0aGp41LC1D0wJCCT0IkSz6q5Td55T3Q3tre4azhvgjtyIvB9J3+FR/iaYtRmzEKTujOEQm4fnJP4kdFhMbmanjDsu4gaYd2KgP1HRUX+6tA99+teN7P4lxp6kpqb3la8m6LV8NR8eeCtYwJjqg6Vvwx6p8ng8hedEbeCfl163oytxKLW7nV2rDeLdajCpoFCutJMNaha5odH7CU15U7852yulJ+jD/4JCJ74Xv4bnyKns5kEwbQY3+WaIZVGRsYYNIkmu7MBtsY/gjllFHK5zC03Aex4Z576ZsLZQY1MO6pylFRhA4tpnmZOXAuqvpI2YStddZu8lDJMX4sbb/h15oynyhaVMt50Wpmw+JvGN5ysDyw0M3MP8CNXyjR9BMQrscbch93n3gJXRQhBc+na+1lY+QQJ0nSH+z3o2wR6TI3npGnITwGiLqIVBv1uff1n+eq5Np3ryaFs9f29tP/gfPLKVb/ic/vkcd8XmicY3PnkM1O3+yr8Sm2d/+vb7lwYLfH1Db1Zqr7Gp9WMu+rf6+WonMSwvtqFeXq6TTYRj64Z/og+ggdxMeVp4VEZ7rf6Cfo2kfvj2PsqAvgvlAkfePtDTikX33hFhvJSYMiz7OKIO6U5S4VBmL2PrRsB1kEVsSAfNfw6F0zGa3FilbnecquI0m32RpOMyc0URfN/D8Fg8nxBnFPbGouK8FqFL2Ac0Raa12mbhuWS29O9+GefXLL9dYgkT9tIsChZhzQOvfrbZa1la71x6Xtcfda3/0w0vf/et6rahKIYj59r9GGp4WCvDiRWcdY66OcUVHiNjgu2SdJFtYkKuc0PM4Kh9I0rs8yIBRvM6elO7ZWD+Wnh9kya5cUWyCcixqEaGKRKhCEWORiLFQhCYSoQlFTEQiJkIRM5GImVCEIpShzAjHuHLmIjHznD98OQuRnEXBQ5EooAjZplDCxPLE7AXlYiJPkJDDQExiIGQxENMYCHkMxEQGQiYDMZXBVChkKhYiJDOYkXVsnhQhl8Fc3BQhkcFCPNYJGawqYiFC2qo7jLriYVdtHSZM3/OgGdsPaG5J3tRTJ9AcwQSFjgbe+gKH+ZylzM/RMoaFkEw5zIsXLdCLitkExsQBWz57SW9yE01wbmY7bEiDbi/Af+C2QKRWWm2UVjmlx43SY05prVFa45SeNEpPOKVnjdIzTmmlWVzJy+curlWZN2rMywotdRaNOotKnZZqQGm6TNmpIsPXoFaRWa/pdcBzO2j6HfAcD5qeBzzXg6bvAc/5YNosP+WVb7of8OgCms4Hc175puPBgtfpmg5XFV75pp9Vbqdm9Op2/0bJxrXj6zwpRapUn5bjEDX06EakkWVKaMIAPz9/NEKI47disa7+Il1CDp/wJqbftd8vPn9a355/ukVRXZIlolD8HcNURzW9GqIh0djYThnOowD9pnw4kDzfu4FBYtkGVRtpC5ynlRHHMPRwe7KItF2q53OFksCZJxVhlOGiO3B7Qe96JAN2/TGViL9FXyjTiCCgxnEy8tfjDiMHqSxZ7iGo7pykrGzClidJ2MmwpgPZTqXypqyEsVTNzTVziZUonZlTMH03CPF+gkxSVKXHDpiqAkxVGlO1E6Y10pSQ0pm/1wxlJdOzA5ZjAZZjGsvxgfhZ5jpfM5QdWakJkNRoJLW+p++C6USA6YTGdMLCtNhd2gOKAZ1RE24WoDMa0FlP0l0wVWZ0XMJCVanAqvS47oTrnIrdWKjOaVDnfEzT/ew9rBjWBRXesmBd0LAuelh3negrdPzPnOorlbm+0kO7K7SAzpAwoa2GUYI4qjzr1OOb4qvSmSQmvpWQCghiqvLQ1Wnje0FlhjHWFLbMxHOOcC2P0weuJaiOU5B2TKczmaStxK5AELymB6xOma8UtBqd+WVCWwlmgSCaTQ979dCm0E7oJDkT2kpMC5hBbeNQWw9uCu6UXlFggjutgDvlg5sdgTu9nBaF6Ixec2EiWgltgSC0zQ7hnfiHa06vSzExrUS2QBDaknOApzwEUFPZBb2IxwS3Et8CQYD7tsHtuligKvSSJ3PppRLjqoIY9/Wg+1PQA/QCMBO9ShirCsJYFno/dTT9KaCp9Co4E7Tqcp8gNn1DlJOZq9I62f9U7mlY5Ruiip2xzY3RLgzKg33kWFl+Ns6mjze3HfEO6dPMLQeys2YX4lbUkeba4/pRW5lXiJwj5pYpzo7m2DFboRdWVNtWedw4SyvzStUtYBaqWKDLzFbgzpK3B13ytxpQDImK00+YBEyGqD1DToMh6r4MGfcMOQ2GjPdliMZlCDlH0zPk12eIti9DJm99DCn+xsPhvL+TXxt69/TsZF/Pzt66Z/u+39g91I0hSk+RE6FIZTNUO0myPeh1msy5LKmeQ30zZPlp34nDOJjaldXVvYtd3Tvu3ftS7qV2h3V1L1BOapD/xRxb2Z/W2bWnlUT81VxL74/rNjEDp5X7+9UcS2/M69pn+9H4FXq2sSWQ41Vmf31WJhb/EcIX9OqRHdbRGS1bCTt/GvmZz94je3mE3oHY8Yv2rDxj7w+2P+htix39MWX5o/dAVw/Qexs7eoCZfOs90NUD9F7Ijh5gJrZerQfqgL0eF9BbJzu6gJ986qfDLxvo0Ns2O25e4cc5b23l+RdzbGXHaEfHnlbOqaVMbYHnZdy/2+LT/iShN8Z2JAkzf/Vqv6yvdW5T2WXL84AuM/43IF2u//+R79/9H1BLBwgbGP+WEwsAAHpyAABQSwECFAAUAAgICAAVbc5OGxj/lhMLAAB6cgAAFgAAAAAAAAAAAAAAAAAAAAAAZG9taWJ1cy1wbW9kZS1ibHVlLnhtbFBLBQYAAAAAAQABAEQAAABXCwAAAAA=</con:data><con:id>3258e7d8-e61c-4678-8a2b-bd717bf47e68</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="file" value="file:domibus-pmode-blue.xml"/>
  <con:entry key="description" value="SoapUI sample test description for PMode upload. Used Pmode: "/>
</con:parameters><con:parameterOrder><con:entry>description</con:entry><con:entry>file</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="uploadPmode - default blue" id="546b3176-207f-4f3f-8c15-f64a4be4ec86"><con:settings/><con:config service="http://${localUrl}" resourcePath="/rest/pmode" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="uploadPmode - default blue" id="9fe84fe6-27d8-4034-af2b-0567c46ed541" mediaType="multipart/form-data" postQueryString="true"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="XSRF-TOKEN=6a53f207-3871-48e8-97ed-0489991133bc; Path=/domibus"/>
  &lt;con:entry key="Cookie" value="JSESSIONID=EEDDA2F3A12B3288681DFA0C33DB055D; Path=/domibus; HttpOnly"/>
  &lt;con:entry key="X-XSRF-TOKEN" value="6a53f207-3871-48e8-97ed-0489991133bc"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request/><con:originalUri>http://localhost/domibus/rest/pmode</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>domibus-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:contentId>domibus-pmode-blue.xml</con:contentId><con:url>${projectDir}/resources/PModesandKeystoresDefault/blue/domibus-pmode-blue.xml</con:url><con:id>a98b4227-7dec-4891-a708-a03cebbf824a</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="file" value="file:domibus-pmode-blue.xml"/>
  <con:entry key="description" value="SoapUI sample test description for PMode upload. Used Pmode: "/>
</con:parameters><con:parameterOrder><con:entry>description</con:entry><con:entry>file</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="addPluginUserRequest" id="656f762b-6dc7-46ce-9af1-3258751729f3"><con:settings/><con:config service="http://${localUrl}" resourcePath="/rest/plugin/users" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="addPluginUserRequest" id="8d49ecc8-e544-4792-8b4a-a9ab83c23e94" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="XSRF-TOKEN=6a53f207-3871-48e8-97ed-0489991133bc; Path=/domibus"/>
  &lt;con:entry key="Cookie" value="JSESSIONID=EEDDA2F3A12B3288681DFA0C33DB055D; Path=/domibus; HttpOnly"/>
  &lt;con:entry key="X-XSRF-TOKEN" value="6a53f207-3871-48e8-97ed-0489991133bc"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>{ "status": "NEW",
"userName": "${=request.getProperty('userPl').getValue()}",
"authenticationType": "BASIC", 
"authRoles": "${=request.getProperty('userRole').getValue()}", 
"password": "${=request.getProperty('passwordPl').getValue()}", 
"active": "true" }</con:request><con:originalUri>http://localhost/domibus/rest/plugin/users</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="passwordPl" value="Domibus-123"/>
  <con:entry key="userPl" value="pluginAdmin"/>
  <con:entry key="userRole" value="ADMIN_ROLE"/>
</con:parameters><con:parameterOrder><con:entry>passwordPl</con:entry><con:entry>userPl</con:entry><con:entry>userRole</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="13f5a92c-be5e-4ee4-948e-31fb006cbb37" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Pmode Update" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Default Pmodes upload step for reuse" id="5a600d69-75e9-4470-ac29-31826841d259"><con:settings/><con:config><script>import java.nio.file.Paths
def suffix =  "_SoapuiStringReplace"
def joinedPath = Paths.get(context.expand('${#Project#defaultPModesPath}'),"/blue/domibus-pmode-blue.xml").toUri()
Domibus.updatePmodeEndpoints(log, context, testRunner, joinedPath, suffix) 
Domibus.uploadPmode("sender","default","/blue/domibus-pmode-blue.xml" + suffix, context, log)

joinedPath = Paths.get(context.expand('${#Project#defaultPModesPath}'),"/red/domibus-pmode-red.xml").toUri()
Domibus.updatePmodeEndpoints(log, context, testRunner, joinedPath, suffix) 
Domibus.uploadPmode("receiver","default","/red/domibus-pmode-red.xml" + suffix, context, log)</script></con:config></con:testStep><con:testStep type="groovy" name="Default blue Pmodes upload step for reuse" id="eb76a45b-2107-4ce9-8054-0898fa3994b6"><con:settings/><con:config><script>import java.nio.file.Paths
def suffix =  "_SoapuiStringReplace"
def joinedPath = Paths.get(context.expand('${#Project#defaultPModesPath}'),"/blue/domibus-pmode-blue.xml").toUri()
Domibus.updatePmodeEndpoints(log, context, testRunner, joinedPath, suffix) 
Domibus.uploadPmode("sender","default","/blue/domibus-pmode-blue.xml" + suffix, context, log)</script></con:config></con:testStep><con:testStep type="groovy" name="Sample Pmode upload" id="2374d3cc-57ec-4bb3-b3c6-a2ab0b1cea95" disabled="true"><con:settings/><con:config><script>import java.nio.file.Paths
def suffix =  "_SoapuiStringReplace"
def joinedPath = Paths.get(context.expand('${#Project#defaultPModesPath}'),"\\blue\\domibus-pmode-blue.xml").toUri()
Domibus.updatePmodeEndpoints(log, context, testRunner, joinedPath, suffix) 
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml" + suffix, context, log)

joinedPath = Paths.get(context.expand('${#Project#defaultPModesPath}'),"\\red\\domibus-pmode-red.xml").toUri()
Domibus.updatePmodeEndpoints(log, context, testRunner, joinedPath, suffix) 
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml" + suffix, context, log)</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="7b67cf62-31d1-4dfa-9e89-4dd8ef4a8106" failOnError="true" failTestCaseOnErrors="true" keepSession="true" maxResults="0" name="Change property at runtime" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="restrequest" name="Authentication" id="58cf4daf-49a2-4fa9-b05e-2ebef87ee2e8"><con:settings/><con:config service="http://${localUrl}" resourcePath="/rest/security/authentication" methodName="Authentication 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Authentication" id="c0cd0de1-98d1-4b07-89a7-4495c89e24cc" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>{"username":"admin","password":"123456"}</con:request><con:originalUri>http://localhost/domibus/domibus/rest/security/authentication</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6cbbf1cd-ec7a-4756-bef6-91e6f7cc133a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Transfer cookies" id="f002dd92-c3ff-4aee-a9b6-e80a451dc589"><con:settings/><con:config><script>// This is the Script Assertion for extracted header check current step response
//log.info testRunner.testCase.getTestStepByName("Authentication 1").httpRequest.getResponse().getRequestHeaders()

    
  /* method sets headers to targeted step
  * step is the step name for which headers to be set
  **/
def setHttpHeaders(authTestStepName, addAuthToStep) {    
    def nextRequest = context.testCase.testSteps[addAuthToStep]?.httpRequest
    def existingHeaders = nextRequest?.requestHeaders
    existingHeaders['Cookie'] = getHttpHeaderValue(authTestStepName, 'Set-Cookie')
  
	def xsrfTokenSting = getHttpHeaderValue(authTestStepName, 'Set-Cookie').find{"XSRF-TOKEN.*;"}
     def matches = ( xsrfTokenSting  =~ /XSRF-TOKEN=(.+);.+/ )
     if (matches.find()) {
        	log.info "XSRF-TOKEN value found. Creating X-XSRF-TOKEN header entry"
        	existingHeaders["X-XSRF-TOKEN"] = [ matches.group(1) ]
       }
    nextRequest?.requestHeaders = existingHeaders
}    
 
// method to retrieve the value of the specified header
def getHttpHeaderValue(authTestStepName, headerToLookup) {    
	def authenticationResponse = testRunner.testCase.getTestStepByName(authTestStepName).httpRequest.getResponse()
    if (authenticationResponse.responseHeaders.containsKey(headerToLookup)) {
        log.info "Found ${headerToLookup} in the response headers" 
        return authenticationResponse.responseHeaders[headerToLookup]
    } else {
        log.warn "${headerToLookup} is not found in the response headers"
    }
    null
}
 
//Assert if response has headers
assert testRunner.testCase.getTestStepByName("Authentication").httpRequest.getResponse().getRequestHeaders(), "Response does not have any headers"

//setHttpHeaders('Authentication', 'UserDomainRequest 2')
setHttpHeaders('Authentication', 'Change property')


log.info "END"


</script></con:config></con:testStep><con:testStep type="restrequest" name="Change property" id="cf31eeb7-17c8-45e4-9484-5b182538dcc6"><con:settings/><con:config service="http://${localUrl}" resourcePath="/rest/configuration/properties/{propName}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Change property" id="cdb83ed7-cbca-4d93-b6f2-f64dd386d908" mediaType="text/xml" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="XSRF-TOKEN=aa719082-fee9-427e-a7b2-b0d24f71bc0b; Path=/domibus"/>
  &lt;con:entry key="Cookie" value="JSESSIONID=7625DA59E79BEBBBDCFC3892C7CCE14E; Path=/domibus; HttpOnly"/>
  &lt;con:entry key="X-XSRF-TOKEN" value="aa719082-fee9-427e-a7b2-b0d24f71bc0b"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#localUrl}</con:endpoint><con:request>sjkldjklsjkljsklj s</con:request><con:originalUri>http://localhost/domibus/rest/configuration/properties/</con:originalUri><con:credentials><con:username>${#Project#defaultAdminUsername}</con:username><con:password>123456</con:password><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="propName" value="${#TestCase#propName}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="One line property change" id="1beeedf4-f843-4c81-9261-76db9113a725"><con:settings/><con:config><script>Domibus.changePropertyAtRuntime("C2", "domibus.UI.title.name", "New grzegorz zmienia value", context, log)
</script></con:config></con:testStep><con:properties><con:property><con:name>propName</con:name><con:value>domibus.UI.title.name</con:value></con:property></con:properties></con:testCase><con:testCase id="6940e747-77a7-4e00-9ea7-2833f8d5933b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Log check playground" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script" id="cdb55f09-db0a-4fce-8064-091b75f23019" disabled="true"><con:settings/><con:config><script>pathBlue = context.expand('${#Project#pathBlue}') + "logs/"
pathRed = context.expand('${#Project#pathRed}') + "logs/"
logFileToCheck = "domibus.log"

pathToLogFile = pathBlue + lo	gFileToCheck
log.info pathToLogFile



       // Check file exists
        def testFile = new File(pathToLogFile)
        if (!testFile.exists()) {
            testRunner.fail("File [${pathToLogFile}] does not exist. Can't check logs.")
            return null
        } else log.info "  changeDomibusProperties  [][]  File [${pathToLogFile}] exists."

        def fileContent = testFile.text
        //run in loop for all properties key values pairs
        for(item in propValueDict){
            def propertyToChangeName = item.key
            def newValueToAssign = item.value

            // Check that property exist in config file
            def found = 0
            def foundInCommentedRow = 0
            testFile.eachLine{
                line, n ->
                n++
                if(line =~ /^\s*$ { propertyToChangeName }
                   = /) {
                    log.info "  changeDomibusProperties  [][]  In line $n searched property was found. Line value is: $line"
                    found++
                }
                if(line =~ ~/#+\s*$ { propertyToChangeName }
                   = .*/) {
                    log.info "  changeDomibusProperties  [][]  In line $n commented searched property was found. Line value is: $line"
                    foundInCommentedRow++
                }
            }

            if (found > 1) {
                testRunner.fail("The search string ($propertyToChangeName=) was found ${found} times in file [${pathToPropertyFile}]. Expect only one assigment - check if configuration file is not corrupted.")
                return null
            }
            // If property is present in file change it value
            if(found)
            fileContent = fileContent.replaceAll(/(?m)^\s*($ { propertyToChangeName }
                                                           = )(.*)/) { all, paramName, value -> "${paramName}${newValueToAssign}" } else
            if(foundInCommentedRow)
            fileContent = fileContent.replaceFirst(/(?m)^#+\s*($ { propertyToChangeName }
                                                               = )(.*)/) { all, paramName, value -> "${paramName}${newValueToAssign}" } else {
                testRunner.fail("The search string ($propertyToChangeName) was not found in file [${pathToPropertyFile}]. No changes would be applied - properties file restored.")
                return null
            }
            log.info "  changeDomibusProperties  [][]  In [${pathToPropertyFile}] file property ${propertyToChangeName} was changed to value ${newValueToAssign}"
        } //loop end

        // Store new content of properties file after all changes
        testFile.text=fileContent
        log.info "  changeDomibusProperties  [][]  Property file [${pathToPropertyFile}] amended"
    }</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="dff5811e-08f4-4aa8-a138-15e9c25becf8" name="WS-Auto-for-Bamboo"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom000-SMOKE TEST-System Clean and Setup" searchProperties="true" id="41c40f8a-59eb-41cd-9861-597144284766">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Clean All" id="4758f5c9-17c6-49a5-b069-03750f2cfa93"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDatabaseAll();
test.finalize();
</script></con:config></con:testStep><con:testStep type="groovy" name="Update multitenancyMode counters" id="c01e9863-ff80-4986-8056-5da59ba4d756"><con:settings/><con:config><script>/**
 * Update number of additional domains base on allDomainProperties dictionary
 */
def test = new Domibus(log,null,context);
test.updateNumberOfDomain()
test.finalize();

log.info "Aftter update the multitenancyModeC2 value is: " + context.expand("\${#Project#multitenancyModeC2}")
log.info "Aftter update the multitenancyModeC3 value is: " +  context.expand("\${#Project#multitenancyModeC3}") 
</script></con:config></con:testStep><con:testStep type="groovy" name="Update unsecure login allowed properties" id="e597ea2c-26b9-466b-9974-14d95a762a02"><con:settings/><con:config><script>
def multiC2 = context.expand("\${#Project#multitenancyModeC2}") as Integer
def multiC3 = context.expand("\${#Project#multitenancyModeC3}") as Integer
def project = context.testCase.testSuite.project

if (multiC2 > 0) {
	log.warn "Unsecure login allowed properties should be set to false for C2"
	project.setPropertyValue("unsecureLoginAllowedC2", "false")
}
if (multiC3 > 0) {
	log.warn "Unsecure login allowed properties should be set to false for C3"
	project.setPropertyValue("unsecureLoginAllowedC3", "false")
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Add plugin users if needed" id="651bcf65-06df-41d0-ac8f-d0433ba3718d"><con:settings/><con:config><script>
def unsecureC2 = context.expand("\${#Project#unsecureLoginAllowedC2}") 
def unsecureC3 = context.expand("\${#Project#unsecureLoginAllowedC3}")

if ( "false".equals(unsecureC2)  || "0".equals(unsecureC2) ) {
	def user = context.expand("\${#Project#adminC1Default}") 
	def passw = context.expand("\${#Project#adminDefaultPassword}")
	
	log.warn "Unsecure for C2: " + unsecureC2
	Domibus.addPluginUser("C2", context, log, "Default", "ROLE_ADMIN", user, passw, null)
}

if ( "false".equals(unsecureC3)  || "0".equals(unsecureC3) ) {
	def user = context.expand("\${#Project#adminC4Default}") 
	def passw = context.expand("\${#Project#adminDefaultPassword}")
		
	log.warn "Unsecure for C3: " + unsecureC3
	Domibus.addPluginUser("C3", context,log, "Default", "ROLE_ADMIN", user, passw, null)
}</script></con:config></con:testStep><con:testStep type="groovy" name="Add authentication if needed" id="ef26f643-9f77-4217-8796-0125a68d1e6c"><con:settings/><con:config><script>def filterForTestSuite = context.testCase.testSuite.name

def unsecureC2 = context.expand("\${#Project#unsecureLoginAllowedC2}") 
def unsecureC3 = context.expand("\${#Project#unsecureLoginAllowedC3}")

if ( "false".equals(unsecureC2)  || "0".equals(unsecureC2) ) {
	log.warn "Unsecure for C2: " + unsecureC2
	Domibus.enableAuthenticationForTestSuite(filterForTestSuite, context, log, "Basic", com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("Preemptive"), /localUrl/)
} else { 
	Domibus.disableAuthenticationForTestSuite(filterForTestSuite, context, log, "Basic", com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("No Authorization"), /localUrl/)
}

if ( "false".equals(unsecureC3)  || "0".equals(unsecureC3) ) {
	log.warn "Unsecure for C3: " + unsecureC3
	Domibus.enableAuthenticationForTestSuite(filterForTestSuite, context, log, "Basic", com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("Preemptive"), /remoteUrl/)
} else { 
	Domibus.disableAuthenticationForTestSuite(filterForTestSuite, context, log, "Basic", com.eviware.soapui.config.CredentialsConfig.AuthType.Enum.forString("No Authorization"), /remoteUrl/)
}

</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)
Domibus.checkSmokeTestsResult(testRunner, testCase, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom000-SMOKE TEST-Simple two direction push communication" searchProperties="true" id="106deb9c-305c-413c-a73a-1569349e9464" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="c0dda6ba-dc5a-404e-8007-a5e9193e9776" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ba9f0981-f8e0-4586-aaeb-32cb59232420" name="Submit Message in revers direction"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message in revers direction" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:setupScript>Domibus.checkIfAnySmokeTestsFailed(testRunner, testCase, log)</con:setupScript><con:tearDownScript>Domibus.checkSmokeTestsResult(testRunner, testCase, log)

//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="1a9df7f4-3b52-476e-81b3-82138e78e1ac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom484-Check Pmode roles" searchProperties="true"><con:settings/><con:testStep type="request" id="2429cd4c-a45b-4581-9893-df630545c771" name="Submit Message - different roles"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message - different roles" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom484-1-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>urn:fdc:peppol.eu:2017:roles:ap:sender</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>urn:fdc:peppol.eu:2017:roles:ap:receiver</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc27">bdx:noprocess</ns:Service>
               <ns:Action>TC27Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" id="b671260f-fdb0-46d7-bbcf-0201949aea81"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="a7138608-4c62-4669-9ecf-4ad8ee090ec4" name="retrieveMessage - check roles on Receiver side"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage - check roles on Receiver side" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message - different roles#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="61c66ad0-b9c8-4f80-b6d9-c5887bd32a27" name="Peppol Receiver Role"><con:configuration><path>declare namespace ns5='http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/';

//ns5:To/ns5:Role</path><content>urn:fdc:peppol.eu:2017:roles:ap:receiver</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="97583343-ee3a-43e9-97f1-63f9d69f7589" name="Peppol Sender Role"><con:configuration><path>declare namespace ns5='http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/';
//ns5:From/ns5:Role</path><content>urn:fdc:peppol.eu:2017:roles:ap:sender</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:setupScript>Domibus.checkIfAnySmokeTestsFailed(testRunner, testCase, log)
</con:setupScript><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom484-");
test.finalize();</con:tearDownScript><con:properties/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom137-EDELIVERY-3908,EDELIVERY-2886-Push-weblogic-tomcat-getStatus request with spaces at the begin and end of messageId" searchProperties="true" id="f0fcd008-2e05-489b-a37a-503baf27ea4a" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="7875aa33-4eed-485b-bd6d-af30cd6c1262" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
             <ns:MessageInfo>
               <ns:MessageId>-Dom137--</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fb01dd5e-c05c-47f8-a5e2-bd960bcad8a8" name="getStatus - sender without extra spaces"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - sender without extra spaces" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>ACKNOWLEDGED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b57854aa-4269-4f83-8eb4-af46e2e0bd6a" name="getStatus - sender spaces at the beginning of messageId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - sender spaces at the beginning of messageId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>   ${Submit Message#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>ACKNOWLEDGED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a3c7163d-6b7d-4d58-9efb-f48f6e44fcf8" name="getStatus - sender spaces at the end of messageId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - sender spaces at the end of messageId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message#Response#//messageID}    </messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>ACKNOWLEDGED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c8223b21-7933-4baf-b277-0208ad80a996" name="getStatus - receiver without extra spaces"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - receiver without extra spaces" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>RECEIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="24feb368-4096-46dd-a589-d279b68465f0" name="getStatus - receiver spaces at the beginning of messageId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - receiver spaces at the beginning of messageId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>   ${Submit Message#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>RECEIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f6e57358-59f2-45a8-8d62-5bc8f080fd17" name="getStatus - receiver spaces at the end of messageId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - receiver spaces at the end of messageId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message#Response#//messageID}       </messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>RECEIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith('-Dom137-')
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:setupScript>Domibus.initSmokeTestsResult(testSuite, log)

def unsecureLoginAllowed = context.expand('${#Project#unsecureLoginAllowedC2}')
def authTestCasesList = ["Dom116-Push-Authentication-Basic Flow", "Dom117-Push-Authentication-Not Authorized", 
									  "Dom166-Push-Authentication-Submit Message", "Dom167-Push-Authentication-getStatus on Sender", 
									  "Dom168-Push-Authentication-getStatus on Receiver", "Dom169-Push-Authentication-list pending messages", 
									  "Dom170-Push-Authentication-Retreive Message", "Dom416-Pull-Authentication-Basic Flow", 
									  "Dom417-Pull-Authentication-Not Authorized"
									   ]
	
if (unsecureLoginAllowed == "true" || unsecureLoginAllowed == "1" || unsecureLoginAllowed == "y" || unsecureLoginAllowed == "yes") {
	log.info "As project property unsecureLoginAllowedC2 value is: " + unsecureLoginAllowed + " try to disable test cases for authentication: ${authTestCasesList}"
	authTestCasesList.each { tcName ->
		def tcList = testSuite.testCaseList.findAll {it.label =~ /${tcName}/ }
		if (tcList.size() == 0) 	log.warn "Incorrect name of test case for disabling: ${tcName}"
		else {	
			tcList.each { tc -> 
				if (!tc.isDisabled()) {
					log.warn "Disabling test case as includs authentication check: ${tc.name} "
					tc.setDisabled(true)
				} else {
					log.info "Test case already disabled: ${tc.name} "
				}
				
			}
		}
	}
}</con:setupScript><con:tearDownScript>def authTestCasesList = ["Dom116-Push-Authentication-Basic Flow", "Dom117-Push-Authentication-Not Authorized", 
									  "Dom166-Push-Authentication-Submit Message", "Dom167-Push-Authentication-getStatus on Sender", 
									  "Dom168-Push-Authentication-getStatus on Receiver", "Dom169-Push-Authentication-list pending messages", 
									  "Dom170-Push-Authentication-Retreive Message", "Dom416-Pull-Authentication-Basic Flow", 
									  "Dom417-Pull-Authentication-Not Authorized"
									   ]
	
authTestCasesList.each { tcName ->
		def tcList = testSuite.testCaseList.findAll {it.label =~ /${tcName}/ }
		if (tcList.size() == 0) 	log.error "Incorrect name of test case for enabling: ${tcName}"
		else {	
			tcList.each { tc -> 
				if (tc.isDisabled()) {
					log.warn "Enable back test case as includs authentication check: ${tc.name} "
					tc.setDisabled(false)
				}
			}
		}
	}
</con:tearDownScript></con:testSuite><con:testSuite id="846b6795-5a70-4007-9b06-b1e3387e1d06" name="WS-Auto-Not-for-Bamboo"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder"/></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom020&amp;Dom035-Push-Submit message-Exceptional flow-Data-From/PartyId-Maximum length" searchProperties="true" id="3f8285a6-23d1-4004-9aaa-56cfeeeca744">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PMode Blue PartyId Max Length" id="edd1d360-0a2b-4650-8b9b-9e520f4d131c"><con:settings/><con:config><script>// Upload PMode: PartyId value > Max allowed length (255)  
Domibus.uploadPmode("sender","special","\\maxLength\\pmode-blue-PartyId-MaxLength.xml",context,log,"default","Failed to upload the PMode");
</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom025&amp;Dom040-Push-Submit message-Exceptional flow-Data-From/Role-Maximum Length" searchProperties="true" id="a389d533-919a-49d3-a82d-ba777882de15">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PMode Blue Role Max Length" id="c17a2fb6-8b43-4cb9-8625-8c706f33908d"><con:settings/><con:config><script>// Upload PMode: Role value > Max allowed length (255)
Domibus.uploadPmode("sender","special","\\maxLength\\pmode-blue-Role-MaxLength.xml",context,log,"default","Failed to upload the PMode");
</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom029&amp;Dom044-Push-Submit message-Exceptional flow-Data-From/PartyId:Type-Maximum Length" searchProperties="true" id="52d0f553-51c1-4a03-811d-44d6c572735c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PMode Blue PartyId Type Max Length" id="80248225-be17-45a0-80a1-e024e2e20ccb"><con:settings/><con:config><script>// Upload PMode: PartyId Type value > Max allowed length (255)
Domibus.uploadPmode("sender","special","\\maxLength\\pmode-blue-PartyIdType-MaxLength.xml",context,log,"default","Failed to upload the PMode");
</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom053-Push-Submit message-Exceptional flow-Data-Service-Maximum length" searchProperties="true" id="f961d875-7940-42f1-b645-534cebcc136c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PMode Blue Service Max Length" id="e6053b23-dae8-4ce0-9fed-6e930a48eb99"><con:settings/><con:config><script>// Upload PMode: Service value > Max allowed length (255) 
Domibus.uploadPmode("sender","special","\\maxLength\\pmode-blue-Service-MaxLength.xml",context,log,"default","Failed to upload the PMode");
</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ba9db319-b7cc-4f30-9a2f-3d112806acad</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom058-Push-Submit message-Exceptional flow-Data-Action-Maximum length" searchProperties="true" id="e8fca0c3-68e3-452c-86a8-4976c0924fc0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PMode Blue Action Max Length" id="5cc9bb10-dbf5-4d54-9efe-920847929274"><con:settings/><con:config><script>// Upload PMode: Action value > Max allowed length (255)
Domibus.uploadPmode("sender","special","\\maxLength\\pmode-blue-Action-Maxlength.xml",context,log,"default","Failed to upload the PMode");
</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom078-Push-Submit message-Exceptional flow-Data-PartInfo:href-Maximum length" searchProperties="true" id="8d455f7a-fd35-4a18-aea5-d014ecd242de">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PMode Blue PartInfo href Max Length" id="31a9aa89-7c8b-4cd7-a64a-e5c9879807e2"><con:settings/><con:config><script>// Upload PMode: PartInfo/href value > Max allowed length (255)
Domibus.uploadPmode("sender","special","\\maxLength\\pmode-blue-PartInfohref-Maxlength.xml",context,log,"default","Failed to upload the PMode");
</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom082-Push-Submit message-Exceptional flow-Data-Property(MimeType)-Maximum length" searchProperties="true" id="3873d238-c4e4-44a2-90ab-f94256a29747">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PMode Blue MimeType Max Length" id="9bc29708-32e7-41c2-af79-8cfabd779025"><con:settings/><con:config><script>// Upload PMode: MimeType value > Max allowed length (255)  
Domibus.uploadPmode("sender","special","\\maxLength\\pmode-blue-MimeType-Maxlength.xml",context,log,"default","Failed to upload the PMode");
</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom104-Push-Test Experience-Truststore Update" searchProperties="true" id="2701f790-fbcb-45e3-9303-6f81d3ed8e11">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload unsuitable truststore Blue" id="3617c20c-d349-4f4f-8046-f469de84f19b"><con:settings/><con:config><script>// Upload unsuitable truststore to blue.  
Domibus.uploadTruststore("sender","special","/DynamicDiscovery/C2/oasis/gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="5e59ddaf-2686-4be8-a99f-e7df029a7531"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="17d0ba65-4f5f-4342-8633-ae723a37951d" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom104-1-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="f3348388-86cb-4ed4-89f3-f9cce5044e85"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="365defe9-ca8a-44b0-92c7-6ac031a91e7c"/><con:assertion type="XPath Match" name="XPath Match" id="e732d14e-6a50-4177-88b8-bcf61919cd6a"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="326d4819-a043-4395-a428-c1b75a3e7711"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="8dca676c-4536-4d5c-83f9-cb7a509753b1"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Restore Truststore" id="311ac20a-6804-4bab-831d-89c74c41680e"><con:settings/><con:config><script>// Upload default truststore for blue.  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="9f48d9f1-3dbb-4237-9d9d-4edb0efe2ae2"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="9e524e6f-298d-4f23-a29a-3e34e64ada3f" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom104-2-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2316951c-1fc3-45a0-87f8-c5e3711aa367"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="83bab5a4-190e-407b-8241-c7cbfe12deb9"/><con:assertion type="XPath Match" name="XPath Match" id="03661025-014e-4199-94ae-ba10dbdbbb8f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bd5ddcd7-0e1c-4429-9c84-ebe98542eac8"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:setupScript>Domibus.checkIfAnySmokeTestsFailed(testRunner, testCase, log)</con:setupScript><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom104");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>906220c2-8277-4fcb-a3bd-f15306888b25</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53c0a958-b619-493b-b45b-7b9d7ecf4e43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e138bc36-5999-4555-b848-c445b16888f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e463ae55-976e-4821-ba44-7ac3ab41c5e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72a27452-cd8c-4971-8adc-00af35c941f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>af041385-12f1-4709-a09d-189cb32e5fbd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b4dd5a76-3e3a-4c77-812b-72385f03e7d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c900b357-a318-4d50-af49-a18a044c70e6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom119-Push-3 Domibus Senario-Basic Flow" searchProperties="true" id="3fb2bfd3-031f-4508-a66d-2487bfa2d85c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="INFO" id="29d100f4-56ff-49a2-a801-67fabff6acba"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"3 Domibus are needed for this scenario:\nDefault used \"blue\" and \"red\" + 3rd \"green\" gateway."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to true" id="baee2661-68e5-4296-b1c7-98b6a1cd70fa"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set true'].run( testRunner, context );
</script></con:config></con:testStep><con:testStep type="groovy" name="Start 3 gateways configuration" id="30034bf2-7925-40ee-991d-67e6e87c77ad" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Start 3 gateways configuration"].run(new com.eviware.soapui.support.types.StringToObjectMap(), false);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="288f12c0-2c68-4a8f-a3c4-83d47c10a8bc"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="7a7684c8-e628-4ec7-9234-8f7ebabdfddc" name="Blue To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom119-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4ae20567-52e1-45f0-948f-807c95ec9254"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="fb4670e2-abf7-431e-a0c4-b660999ef319"/><con:assertion type="XPath Match" name="XPath Match" id="fec8eb4d-7098-4de6-9c09-8327be97bb69"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f1dbebb8-32bf-498a-b0c9-e1c89d3b5236"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="dfe3914e-2234-4951-b387-7017f5fcf6a9"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="fa0a841e-2265-435f-be77-3765535781a2" name="Green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom119-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="54bda985-0895-41db-a5fc-634869f3f72a"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="892e2416-442c-4bcd-a010-92c425c2d847"/><con:assertion type="XPath Match" name="XPath Match" id="a1d9c4b1-65c0-41ac-b4f9-c472f01bcdf7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bf99fbc4-0be7-49c2-97bc-65568347ec9a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="0068e24e-88de-49fd-93cc-3464f11b3150"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="fa66b131-4347-48d8-9f80-3bd0b28ac2e5" name="Red To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Red To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom119-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4749d8dd-ea46-495d-b2c5-814ee9a937a5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="40c518cf-6fc3-4879-bc0c-408d3ac4a829"/><con:assertion type="XPath Match" name="XPath Match" id="fc4d687f-6ac6-4a31-a524-09109351ffbd"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a0e0c038-6c4a-4c7a-afbb-ec83de431613"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="d9851130-91c4-4c15-8535-c1cbd6200bc6"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="8b091d15-2620-481e-8ee9-db20a4d266bf" name="Green To Red"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Red" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom119-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="30be048e-9831-40ed-89d4-878a62f0128e"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="f27080c7-616e-4bc0-8fd0-5e7877c10b44"/><con:assertion type="XPath Match" name="XPath Match" id="b63266bb-b4e8-408e-bd5c-58cf80540efb"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="33c710a3-1dad-4e96-a696-1fbf2f4ea6c8"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D5" id="10abca04-4f72-4050-b313-cad68fa40f49"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Retention undownloaded" id="74982ee2-24c4-4c57-8ea9-7419f92cdcf1"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check the retention undownloaded time for the 4 submitted messages. Should be:\n- 4 for -Dom119-1- (green) and -Dom119-2- (blue) \n- 6 for -Dom119-3- (green) and -Dom119-4- (red)"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:setupScript>
</con:setupScript><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom119");
test.finalize();
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set false'].run( testRunner, context );
</con:tearDownScript><con:properties><con:property><con:name>jdbcUrlRed</con:name><con:value>jdbc:mysql://localhost:3306/domibus_green</con:value></con:property></con:properties>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bb3d553b-d22d-4249-82e1-f37fadcf9c22</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>00d86b48-a47d-4286-9c5b-81c48da574c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53adabc6-fd35-4f98-b1b9-bddc27a17351</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07530a3a-7c6c-4895-b49a-ab0ef0c0c905</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd43ea83-e069-45ee-bf9a-189744ff071a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4c6c19d0-b2d6-4c43-ad4e-b2d3ae19c582</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9cf85c52-32c7-466f-ba8b-52b4e0260763</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom120-Push-3 Domibus Senario-Retention downloaded" searchProperties="true" id="3cbbfe49-42bb-4b2e-af45-2ea3edfbf7d2">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="INFO" id="e6710e71-1e57-4c30-bed9-fed3b2d9b4f5"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"3 Domibus are needed for this scenario:\nDefault used \"blue\" and \"red\" + 3rd \"green\" gateway."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to true" id="8185953b-99a7-4516-b8da-cd368b6b5135"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set true'].run( testRunner, context );</script></con:config></con:testStep><con:testStep type="groovy" name="Start 3 gateways configuration" id="ea4bbbfe-6488-4a5e-992f-fb5a9b1af698" disabled="true"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Start 3 gateways configuration"].run(new com.eviware.soapui.support.types.StringToObjectMap(), false);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="28c4ce8d-df77-40e3-a2f0-234ecf8e84a5"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="92fa63e4-73c3-4139-8d48-eca5f96cc215" name="Blue To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom120-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4ae20567-52e1-45f0-948f-807c95ec9254"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="fb4670e2-abf7-431e-a0c4-b660999ef319"/><con:assertion type="XPath Match" name="XPath Match" id="fec8eb4d-7098-4de6-9c09-8327be97bb69"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f1dbebb8-32bf-498a-b0c9-e1c89d3b5236"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="f616c2d0-39cd-4638-82d0-9b247b61a4dd"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="ed83e6e4-df54-4dfb-8cbc-beaf66a79d34" name="Green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom120-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="54bda985-0895-41db-a5fc-634869f3f72a"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="892e2416-442c-4bcd-a010-92c425c2d847"/><con:assertion type="XPath Match" name="XPath Match" id="a1d9c4b1-65c0-41ac-b4f9-c472f01bcdf7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bf99fbc4-0be7-49c2-97bc-65568347ec9a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="8c864263-4979-4992-8ea7-0f7e9fa9c400"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="60a83d36-cda4-42a9-9603-1af9325e66fc" name="Red To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Red To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom120-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4749d8dd-ea46-495d-b2c5-814ee9a937a5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="40c518cf-6fc3-4879-bc0c-408d3ac4a829"/><con:assertion type="XPath Match" name="XPath Match" id="fc4d687f-6ac6-4a31-a524-09109351ffbd"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a0e0c038-6c4a-4c7a-afbb-ec83de431613"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="7392463b-edbe-40ac-804b-15321b8e5f83"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="570be429-4bda-43e2-acd0-ee984fd96f2f" name="Green To Red"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Red" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom120-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="30be048e-9831-40ed-89d4-878a62f0128e"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="f27080c7-616e-4bc0-8fd0-5e7877c10b44"/><con:assertion type="XPath Match" name="XPath Match" id="b63266bb-b4e8-408e-bd5c-58cf80540efb"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="33c710a3-1dad-4e96-a696-1fbf2f4ea6c8"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D5" id="aa71fc2a-d4c4-48ce-8e4b-99d6a1b28836"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="cc304216-7a8c-4cc4-95d8-33a66967e25f" name="retrieveMessage Blue To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage Blue To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Blue To Green#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="8dc73b0b-c319-44a2-8bf0-fc2bd9a1c3a5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="96fd54bb-b6d0-4b0b-b206-f2bac4fff730"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="14a069d1-1942-45ff-ac6f-c01aad26c404"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d5c880e0-f3d2-4ca8-bc7e-affbbfe2274d"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D6" id="90987d36-c9a6-461b-afc8-8e3a85decefd"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="a568268c-2fe0-495d-a521-216eba9d7cbb" name="retrieveMessage Green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage Green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Green To Blue#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="0fe380f9-c1df-4b85-a454-90ca1ca59783"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5f852756-eb5e-43cb-bea5-583815bc63a6"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="7797fcbd-a9fa-4d8a-80ac-7aa97d0f6b19"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d7a22133-7704-4d84-9da5-3327e914ce56"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D7" id="91cb3226-e8e7-4d2a-8953-7d46b02c09c0"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="c9bb1110-b277-40c4-bfa7-cc10cb1ce2fb" name="retrieveMessage Red To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage Red To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Red To Green#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ae1d3a9b-c0a8-4f64-bff4-fe6badb66861"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="6ba6cd6f-b4f6-4723-aaf9-55715a3f5fd3"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="aa2294b8-4d68-42a6-aeb1-740de3468a37"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="bef3e157-9803-4776-8672-146c4ac2ad48"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D8" id="cb23fe98-4879-4da1-a659-e99ce4b152c0"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="072b7cd7-975c-421c-8ec7-e3128f455d2a" name="retrieveMessage Green To Red"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage Green To Red" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Green To Red#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="90565203-ed24-4add-a484-ac3d9d684944"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="f66997b6-3a5b-41f7-bc26-caab07272e77"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="e8220d9c-0499-4253-afc5-d4d12ecd313e"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0b585a6e-036a-46a6-b1d1-f55d45357382"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D9" id="e5cfbd88-d2b7-412f-a2b1-1f7459e5f71c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Retention downloaded" id="0cea7ef5-df69-4fb3-951e-cefd93274322"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check the retention downloaded time for the 4 submitted messages. Should be:\n- 0 for -Dom120-1- (green) and -Dom120-2- (blue) \n- 2 for -Dom120-3- green and -Dom120-4- (red)"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:setupScript/><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom120-");
test.finalize();

testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set false'].run( testRunner, context );</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>50558103-c261-46d9-bf14-3a0877664b45</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>824fb2e0-b901-47bd-ba52-3c41f531ce92</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4944e938-e6f3-4184-86b7-0dd02890d52b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a4478260-2a79-466f-a0cf-c731c78a426f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>accc8b1e-7a65-4d2b-bd99-7d67ece13d9b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd3f23f1-2ab1-41c2-8759-adc4f1ecedfa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b72b0e10-6f16-4231-938f-62d7ed20f49f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3117f0d8-bf0b-4974-a20e-216188043682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5784d6cf-a049-4df4-aeb1-a6c427537e08</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a1a84725-2dea-42b1-a614-f0beb5023c0d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7bd1f296-a1a1-4200-81bb-fc3d897c100c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f38ce09f-7eb8-48f9-a588-64511efbafa7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>05617ae1-e36b-44a3-ad93-e5b0e0882051</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>231ba52b-ae69-4ba0-8401-09b7e8e99740</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3bbde27c-2cf9-4827-8cfb-9f31072c3194</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>559eef91-b88f-4219-a0a0-dcbad15d8842</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>891243d0-e8d3-4ec5-b197-0c7b6c807818</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e84d750c-ab3d-4f09-b26b-698585a7231c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9ebfc2bd-41a6-4490-809d-c844a4e52669</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8cd609f1-48d2-4298-ad4d-470eb4c6518d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e831a6c1-abf4-45d9-8e41-4a92611d1ec5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c4844673-2828-4916-a311-08d9f0d2bc9c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>54567b72-df57-4d21-a07b-2a4273d53ecf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom131-Push-Revoked Certificates" searchProperties="true" id="4d17f5dc-da40-4a00-87da-865361cc3b83">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Clean message ID" id="3e329f19-19e9-4b90-ae9e-328444cc6ff1"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom131-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Copy crl file" id="7d2c076e-bd5b-4f05-9a37-88d2ddb27e4b"><con:settings/><con:config><script>def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\revoked\\edeliveryRevList.crl";
def dest = "C:\\dev\\edeliveryRevList.crl"; 
if(!new File("C:\\dev\\edeliveryRevList.crl").exists()){
	Domibus.copyFile(source,dest,log);
}
else{
	log.info "File already exists."
}



</script></con:config></con:testStep><con:testStep type="groovy" name="Copy revoked keystore files" id="613f25d7-625b-4657-a018-d3edcd4a5953"><con:settings/><con:config><script>// Copy keystore blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\revoked\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\revoked\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="5aaf5969-d8fa-40f7-b7e9-107549fcb0a2"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Temporize
log.info "DELAY BEFORE STARTING DOMIBUS: BEGIN";
sleep(10000);
log.info "DELAY BEFORE STARTING DOMIBUS: END";

// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Revoked" id="c79450e9-1681-47ea-84c4-b3eed2e702a1"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\revoked\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\revoked\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="79503b0d-b53a-4edf-8c0c-22ad23b35f19" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom131-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="530f54aa-a767-4da0-a3da-f840a117d5ee"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="25613cb0-9773-4092-98d0-3543d6d2d550"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5978371d-94be-414f-a8f0-a8e468dc6549"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="7a8899d3-00ba-49a1-8d00-e39092cf1fa4" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="149f3c6c-fb79-4ac5-bdb3-e73197a2f3c5" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom131-");
test.finalize();	
testRunner.testCase.testSteps['Copy keystore files default'].run(testRunner, context);
testRunner.testCase.testSteps['Restart Sender and Receiver'].run(testRunner, context);
testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);


</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d2822aff-64cc-4d3d-b01f-905092eaffb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b3a9d704-5f48-4b51-845e-30ad56a09d63</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>096cd24a-d7ef-4e0b-9a04-4e3fc56d0c84</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d316f7b3-f2c4-4da0-8ffe-257836a13c90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>99411964-e893-44cc-b261-1e0b8c271948</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2d6adb0d-a4b5-4d01-b9a1-b3ea83f8ce3c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e110d38c-4b36-417e-9ab6-cad304a49587</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41a7af78-2394-46d0-a1d7-897b737c4fae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0524d26a-8fa5-4524-97d4-1721cd46c9d8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e73ca55c-ccb2-4626-8f66-199c5cb3c08d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76333cec-611d-4545-a169-37eaf4a405e5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>243248d2-e3f0-4743-9e6e-0518b99831cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>670d472b-1f71-4664-b6b6-a5126853ef3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fa6ef50-ede8-4ddc-970e-9ff7a6625e37</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>498c3117-cf06-400e-864e-93f43fce900a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0b07235-fe1b-4a0d-91f4-5dce059daea6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c5aad99-870d-42a3-80c0-5f7589b7ff46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom132-Push-Expired Certificates" searchProperties="true" id="39f264b8-4c42-4b44-8f90-4b0497b46b34">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Clean message ID" id="0ac97a9d-86b9-4df2-bba3-740342f78132"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom132-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Copy expired keystore files" id="4202e2d8-5764-42d7-9215-e1c7c998bd1d"><con:settings/><con:config><script>// Copy keystore blue Http_Http
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\expired\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red expired
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\expired\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="12f25ca7-3545-4c9c-b662-bca13187e688"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Temporize
log.info "DELAY BEFORE STARTING DOMIBUS: BEGIN";
sleep(10000);
log.info "DELAY BEFORE STARTING DOMIBUS: END";

// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Expired" id="af5cb196-5531-4ede-adc3-53bcb536df77"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\expired\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\expired\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="e79c110c-bc75-4c3e-a05d-7feb8f28de34" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom132-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="7ac34d8b-c910-408b-b950-18c2b8ed274c"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="971467c0-c687-41c9-9bb4-e3a656e2c65f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6d6413f7-34a2-4ee5-b83f-37cf6bbd298a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="b2492e52-e586-453b-bce7-cf4ad9b02620" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="decc7928-6636-4b8c-8c43-c97cfe4b77e5" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="0586fa37-d4d0-434b-9bb2-bf1ffe3569b4" name="Copy of Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Copy of Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom132assaa-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="7ac34d8b-c910-408b-b950-18c2b8ed274c"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="971467c0-c687-41c9-9bb4-e3a656e2c65f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6d6413f7-34a2-4ee5-b83f-37cf6bbd298a" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>pa4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom132-")
test.finalize();	

testRunner.testCase.testSteps['Copy keystore files default'].run(testRunner, context);
testRunner.testCase.testSteps['Restart Sender and Receiver'].run(testRunner, context);
testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);

</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d2822aff-64cc-4d3d-b01f-905092eaffb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b3a9d704-5f48-4b51-845e-30ad56a09d63</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>096cd24a-d7ef-4e0b-9a04-4e3fc56d0c84</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d316f7b3-f2c4-4da0-8ffe-257836a13c90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>99411964-e893-44cc-b261-1e0b8c271948</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2d6adb0d-a4b5-4d01-b9a1-b3ea83f8ce3c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e110d38c-4b36-417e-9ab6-cad304a49587</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41a7af78-2394-46d0-a1d7-897b737c4fae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0524d26a-8fa5-4524-97d4-1721cd46c9d8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e73ca55c-ccb2-4626-8f66-199c5cb3c08d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76333cec-611d-4545-a169-37eaf4a405e5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>243248d2-e3f0-4743-9e6e-0518b99831cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>670d472b-1f71-4664-b6b6-a5126853ef3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>957d7076-7a15-4a61-9e09-4b458a371cdd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8008c905-3f1f-4c49-94dc-4a3aaed5406a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>876ad7dd-a645-44dc-85fe-586c22959403</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6088faa0-8522-4715-9bcb-b78d70630bcb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom143-EDELIVERY-2599-Sender certificate is verified using the TrustStore" searchProperties="true" id="3f7247f0-0189-4f67-99db-1965d663261a" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Copy keystore file" id="b7cc9e6c-74a3-495e-8102-3c469d1ebc20"><con:settings/><con:config><script>// Copy wrong keystore 
 def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\peppol\\gateway_keystore.jks";
 def dest = Domibus.formatPathSlashes(context.expand('${#Project#pathExeSender}'))+"..\\conf\\domibus\\keystores\\gateway_keystore.jks";
 Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Domibus Sender" id="d203c1d2-4cca-493d-9d4f-78a769353936"><con:settings/><con:config><script>// Stop
Domibus.stopMSH("sender",context, log);

// Start
Domibus.startSetMSHs(1,0,0,context,log);

log.info "--DONE--";</script></con:config></con:testStep><con:testStep type="request" id="d02eb7f9-7374-4a65-8878-89cd02875d56" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore keystore file" id="44aba94b-57f9-44eb-83b8-367286757c59" disabled="true"><con:settings/><con:config><script>// Restore keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = Domibus.formatPathSlashes(context.expand('${#Project#pathExeSender}'))+"..\\conf\\domibus\\keystores\\gateway_keystore.jks";
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()

testRunner.testCase.testSteps['Restore keystore file'].run(testRunner, context);
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom146-EDELIVERY-2727-UI: Truststore screen - file upload problems" searchProperties="true" id="9d88e2f2-38d2-4861-9446-4037b8573a6f" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload corrupted truststore file to Sender" id="0d0480f1-e7c6-41ea-803f-fa759879a765"><con:settings/><con:config><script>Domibus.uploadTruststore("sender","special","\\CorruptedTruststore\\gateway_truststore.jks",context,log,"default","Could not load key store");


</script></con:config></con:testStep><con:testStep type="request" id="95400ad2-df53-40bb-87ee-d84f0a8f4ee4" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-BLue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-rED</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc7">bdx:noprocess</ns:Service>
               <ns:Action>TC7Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6da50573-4c2a-47d0-8b0c-88b66cbc5d87"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="65832da5-4cef-4fe9-a371-56d4b43c98ac"/><con:assertion type="XPath Match" name="XPath Match" id="903a69d6-fbf8-4154-8f78-eb72374621aa"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="327fcd66-8d38-459f-b8b6-f7b50830fe27"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore default truststores Sender" id="8ef1f8e0-5ed8-4df5-96cf-4e33da92ba61" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore default truststore Sender'].run(testRunner, context);
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom147-EDELIVERY-1252-If type attribute is missing for specific elements the value must be an URI" searchProperties="true" id="6598150d-8b8a-4cbf-a3b6-8f7ae39b1712" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PMode-Blue-PartyIdTypeEmpty-invURI" id="42960b86-fb1d-4915-8d2a-a64949f83fb9"><con:settings/><con:config><script>// Upload PMode with an empty partyId type and an invalid URI for the value  
Domibus.uploadPmode("sender","special","\\invalidURI\\domibus-pmode-blue-partyId.xml",context,log,"successfully","PartyIdType is empty");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PMode-Blue-AgreementRefTypeEmpty-invURI" id="7c0ac74a-4c76-4711-be1d-75be2cc34c85"><con:settings/><con:config><script>// Upload PMode with an empty partyId type and an invalid URI for the value  
Domibus.uploadPmode("sender","special","\\invalidURI\\domibus-pmode-blue-AgreementRef.xml",context,log,"successfully","Agreement type is empty");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue" id="f984ac56-f759-4e7b-aa99-6e5763608cc2" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);
</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

testRunner.testCase.testSteps['Upload default PModes Blue'].run(testRunner, context);
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom152-Push-weblogic" searchProperties="true" id="7adf39ee-f75f-4e1a-8648-1fa42a7751bd" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Setup properties and PMode" id="feba94a7-deb2-46a4-9f66-ef81fcd9d54f"><con:settings/><con:config><script>def tc = testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-cloud-weblogic-tomcat"]
def testStep = tc.testSteps['Set custom properties']
testStep.run( testRunner, context )
testStep = tc.testSteps['Upload default PModes Blue-Red']
testStep.run( testRunner, context )</script></con:config></con:testStep><con:testStep type="request" id="092dc4cc-5010-4e20-b66e-6f0db44cdcd3" name="Submit Message-weblogic-tomcat"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-weblogic-tomcat" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
             <ns:MessageInfo>
               <ns:MessageId>-Dom136-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="36b0200e-8691-4e96-8232-19de567ec14a" name="Submit Message-tomcat-weblogic"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-tomcat-weblogic" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom136-2-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9765a7cd-49e5-4afd-a8a3-246622c8a719" name="Submit Message Mix Attachments weblogic-tomcat"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Mix Attachments weblogic-tomcat" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom136-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>

      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="f3348388-86cb-4ed4-89f3-f9cce5044e85"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="365defe9-ca8a-44b0-92c7-6ac031a91e7c"/><con:assertion type="XPath Match" name="XPath Match" id="e732d14e-6a50-4177-88b8-bcf61919cd6a"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="326d4819-a043-4395-a428-c1b75a3e7711"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>dbbb4a16-e96d-4093-a863-79d90e497eca</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="496d333c-9ab5-435d-81b1-ac8e1f5ea84a" name="Submit Message Mix Attachments tomcat-weblogic"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Mix Attachments tomcat-weblogic" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom136-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
          </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>

      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="f3348388-86cb-4ed4-89f3-f9cce5044e85"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="365defe9-ca8a-44b0-92c7-6ac031a91e7c"/><con:assertion type="XPath Match" name="XPath Match" id="e732d14e-6a50-4177-88b8-bcf61919cd6a"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="326d4819-a043-4395-a428-c1b75a3e7711"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>dbbb4a16-e96d-4093-a863-79d90e497eca</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith('-Dom136-')
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom153-Push-wildfly" searchProperties="true" id="473c0ead-7bb6-4cb6-a8f4-b95ffbc8798d" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set properties and PMode" id="243354d5-8e06-4346-9c53-0cc1ab57e764"><con:settings/><con:config><script>def tc = testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-cloud-wildfly-tomcat"]
def testStep = tc.testSteps['Set custom properties']
testStep.run( testRunner, context )
testStep = tc.testSteps['Upload default PModes Blue-Red']
testStep.run( testRunner, context )</script></con:config></con:testStep><con:testStep type="request" id="55e4b69e-94f6-4ca5-93eb-16035fe80f65" name="Submit Message-wildfly-tomcat"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-wildfly-tomcat" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f6291a44-922f-402e-ba42-62acd6cbf4f5" name="Submit Message-tomcat-wildfly"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-tomcat-wildfly" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom154-EDELIVERY-2718-Error log entry is not created" searchProperties="true" id="9a7206ff-9643-4e76-9f19-4eb2beb4893f" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="8f9067b2-b38f-44cb-a3a4-6e93c5ee640e" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
           <ns:MessageInfo>
               <ns:MessageId>-Dom154-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>
def test = new Domibus(log,messageExchange,context);
test.checkSendAttempt(context.expand( '${Submit Message 1#Response#//messageID}' ));
test.finalize();
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore file" id="af36d5da-1bbe-4086-9eb5-029ae87854fe"><con:settings/><con:config><script>// Copy wrong keystore 
 def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\oasis\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
 Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="1c020b10-1bec-46f2-b631-bc31d9e01bb9"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Temporize
log.info "DELAY BEFORE STARTING DOMIBUS: BEGIN";
sleep(50000);
log.info "DELAY BEFORE STARTING DOMIBUS: END";

// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="request" id="03b0a982-3327-4ef0-98ca-89a93c637c63" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom154-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.checkSendAttempt(context.expand( '${Submit Message 2#Response#//messageID}' ));
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="df4abff0-83a5-4071-854e-200a466b5d3a"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Restore keystore file" id="4722297f-927b-45de-90bc-c9947c99c61a"><con:settings/><con:config><script>// Restore keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="3b6c4796-1ed2-4c4a-b1ba-0ec5b3629ee2"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and stop Receiver" id="6149a75a-18c4-4ba6-bbf1-c4645055e4c6"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Temporize
log.info "DELAY BEFORE STARTING DOMIBUS: BEGIN";
sleep(50000);
log.info "DELAY BEFORE STARTING DOMIBUS: END";

// Start sender
Domibus.startSetMSHs(1,0,0,context,log);

log.info "--SENDER RESTART DONE--";

</script></con:config></con:testStep><con:testStep type="request" id="3728268d-5b2e-430e-914d-ca4bd0403711" name="Submit Message 3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 3" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
           <ns:MessageInfo>
               <ns:MessageId>-Dom154-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.checkSendAttempt(context.expand( '${Submit Message 3#Response#//messageID}' ));
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="a6cd6b37-b9e3-44ca-abd2-5c8a29b1a6c4" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);
</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom154-")
test.finalize()

testRunner.testCase.testSteps['Restore keystore file'].run(testRunner, context);
testRunner.testCase.testSteps['Restart Sender and Receiver'].run(testRunner, context);
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom155-EDELIVERY-2857-Weblogic Cluster" searchProperties="true" id="d28e6570-8582-4053-9b86-06aac8aa808d" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Setup properties and PMode" id="6a73d6cb-00c2-49c7-bd52-3ae402182171"><con:settings/><con:config><script>def tc = testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-cloud-weblogic-tomcat"]
def testStep = tc.testSteps['Set custom properties']
testStep.run( testRunner, context )
testStep = tc.testSteps['Upload default PModes Blue-Red']
testStep.run( testRunner, context )</script></con:config></con:testStep><con:testStep type="request" id="d876ba2e-8d17-44d4-b66b-3409d02c584a" name="Submit Message-tomcat-weblogic7003-M1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-tomcat-weblogic7003-M1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom155-Cluster-1-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="74e6423b-ac1d-4240-97ea-46b4d531008c" name="Submit Message-tomcat-weblogic7003-M2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-tomcat-weblogic7003-M2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom155-Cluster-2-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8e340134-1d65-4bfc-8112-53ffa94a557a" name="Submit Message-tomcat-weblogic7003-M3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-tomcat-weblogic7003-M3" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom155-Cluster-3-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6e4c03f4-638f-4190-8784-7aa34d9c17c4" name="retrieveMessage-weblogic7005-M1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage-weblogic7005-M1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://edeltest4.westeurope.cloudapp.azure.com:7005/domibus-weblogic/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:retrieveMessageRequest>
         <messageID>-Dom155-Cluster-1-</messageID>
      </_1:retrieveMessageRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="aaaf6913-14d2-49e6-861b-394975dde517" name="retrieveMessage-weblogic7003-M2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage-weblogic7003-M2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:retrieveMessageRequest>
         <messageID>-Dom155-Cluster-2-</messageID>
      </_1:retrieveMessageRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="57e10c44-2d86-473d-95de-279b5141f709" name="retrieveMessage-weblogic7005-M3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage-weblogic7005-M3" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://edeltest1.westeurope.cloudapp.azure.com:7003/domibus-weblogic/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:retrieveMessageRequest>
         <messageID>-Dom155-Cluster-3-</messageID>
      </_1:retrieveMessageRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith('-Dom155-Cluster-')
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom186-EDELIVERY-2599-Sender certificate is verified using the TrustStore" searchProperties="true" id="adb9c160-199f-4b40-9782-b91a85b27c17" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Copy keystore file" id="f8cf31a2-5d50-4b00-8955-4af436378793"><con:settings/><con:config><script>// Copy wrong keystore 
 def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\oasis\\gateway_keystore.jks";
 def dest = Domibus.formatPathSlashes(context.expand('${#Project#pathExeSender}'))+"..\\conf\\domibus\\keystores\\gateway_keystore.jks";
 Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Domibus Blue" id="ee504b9b-6a50-42fb-863b-f3b6ed33094a"><con:settings/><con:config><script>// Stop sender 
Domibus.stopSetMSHs(1,0,0,context,log);

// Temporize
log.info "DELAY BEFORE STARTING DOMIBUS: BEGIN";
sleep(50000);
log.info "DELAY BEFORE STARTING DOMIBUS: END";

// Start sender 
Domibus.startSetMSHs(1,0,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="request" id="56475fbd-ba52-426a-b2a4-1afa57355216" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore keystore file" id="86e74e46-6361-4bee-b98c-71c8d184ff79" disabled="true"><con:settings/><con:config><script>// Restore keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = Domibus.formatPathSlashes(context.expand('${#Project#pathExeSender}'))+"..\\conf\\domibus\\keystores\\gateway_keystore.jks";
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="0a6af897-579c-4d30-9e16-76aae54673e0" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()

testRunner.testCase.testSteps['Restore keystore file'].run(testRunner, context);
testRunner.testCase.testSteps['Restart Domibus Blue'].run(testRunner, context);
testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom397-Pull-Get Status-Basic flow-SEND_FAILURE" searchProperties="true" id="b08af8b6-9f72-4845-a87f-54f563e52a57">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Change C3 Pmode to contains incorrect C2 endpoint" id="418495a5-142d-4162-9cf8-6c16e58c443c"><con:settings/><con:config><script>Domibus.uploadPmode("receiver","special","/invalidEndpoint/domibus-pmode-red-blue_invalid.xml", context, log)
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="73d4ddde-a36f-4d11-8e4d-e71c5883661b"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5ffb5be8-cda3-4cdb-90e6-b1e6132d0316" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom397-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3375705c-b3a5-42d7-bb68-73695fffca78"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e3269ab8-8598-4bd2-b453-8fe454ac2e6d"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d5d4a0a3-5e8b-43b4-8356-be3fec064dba"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL",null,"-Dom397-");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Wait until send failure" id="400d9e9d-4725-41f0-8f61-dbea5017ebf1"><con:settings/><con:config><delay>780000</delay></con:config></con:testStep><con:testStep type="groovy" name="Check message submitted" id="85a9f070-7f56-48f7-85d5-dd68b1255bbc"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("SEND_FAILURE",null,"-Dom397-")
test.finalize()</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="ea67ce8d-e9dd-48a5-9ae7-ce9b04762296"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="c0d75ad6-22a9-4a4c-b355-932c3e69d491" name="getStatus"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c43c3368-1509-4000-899a-c4e8b5cdd72e"/><con:assertion type="Simple Contains" id="d377a650-0774-4982-be58-094010a2d046" name="Contains"><con:configuration><token>SEND_FAILURE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="f2f692fb-63ac-41cd-9030-3413734c4b7f" name="Not SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Revert - upload default Pmodes" id="765b8e85-0d87-4134-b3c2-fb276495f05c" disabled="true"><con:settings/><con:config><script>def tStep = testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Pmode Update"].testSteps["Default Pmodes upload step for reuse"]
tStep.run(testRunner, context)</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom397-");
test.finalize();

Domibus.uploadPmodeIfStepFailedOrNotRun(log, context, testRunner, "Revert - upload default Pmodes", "Default Pmodes upload step for reuse")

//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>931fa000-7681-46a4-8532-4700647f8a5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom404-Pull-Test Experience-Truststore Update" searchProperties="true" id="3848c06e-5008-4888-8482-48ff442e9038">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload unsuitable truststore Blue" id="15bcaf9d-3d93-4a99-93dc-c6ea1bed5e9b"><con:settings/><con:config><script>// Upload unsuitable truststore to blue.  
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="63976e9b-e351-4f80-ae0b-0c48e9bf911c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="9ef10367-1543-4d6b-95df-7f4d3e6e895c" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom404-1-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="f3348388-86cb-4ed4-89f3-f9cce5044e85"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="365defe9-ca8a-44b0-92c7-6ac031a91e7c"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="326d4819-a043-4395-a428-c1b75a3e7711"><con:configuration><scriptText>sleep(50000);
def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL","");
test.verifyMessagePresence(1,0)
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="62cbbedb-1d2e-411d-80d2-d6fb10a49c45"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Restore Truststore" id="18468e4a-50bd-434e-84b8-a00723529005"><con:settings/><con:config><script>// Upload default truststore for blue.  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="010c26a8-5127-40c4-a82c-df320399b355"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="a3937ef9-dbf8-4db7-b225-8ddc64576255" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom404-2-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2316951c-1fc3-45a0-87f8-c5e3711aa367"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="83bab5a4-190e-407b-8241-c7cbfe12deb9"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bd5ddcd7-0e1c-4429-9c84-ebe98542eac8"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom404");
test.finalize();
////ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>906220c2-8277-4fcb-a3bd-f15306888b25</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53c0a958-b619-493b-b45b-7b9d7ecf4e43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e138bc36-5999-4555-b848-c445b16888f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e463ae55-976e-4821-ba44-7ac3ab41c5e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72a27452-cd8c-4971-8adc-00af35c941f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>af041385-12f1-4709-a09d-189cb32e5fbd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b4dd5a76-3e3a-4c77-812b-72385f03e7d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c900b357-a318-4d50-af49-a18a044c70e6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="7b71572c-6c2e-4241-9095-e92ca2edf7f1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom410-Pull-payload conversion-EDELIVERY-1436" searchProperties="true"><con:settings/><con:testStep type="request" id="11e5ebbb-08ba-433a-a9db-97623936be05" name="Submit Message Attachment In Body"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Attachment In Body" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom410-1-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="61912767-467a-4ebe-9986-b18642ee5f8d"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="1d1184be-1ca2-4b1f-8a25-25bac3c2ff2b"/><con:assertion type="XPath Match" name="XPath Match" id="7504cefa-d403-4f83-a881-b25d84e1010d"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="21416326-36ff-41c1-921a-7822d5244d79"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="19ae292e-f453-44ba-9fc7-27d7ded8e8a6" name="Submit Message Mix Attachments"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Mix Attachments" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom410-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>

      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="21a92cb2-c50e-4eaa-965e-dd5bbe4f6f28"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="c2100fba-27a0-43df-8363-cfbfbee783dd"/><con:assertion type="XPath Match" name="XPath Match" id="e08c003e-325a-44ee-b50d-6a6264e11694"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0e0b6547-52bd-4b8c-baea-a3f61a791ed7"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>dbbb4a16-e96d-4093-a863-79d90e497eca</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6ff69be8-8d80-49f7-992c-31fed8c9313e" name="Submit Message MTOM Enabled"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message MTOM Enabled" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom410-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>

      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c25e31e0-5751-4528-bf55-3e21074ec598"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e0b2b8d4-7ad4-4558-b7b6-6659e4fa803f"/><con:assertion type="XPath Match" name="XPath Match" id="354fdf5f-5c38-403b-b81b-ea0eeedf0ce3"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="13ecaee3-f73e-42d3-8b30-819583340611"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>dbbb4a16-e96d-4093-a863-79d90e497eca</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom410-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d3c78fff-9566-42ec-bacd-7d23b9266efa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80f41cff-b746-425b-858f-5614624e7efc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom121-Push-3 Domibus Senario-Blue As Red" searchProperties="true" id="f816326c-8ed2-4626-b15d-aa32a2d2a62c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="INFO" id="468d7af8-986d-4bda-9799-a06b237267a4"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"3 Domibus are needed for this scenario:\nDefault used \"blue\" and \"red\" + 3rd \"green\" gateway."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to true" id="cfc60bb9-7ccd-45ad-b870-01f1d73580da"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set true'].run( testRunner, context );</script></con:config></con:testStep><con:testStep type="groovy" name="Start 3 gateways configuration" id="ef363879-db57-41f2-bf60-b76ff04ce960" disabled="true"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Start 3 gateways configuration"].run(new com.eviware.soapui.support.types.StringToObjectMap(), false);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="774db372-148e-4fc0-83b3-490a41b30755"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="f7056a4c-f806-4409-81f9-322d7649283e" name="Blue To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom121-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="019fb5ae-5cf7-4c7b-91a1-34149daaa234"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e06272e4-01b3-4793-8720-0a7c26ce83e0"/><con:assertion type="XPath Match" name="XPath Match" id="664356c0-b362-4240-b301-ee02b0f13dcf"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="c89362d0-418a-4daf-b232-d8a690a71407"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="47e48fa7-ddc8-425c-b96c-c4355ba1716a"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="64819af1-dd17-4405-bf76-96cf709d39c8" name="Blue desguised as Red To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue desguised as Red To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom121-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="478af5d5-1d81-413e-a8a1-81fdd70f8dc5"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="9dc050f9-2e38-4826-8945-b0e60a3571d3"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0, 0, "-Dom121-2-", "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="26a69ef7-88dd-44e3-a7fc-b60a03832410"/><con:assertion type="Simple Contains" name="Contains" id="eea41996-71d7-4c09-9f7c-b549fb2722d5"><con:configuration><token>The initiator party's name</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="31c4284b-c6f6-4abe-978e-9fc3ac4e0657"><con:configuration><token>does not correspond to the access point's name</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="0aa0df78-22bf-4a41-83b9-5477158d2cc3"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="2f623a79-2b6b-471d-b365-1ae9aa9c6bac" name="Green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom121-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="5c852e98-3d5f-4575-9d44-1e6cead3cf45"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d97d3d4a-a98b-4956-9de6-6512bd9b3ab6"/><con:assertion type="XPath Match" name="XPath Match" id="74c11da1-c7b3-4783-ba57-61bd1a21b0c8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a3336923-350b-43db-9006-e1f21790b287"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="5c02b3f2-5f2a-4f2b-839e-83c640e8c77c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="9b6dd5c3-e593-4efa-8664-f76d9e88150a" name="Green To Blue Wrong Process"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue Wrong Process" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom121-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="e1b5540b-8e36-42fe-8215-341d125ccc5a"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a3e8c8a4-91f3-4151-a176-d6a42ff3344a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0, 0, "-Dom121-4-", "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="2abdd157-745f-43da-8a57-caacbe3a1923"/><con:assertion type="Simple Contains" name="Contains" id="9fb66626-3452-4771-a3dd-5f8bef39268e"><con:configuration><token>No matching leg found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:setupScript>//context.initProp = [:]
//testCase.testSuite.project.getProperties().each {context.initProp.put(it.key, it.value.getValue())}</con:setupScript><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom121-");
test.finalize();

testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set false'].run( testRunner, context );</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5a91c51d-9b49-4f13-a074-f1cb5bf45853</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>109a5688-99e4-4594-bcdf-19012278b552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ae7a435d-5dea-4e09-848b-ae658c50dc9b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d14f913e-7b8f-426d-aaa8-75728c79cccf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>031df7ff-c04c-4731-8af1-1fb44003b193</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom419-Pull-3 Domibus Senario-Basic Flow" searchProperties="true" id="5ecf1f7d-cd93-40bb-a80c-54ba12fc51cd">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="INFO" id="abe13d2b-ab9e-4c54-979c-e2738ca40705"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"3 Domibus are needed for this scenario:\nDefault used \"blue\" and \"red\" + 3rd \"green\" gateway."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to true" id="1d721f33-0935-45d6-b733-d5cdbfbb076a"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set true'].run( testRunner, context );
</script></con:config></con:testStep><con:testStep type="groovy" name="Start 3 gateways configuration" id="5d15c5f8-9194-4b36-86e9-1cabf8687455" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Start 3 gateways configuration"].run(new com.eviware.soapui.support.types.StringToObjectMap(), false);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="4556128e-2c96-4903-bd16-d5f759b2aad3"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="9fae87b5-e30c-49e9-ae13-7a0233d9874a" name="Blue To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom419-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc50">bdx:noprocess</ns:Service>
               <ns:Action>TC50Leg10</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4ae20567-52e1-45f0-948f-807c95ec9254"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="fb4670e2-abf7-431e-a0c4-b660999ef319"/><con:assertion type="XPath Match" name="XPath Match" id="fec8eb4d-7098-4de6-9c09-8327be97bb69"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f1dbebb8-32bf-498a-b0c9-e1c89d3b5236"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="e1d69b05-6fd5-4925-b6ab-d48d29d6df6f"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="4f295e1a-2c5a-40c6-864a-4f96cd64e8c3" name="Green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom419-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc51">bdx:noprocess</ns:Service>
               <ns:Action>TC51Leg11</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="54bda985-0895-41db-a5fc-634869f3f72a"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="892e2416-442c-4bcd-a010-92c425c2d847"/><con:assertion type="XPath Match" name="XPath Match" id="a1d9c4b1-65c0-41ac-b4f9-c472f01bcdf7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bf99fbc4-0be7-49c2-97bc-65568347ec9a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="dc553bb8-548c-4c8c-b9e8-50e453e3d3b7"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="b4bc8247-252d-4a4a-8727-f6b6ec63330f" name="Red To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Red To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom419-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc60">bdx:noprocess</ns:Service>
               <ns:Action>TC60Leg10</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4749d8dd-ea46-495d-b2c5-814ee9a937a5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="40c518cf-6fc3-4879-bc0c-408d3ac4a829"/><con:assertion type="XPath Match" name="XPath Match" id="fc4d687f-6ac6-4a31-a524-09109351ffbd"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a0e0c038-6c4a-4c7a-afbb-ec83de431613"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="b693bab9-eabd-43b0-9332-8bc94cd8a40b"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="536d83ab-f3f4-4fb0-b89a-5abf7b50edf0" name="Green To Red"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Red" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom419-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc61">bdx:noprocess</ns:Service>
               <ns:Action>TC61Leg11</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="30be048e-9831-40ed-89d4-878a62f0128e"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="f27080c7-616e-4bc0-8fd0-5e7877c10b44"/><con:assertion type="XPath Match" name="XPath Match" id="b63266bb-b4e8-408e-bd5c-58cf80540efb"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="33c710a3-1dad-4e96-a696-1fbf2f4ea6c8"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D5" id="313b90d7-6377-400f-98b0-ddc016df5756"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Retention undownloaded" id="1e283c45-f30d-4e5f-9bba-eff975f259ae"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check the retention undownloaded time for the 4 submitted messages. Should be:\n- 4 for -Dom419-1- (green) and -Dom419-2- (blue) \n- 6 for -Dom419-3- (green) and -Dom419-4- (red)"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:setupScript>
</con:setupScript><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom419");
test.finalize();
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set false'].run( testRunner, context );
</con:tearDownScript><con:properties><con:property><con:name>jdbcUrlRed</con:name><con:value>jdbc:mysql://localhost:3306/domibus_green</con:value></con:property></con:properties>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bb3d553b-d22d-4249-82e1-f37fadcf9c22</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>00d86b48-a47d-4286-9c5b-81c48da574c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53adabc6-fd35-4f98-b1b9-bddc27a17351</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07530a3a-7c6c-4895-b49a-ab0ef0c0c905</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd43ea83-e069-45ee-bf9a-189744ff071a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4c6c19d0-b2d6-4c43-ad4e-b2d3ae19c582</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9cf85c52-32c7-466f-ba8b-52b4e0260763</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom420-Pull-3 Domibus Senario-Retention downloaded" searchProperties="true" id="4a3c7a25-2a75-4b6c-b8cb-bd9274b48b6d">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="INFO" id="afce4c33-7870-4c87-9f81-9d30cefd216b"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"3 Domibus are needed for this scenario:\nDefault used \"blue\" and \"red\" + 3rd \"green\" gateway."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to true" id="c3c1261a-2b02-4a4b-a0e4-9a67b083e99c"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set true'].run( testRunner, context );
</script></con:config></con:testStep><con:testStep type="groovy" name="Start 3 gateways configuration" id="2616c2d3-3bf5-4473-ae09-a639a796af52" disabled="true"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Start 3 gateways configuration"].run(new com.eviware.soapui.support.types.StringToObjectMap(), false);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="f1da63f6-0677-4ce4-a79f-9144883c7724"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="d70741e5-9c84-4425-a7b2-e3ee529d0e92" name="Blue To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom420-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc50">bdx:noprocess</ns:Service>
               <ns:Action>TC50Leg10</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4ae20567-52e1-45f0-948f-807c95ec9254"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="fb4670e2-abf7-431e-a0c4-b660999ef319"/><con:assertion type="XPath Match" name="XPath Match" id="fec8eb4d-7098-4de6-9c09-8327be97bb69"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f1dbebb8-32bf-498a-b0c9-e1c89d3b5236"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="2b1be493-74c2-4780-9a4e-71126caa8a8d"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="a9fcf193-4f21-4aa7-97ba-0d9e8de42150" name="Green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom420-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc51">bdx:noprocess</ns:Service>
               <ns:Action>TC51Leg11</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="54bda985-0895-41db-a5fc-634869f3f72a"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="892e2416-442c-4bcd-a010-92c425c2d847"/><con:assertion type="XPath Match" name="XPath Match" id="a1d9c4b1-65c0-41ac-b4f9-c472f01bcdf7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bf99fbc4-0be7-49c2-97bc-65568347ec9a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="1fbec4db-6833-46de-aff2-616a842286a1"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="8ea11cb1-7193-432b-b710-b00e550f85d9" name="Red To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Red To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom420-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc60">bdx:noprocess</ns:Service>
               <ns:Action>TC60Leg10</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4749d8dd-ea46-495d-b2c5-814ee9a937a5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="40c518cf-6fc3-4879-bc0c-408d3ac4a829"/><con:assertion type="XPath Match" name="XPath Match" id="fc4d687f-6ac6-4a31-a524-09109351ffbd"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a0e0c038-6c4a-4c7a-afbb-ec83de431613"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="d29f87b8-6506-4637-978d-30c9c46dfa14"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="ba67b2c6-afff-4cbb-9e50-984a5f0ce835" name="Green To Red"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Red" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom420-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc61">bdx:noprocess</ns:Service>
               <ns:Action>TC61Leg11</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="30be048e-9831-40ed-89d4-878a62f0128e"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="f27080c7-616e-4bc0-8fd0-5e7877c10b44"/><con:assertion type="XPath Match" name="XPath Match" id="b63266bb-b4e8-408e-bd5c-58cf80540efb"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="33c710a3-1dad-4e96-a696-1fbf2f4ea6c8"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D5" id="ef501faf-93a0-4551-9292-223fdd9a94a7"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="98a377e1-6425-47d6-8378-ef86e1bcad3c" name="retrieveMessage Blue To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage Blue To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Blue To Green#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="8dc73b0b-c319-44a2-8bf0-fc2bd9a1c3a5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="96fd54bb-b6d0-4b0b-b206-f2bac4fff730"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="14a069d1-1942-45ff-ac6f-c01aad26c404"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d5c880e0-f3d2-4ca8-bc7e-affbbfe2274d"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D6" id="29c0863d-c51d-4ff9-ba7d-91132f8ab721"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="fe251d10-9bee-4ec2-9648-22e4c978f59e" name="retrieveMessage Green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage Green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Green To Blue#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="0fe380f9-c1df-4b85-a454-90ca1ca59783"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5f852756-eb5e-43cb-bea5-583815bc63a6"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="7797fcbd-a9fa-4d8a-80ac-7aa97d0f6b19"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d7a22133-7704-4d84-9da5-3327e914ce56"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D7" id="c0dcb4bf-3bc8-4710-9cd8-d9c7bb802ce7"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="8e1a63ef-f801-476f-a1d3-2a93a438026e" name="retrieveMessage Red To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage Red To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Red To Green#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ae1d3a9b-c0a8-4f64-bff4-fe6badb66861"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="6ba6cd6f-b4f6-4723-aaf9-55715a3f5fd3"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="aa2294b8-4d68-42a6-aeb1-740de3468a37"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="bef3e157-9803-4776-8672-146c4ac2ad48"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D8" id="0c82e6d7-f77a-400b-bbaa-16708fe8d574"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="0e49d24a-bd08-4046-a684-f76faff1ceb3" name="retrieveMessage Green To Red"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage Green To Red" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Green To Red#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="90565203-ed24-4add-a484-ac3d9d684944"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="f66997b6-3a5b-41f7-bc26-caab07272e77"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="e8220d9c-0499-4253-afc5-d4d12ecd313e"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0b585a6e-036a-46a6-b1d1-f55d45357382"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D9" id="b9ee8fae-3bb6-4185-b172-85dcf3019951"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Retention downloaded" id="44ea042d-4bdd-4989-a382-618db4ae6682"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check the retention downloaded time for the 4 submitted messages. Should be:\n- 0 for -Dom420-1- (green) and -Dom420-2- (blue) \n- 2 for -Dom420-3- green and -Dom420-4- (red)"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:setupScript/><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom420");
test.finalize();
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set false'].run( testRunner, context );
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>50558103-c261-46d9-bf14-3a0877664b45</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>824fb2e0-b901-47bd-ba52-3c41f531ce92</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4944e938-e6f3-4184-86b7-0dd02890d52b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a4478260-2a79-466f-a0cf-c731c78a426f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>accc8b1e-7a65-4d2b-bd99-7d67ece13d9b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd3f23f1-2ab1-41c2-8759-adc4f1ecedfa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b72b0e10-6f16-4231-938f-62d7ed20f49f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3117f0d8-bf0b-4974-a20e-216188043682</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5784d6cf-a049-4df4-aeb1-a6c427537e08</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a1a84725-2dea-42b1-a614-f0beb5023c0d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7bd1f296-a1a1-4200-81bb-fc3d897c100c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f38ce09f-7eb8-48f9-a588-64511efbafa7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>05617ae1-e36b-44a3-ad93-e5b0e0882051</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>231ba52b-ae69-4ba0-8401-09b7e8e99740</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3bbde27c-2cf9-4827-8cfb-9f31072c3194</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>559eef91-b88f-4219-a0a0-dcbad15d8842</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>891243d0-e8d3-4ec5-b197-0c7b6c807818</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e84d750c-ab3d-4f09-b26b-698585a7231c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9ebfc2bd-41a6-4490-809d-c844a4e52669</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8cd609f1-48d2-4298-ad4d-470eb4c6518d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e831a6c1-abf4-45d9-8e41-4a92611d1ec5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c4844673-2828-4916-a311-08d9f0d2bc9c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>54567b72-df57-4d21-a07b-2a4273d53ecf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom421-Pull-3 Domibus Senario-Blue As Red" searchProperties="true" id="30bb906f-fdd4-4918-b5e1-a55f80582ab0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="INFO" id="b684ab1b-4020-41e9-a330-edfa20c04eef"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"3 Domibus are needed for this scenario:\nDefault used \"blue\" and \"red\" + 3rd \"green\" gateway."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to true" id="ee4a95f6-4bde-4930-b769-d4b921af8697"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set true'].run( testRunner, context );
</script></con:config></con:testStep><con:testStep type="groovy" name="Start 3 gateways configuration" id="374d2f8b-959e-44d5-bced-3398e703146e" disabled="true"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Start 3 gateways configuration"].run(new com.eviware.soapui.support.types.StringToObjectMap(), false);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="f0eabaf8-7a0b-444a-a001-cf16b6b1ee03"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5de0c04c-6e9b-415b-8c26-bfdb63559d8f" name="Blue To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom421-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc50">bdx:noprocess</ns:Service>
               <ns:Action>TC50Leg10</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="019fb5ae-5cf7-4c7b-91a1-34149daaa234"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e06272e4-01b3-4793-8720-0a7c26ce83e0"/><con:assertion type="XPath Match" name="XPath Match" id="664356c0-b362-4240-b301-ee02b0f13dcf"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="c89362d0-418a-4daf-b232-d8a690a71407"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="fea22aea-27b6-4ad3-889f-6e91dddac50c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="2fc632e2-79ee-465f-9de7-33f7154bb274" name="Blue desguised as Red To Green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue desguised as Red To Green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom421-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc50">bdx:noprocess</ns:Service>
               <ns:Action>TC50Leg10</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="478af5d5-1d81-413e-a8a1-81fdd70f8dc5"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="9dc050f9-2e38-4826-8945-b0e60a3571d3"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0, 0, "-Dom261-2-", "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="26a69ef7-88dd-44e3-a7fc-b60a03832410"/><con:assertion type="Simple Contains" name="Contains" id="eea41996-71d7-4c09-9f7c-b549fb2722d5"><con:configuration><token>No matching leg found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="2bfb9d1a-1adc-44e5-99ac-139b8324d7fc"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="8afb3be4-6991-44d7-b754-fd4e5338ed48" name="Green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom421-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc51">bdx:noprocess</ns:Service>
               <ns:Action>TC51Leg11</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="5c852e98-3d5f-4575-9d44-1e6cead3cf45"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d97d3d4a-a98b-4956-9de6-6512bd9b3ab6"/><con:assertion type="XPath Match" name="XPath Match" id="74c11da1-c7b3-4783-ba57-61bd1a21b0c8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a3336923-350b-43db-9006-e1f21790b287"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="1e3b1b0a-7d0d-4dd4-8997-67354fcfdd3c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="49d1254f-a098-416d-9a0d-39b6ca5f7a38" name="Green To Blue Wrong Process"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue Wrong Process" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom421-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc60">bdx:noprocess</ns:Service>
               <ns:Action>TC60Leg10</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="e1b5540b-8e36-42fe-8215-341d125ccc5a"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a3e8c8a4-91f3-4151-a176-d6a42ff3344a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0, 0, "-Dom261-4-", "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="2abdd157-745f-43da-8a57-caacbe3a1923"/><con:assertion type="Simple Contains" name="Contains" id="9fb66626-3452-4771-a3dd-5f8bef39268e"><con:configuration><token>No matching leg found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:setupScript>//context.initProp = [:]
//testCase.testSuite.project.getProperties().each {context.initProp.put(it.key, it.value.getValue())}</con:setupScript><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom421");
test.finalize();
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set false'].run( testRunner, context );
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5a91c51d-9b49-4f13-a074-f1cb5bf45853</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>109a5688-99e4-4594-bcdf-19012278b552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ae7a435d-5dea-4e09-848b-ae658c50dc9b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d14f913e-7b8f-426d-aaa8-75728c79cccf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>031df7ff-c04c-4731-8af1-1fb44003b193</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom431-Pull-Revoked Certificates" searchProperties="true" id="00ab372a-5c44-4f3a-bb8e-f80632f76534">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Clean message ID" id="c553e2ba-529a-4b61-906a-0ccc63bebb4a"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom431-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Copy crl file" id="e8c33ad6-aac0-4410-8bb6-574164d6a136"><con:settings/><con:config><script>def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\revoked\\edeliveryRevList.crl";
def dest = "C:\\dev\\edeliveryRevList.crl"; 
if(!new File("C:\\dev\\edeliveryRevList.crl").exists()){
	Domibus.copyFile(source,dest,log);
}
else{
	log.info "File already exists."
}




</script></con:config></con:testStep><con:testStep type="groovy" name="Copy revoked keystore files" id="879931f4-952e-484a-9155-2adbb8d29b16"><con:settings/><con:config><script>// Copy keystore blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\revoked\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\revoked\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="0facb6d0-87b3-405d-ae46-8c4690cc1c7e"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Temporize
log.info "DELAY BEFORE STARTING DOMIBUS: BEGIN";
sleep(10000);
log.info "DELAY BEFORE STARTING DOMIBUS: END";

// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Revoked" id="d6c656b1-d2a6-484d-b12f-47acba70f578"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\revoked\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\revoked\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="3bbfedcb-7ec4-4b8f-9cf7-3cb6026320ec" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom431-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="530f54aa-a767-4da0-a3da-f840a117d5ee"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="25613cb0-9773-4092-98d0-3543d6d2d550"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5978371d-94be-414f-a8f0-a8e468dc6549"><con:configuration><scriptText>// Delay
sleep(50000);

// Check message status
def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="5948af88-6645-491b-83de-68dfbbd0c050" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="724c0947-4236-4ad1-949c-6b95ab6cb189" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom431-")
test.finalize();	

testRunner.testCase.testSteps['Copy keystore files default'].run(testRunner, context);
testRunner.testCase.testSteps['Restart Sender and Receiver'].run(testRunner, context);
testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);

</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d2822aff-64cc-4d3d-b01f-905092eaffb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b3a9d704-5f48-4b51-845e-30ad56a09d63</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>096cd24a-d7ef-4e0b-9a04-4e3fc56d0c84</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d316f7b3-f2c4-4da0-8ffe-257836a13c90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>99411964-e893-44cc-b261-1e0b8c271948</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2d6adb0d-a4b5-4d01-b9a1-b3ea83f8ce3c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e110d38c-4b36-417e-9ab6-cad304a49587</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41a7af78-2394-46d0-a1d7-897b737c4fae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0524d26a-8fa5-4524-97d4-1721cd46c9d8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e73ca55c-ccb2-4626-8f66-199c5cb3c08d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76333cec-611d-4545-a169-37eaf4a405e5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>243248d2-e3f0-4743-9e6e-0518b99831cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>670d472b-1f71-4664-b6b6-a5126853ef3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fa6ef50-ede8-4ddc-970e-9ff7a6625e37</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>498c3117-cf06-400e-864e-93f43fce900a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eab509bd-a65b-446c-ae93-0a58144be813</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>04168941-7d70-4e47-92ae-18cea0ab18e5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom432-Pull-Expired Certificates" searchProperties="true" id="dfdaddc5-f9a5-4c2b-b9e4-8a4f2d2e3881">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Clean message ID" id="b8706f29-48df-433e-867a-f9b8c466ead1"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom432-");
test.finalize();</script></con:config></con:testStep><con:testStep type="groovy" name="Copy expired keystore files" id="e6df2b4f-550f-41af-b0a5-7c5b981d4fa2"><con:settings/><con:config><script>// Copy keystore blue expired
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\expired\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red expired
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\expired\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="bae53f11-5909-4ae0-ba16-e9b5b7e06ea8"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Temporize
log.info "DELAY BEFORE STARTING DOMIBUS: BEGIN";
sleep(10000);
log.info "DELAY BEFORE STARTING DOMIBUS: END";

// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Expired" id="0863da9b-b519-4688-8f4a-9190d530a213"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\expired\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\expired\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="397f63df-b3cd-4d78-a12a-0593db991820" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom432-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="7ac34d8b-c910-408b-b950-18c2b8ed274c"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="971467c0-c687-41c9-9bb4-e3a656e2c65f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6d6413f7-34a2-4ee5-b83f-37cf6bbd298a"><con:configuration><scriptText>// Delay
sleep(50000);

// Check message status
def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="92565d0a-0ac7-48fe-9cda-bff746816048" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="84e8cf0c-111f-41a7-a60e-2d75486e59fb" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom432-")
test.finalize();	

testRunner.testCase.testSteps['Copy keystore files default'].run(testRunner, context);
testRunner.testCase.testSteps['Restart Sender and Receiver'].run(testRunner, context);
testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d2822aff-64cc-4d3d-b01f-905092eaffb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b3a9d704-5f48-4b51-845e-30ad56a09d63</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>096cd24a-d7ef-4e0b-9a04-4e3fc56d0c84</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d316f7b3-f2c4-4da0-8ffe-257836a13c90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>99411964-e893-44cc-b261-1e0b8c271948</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2d6adb0d-a4b5-4d01-b9a1-b3ea83f8ce3c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e110d38c-4b36-417e-9ab6-cad304a49587</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41a7af78-2394-46d0-a1d7-897b737c4fae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0524d26a-8fa5-4524-97d4-1721cd46c9d8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e73ca55c-ccb2-4626-8f66-199c5cb3c08d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76333cec-611d-4545-a169-37eaf4a405e5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>243248d2-e3f0-4743-9e6e-0518b99831cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>670d472b-1f71-4664-b6b6-a5126853ef3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>957d7076-7a15-4a61-9e09-4b458a371cdd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8008c905-3f1f-4c49-94dc-4a3aaed5406a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0a64c039-8ecd-4aa1-bb6b-2c74c69d7ad4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d54736ab-8dc0-4094-b7ad-ea8059836dc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="aa0d8ffa-1704-4908-8a04-285e39f32ba9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Copy of Dom484-Check Pmode roles" searchProperties="true"><con:settings/><con:testStep type="request" id="784be8ee-6769-4a87-a4e9-33466f9f97b5" name="Submit Message - different roles"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message - different roles" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom484-1-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>urn:fdc:peppol.eu:2017:roles:ap:sender</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>urn:fdc:peppol.eu:2017:roles:ap:receiver</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc27">bdx:noprocess</ns:Service>
               <ns:Action>TC27Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" id="761ec2aa-0e1d-42b7-9a76-adf960920592"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5050a49e-15af-4aa9-8071-4f88d1c5b474" name="retrieveMessage - check roles on Receiver side"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage - check roles on Receiver side" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message - different roles#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="61c66ad0-b9c8-4f80-b6d9-c5887bd32a27" name="Peppol Receiver Role"><con:configuration><path>declare namespace ns5='http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/';

//ns5:To/ns5:Role</path><content>urn:fdc:peppol.eu:2017:roles:ap:receiver</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="97583343-ee3a-43e9-97f1-63f9d69f7589" name="Peppol Sender Role"><con:configuration><path>declare namespace ns5='http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/';
//ns5:From/ns5:Role</path><content>urn:fdc:peppol.eu:2017:roles:ap:sender</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:setupScript>Domibus.checkIfAnySmokeTestsFailed(testRunner, testCase, log)
</con:setupScript><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom484-");
test.finalize();</con:tearDownScript><con:properties/></con:testCase><con:properties/><con:tearDownScript/><con:reportParameters/></con:testSuite><con:testSuite id="255ac3ef-e7cf-4b56-bee4-8e3a0a6988d3" name="Multitenancy"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="90d155e7-6f7e-4182-880e-4820cd52fe0f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX1-noMultitenancy-Backward Compatibility-Security disabled-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configration" id="ab018ea6-f12c-4cac-80e2-70e99dcaa2b8"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Multitenancy is not configured (No general schema specified).  
- Set properties (multitenancyModeC2,multitenancyModeC3) to (0,0).
- Plugin security is disabled.
- Run test suite "WS-Auto-for-Bamboo". 
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="51d3ab5c-87cb-4fd4-a008-bba070194e63" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Disable plugin security" id="0ce205be-784c-47d3-a0bf-29d91c9aead2" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Disable plugin security for C2 and C3.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="028e785e-3ca0-4961-ac6e-076b8e600ad3" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
log.info "================================================";
log.info "================ Upload PModes for C2 ================";
log.info "================================================";
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);

log.info "================================================";
log.info "================ Upload PModes for C3 ================";
log.info "================================================";
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststore" id="1a735ca2-938c-4e36-84aa-83b3a7b090e8" disabled="true"><con:settings/><con:config><script>// Upload truststore for C2
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);

// Upload truststore for C3
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="7b482a3f-acb0-4a38-b504-66b179f5c6ab" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log);

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="654e2647-6936-46ea-8586-3ff5b20275ee" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX2-noMultitenancy-Backward Compatibility-Security enabled-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="e2a24333-712b-44f3-8f15-6cfd6350d422"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Multitenancy is not configured (No general schema specified).
- Set properties (multitenancyModeC2,multitenancyModeC3) to (0,0).
- Plugin security is enabled.
- Create plugin authentication users: "userC1" linked to "originalSender" and "userC4" linked to "finalRecipient".
- Run test suite "WS-Auto-for-Bamboo-Security enabled". 
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="1c0c88fc-14dc-487f-a5c1-fa6d3944157d" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="ee5b34bd-2f2d-489b-8b6a-3907c766c7b4" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="ab88ea73-3879-4a1e-8569-bfa639325faa" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2 
Domibus.addPluginUser("C2",context,log,"Default","ROLE_USER","userC1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3
Domibus.addPluginUser("C3",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="aa97927d-039e-4ba3-8295-4ca1329b45e6" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
log.info "================================================";
log.info "================ Upload PModes for C2 ================";
log.info "================================================";
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);

log.info "================================================";
log.info "================ Upload PModes for C3 ================";
log.info "================================================";
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter to WS" id="0e9bedef-6bd0-49fc-8a4b-b151cf80d8ff" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log);

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="bbbb5aa7-fb92-4cce-871b-eca767744ad7" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"Default","userC1");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Disable plugin security" id="7fdf409f-eae1-4c7c-8c59-c56559765736" disabled="true"><con:settings/><con:config><script>// Disable plugin security for C2
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Update plugin security option"].testSteps['Disable Security-no domain-C2'].run( testRunner, context );

// Disable plugin security for C3
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Update plugin security option"].testSteps['Disable Security-no domain-C3'].run( testRunner, context );
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="fe9a3d8c-06e3-4007-ae0e-bbfcc28ba61c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX3-Multitenancy-Backward Compatibility-No domain configured-Security disabled-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="ebae62e5-4bcb-43aa-a07c-6a1d5b27aa12"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Enable plugin security for C2.
- No domain configured.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (0,0).
- Create plugin authentication users: "userC1" linked to "originalSender" and "userC4" linked to "finalRecipient". 
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="f2d909ed-2142-4f5c-939a-7475b1aa4116" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="7952814a-0aa6-42bb-bd81-6f4ae215131b" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="f8281f3e-ca7e-4bc4-8a47-63559c4e85ab" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("blue",context,log,"Default","ROLE_USER","userC1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1","super","Domibus-123");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="13695c38-66f3-4417-b0f9-ba1ffb8cd3e6" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
log.info "================================================";
log.info "================ Upload PModes for C2 ================";
log.info "================================================";
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log,"Default","successfully",null,"super","123456");

log.info "================================================";
log.info "================ Upload PModes for C3 ================";
log.info "================================================";
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststore" id="3b694c46-4e00-4298-a678-1ade1d16061a" disabled="true"><con:settings/><con:config><script>// Upload truststore for C2
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log, "Default", "successfully","test123", "super","123456");

// Upload truststore for C3
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="68030b69-a5db-41f6-a246-2baad597f153" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"Default", null, "super", "123456");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);</script></con:config></con:testStep><con:testStep type="request" id="23c5622a-66de-42bb-b484-ae2974d785d5" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomXX3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="1e06e7d6-e5a7-4958-8107-a546690033d9" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="aebe977a-2d2e-4a13-b2ea-c9753c026c2b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Default", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="371127f9-e797-4c90-8981-f9063850b693" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"Default","userC1","super","123456");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="0bbfcf26-42d6-4e14-9986-76c4d98c98d4" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX3-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="08c4af5e-1a20-4a2c-91bf-bc2bd2d1e688" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX4-Multitenancy-Tenant selection-Outgoing message-Default domain-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="d1bb079f-e529-421a-adab-39c8c0a78273"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- No domain configured
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Create plugin authentication user on C2: "userC1" linked to "originalSender" and domain "Default". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="1a2dbd61-f273-4fa3-bad3-16c042c76222" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="d3fee6d8-dd67-4953-98f9-58e9439c98f5" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="4a73af65-c91d-4acb-a427-277157412ee4" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("blue",context,log,"Default","ROLE_USER","userC1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1","super","Domibus-123");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="69a47b86-c766-4882-81c1-6677bf0de33d" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log,"Default","successfully",null,"super","Domibus-123");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="b965b48f-47ff-484f-966d-828bf75abd63" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log, "Default", "successfully","test123", "super","Domibus-123");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="bab62004-cece-4f16-8d8b-a3f48cb47eed" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"Default", null, "super", "123456");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="request" id="2d4e2079-f564-4132-a4f3-4ba318848cd2" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomXX4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Default", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="29f87201-c8d8-4c74-a991-abb47bbfc5be" name="getStatus C2 Dom Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX4-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7d198b85-369e-4316-9b62-a6d658c1c01c" name="getStatus C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX4-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default" id="db729eb2-86d3-4320-a6c7-f7fc032d3dd1">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomXX4-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="7ef14ed8-9698-4995-a64a-f91a639fda9a" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomXX4-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 After Download" id="cbb69d27-e6ec-4f89-8303-85d5b95412ca">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomXX4-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="895a3bf9-ed94-4d66-b9ea-31e7db4547ea" name="getStatus C2 Dom Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX4-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="2dbdff07-0527-479c-981e-ed4025201d13" name="getStatus C3 Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX4-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="e6928111-fea4-4098-879d-07b15b333e5e" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3d030a3a-9bfd-4597-95e7-7012aaf9beef" name="getMessageErrors C2 Dom Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX4-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="bcc48351-01f2-4cca-90e8-e02d533e2b1c" name="getMessageErrors C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX4-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="f224b413-2ef7-459e-a2f2-1f049d63edda" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"Default","userC1","super","123456");

// Remove userC4 in C3
Domibus.removePluginUser("red",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="0fad7389-298a-454d-a660-461e559e6b50" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX4-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="b04f7947-a5de-432b-aee6-fd1fee90f1fd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX5-Multitenancy-Tenant selection-Outgoing message-Default properties-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="0f3b12f4-1b7f-49a3-a346-08959b8f0978"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain "domibus_C2Dom1" is configured for C2.
- No specific properties present for the domain C2 (except for mandatory Keystore/Truststore properties).
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="da2092cf-b742-4107-a135-2b5a33afdfd3" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="1baee8fc-d2d7-4b59-ad7b-fa153c91b2f1" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="83e8bdfe-9b1b-4f27-9b7f-cb347400b382" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="3fa9319a-b9e4-4744-8e8b-8c50712a1ec8" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="1fd76d8c-dba7-4867-8fff-02991647f602" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="a4d22bda-f7c7-414d-b56d-18d82c097b96" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="request" id="08e3c132-52c8-45d6-9019-666629b188c5" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomXX5-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4adee2ea-0434-483f-bbaa-95325a9b06f2" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX5-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f1f596ec-a549-441c-ade6-0636755ef23b" name="getStatus C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX5-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default" id="b536aac8-f586-4f8a-95ac-651ea9fa7ca2">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomXX5-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="d6777b7c-e890-4ad3-8b78-996273f88559" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomXX5-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 After Download" id="c8a93370-8cd4-4f11-ac1e-b18c218693b9">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomXX5-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="4ca494c8-ea19-4394-ae3e-440e5df21e54" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX5-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9cb1e362-f5b9-4954-82b0-e97effeb56f1" name="getStatus C3 Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX5-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="ff82fba7-4cfd-458b-b2df-79c0baa22270" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3932f341-ed04-4163-a326-ba6fcb4fef34" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX5-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="af2e8785-dc1a-48d0-9a6a-c535b9e7cb2c" name="getMessageErrors C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX5-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="96fdf473-1a78-4c9c-8627-e84f62d5d597" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","userC1C2Dom1");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="ebd2d462-19bc-449e-b963-3cc7db3bd6a4" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX5-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="cce8379c-2f05-4487-9618-f106f14185bb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX6-Multitenancy-Tenant selection-Outgoing message-Select correct-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="e4577fee-7a6d-4119-a53d-92873184072a"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Configure Multitenancy for C2 (enable plugin security, create domain properties file, create domain schema ...)
- Domain "domibus_C2Dom1" is configured for C2.
- Multitenany is not configured for C3.
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Certificate configured in default domain is not present in the truststore of C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="46730c2a-8805-406b-b92a-57f54fd07a87" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security-C2" id="6b3462ac-4df3-4d8c-bf39-2fc921a3f742" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="0677fd39-03e0-435d-9e6c-d318bb5ab543" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2 ("Default" domain)
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3 ("Default" domain)
Domibus.addPluginUser("C3",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="d1409304-15bf-4225-ad9f-f36ff5219ade" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");


// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="2e9e7885-8daa-4c5b-bf6b-42c3b2a0b9d6" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="32f9ede3-e82f-484e-bbdd-25480582cf49" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="request" id="bacd7ea7-d457-455b-b366-420ba87047bb" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomXX6-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="179a6154-fee1-42f9-9d8b-091892f97bdd" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX6-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d78cb6b1-a095-4708-93a9-101827a848fd" name="getStatus C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX6-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default" id="0509a61d-925b-4db2-b3ef-f813b7adda2a">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomXX6-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="b2b65763-a2c5-4c4b-9bf4-52a82c35d476" name="retrieveMessage C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomXX6-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default After Download" id="76a59f75-bb42-4db6-8bef-300b1c591471">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomXX6-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="eb928d3b-0d1f-4187-a5a9-3e9307d4add7" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX6-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="064647a3-9a32-45f1-a64d-6dcb348c03b3" name="getStatus C3 Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX6-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="f1421728-cc14-45f3-a40d-57d9861fd030" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="fd53b24e-76ea-438d-a9b5-34c2f1d5232f" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX6-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="30f4faa6-eeff-4fe8-b925-1d52b8d1dd42" name="getMessageErrors C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX6-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="82db45ff-7962-4fb6-a708-ddb5607be02c" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom2","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="bbdfebbd-b911-44db-9ddc-2e9805ef39ea" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX6-'))
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="a1ace492-a965-4507-b099-e0f4971f766a" name="Copy of Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Copy of Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://localhost:8443/domibus/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomXX611-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="d5d39934-0b22-463e-ac38-529716514416" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX7-Multitenancy-Tenant selection-Outgoing message-Select wrong-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="bbf60bd4-91c3-4671-87f3-a22387d1789f"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Multitenany is not configured for C3.
- Create plugin authentication users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
- Certificate configured in domain domibus_C2Dom2 is not present on the truststore of C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="66b84e57-6278-4550-825e-c8369b082a82" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security-C2" id="135ca4b9-a2a3-4f5a-bdcd-f9b28446bdab" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="e3fbf593-87b2-4070-bf1c-7398c58fb1de" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2 ("Default" domain)
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3 ("Default" domain)
Domibus.addPluginUser("C3",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="469c6724-a8ad-48b7-b17b-0f44b23a006c" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","special","\\Threegateways\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");


// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="4c0a299d-c4a7-4476-b8f9-58a9b47cc446" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="a676ee9e-a08b-42a7-9881-e73fa3f5ccc0" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="request" id="4cfe9920-d5d1-4834-9525-ed9d9914e89a" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomXX7-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="d1f2f748-1a1d-4194-a1ea-5c3165836fd8" name="SOAP Fault"/><con:assertion type="Simple Contains" id="768ee81b-3df0-4108-a591-d3d383c80e47" name="Contains"><con:configuration><token>Message submission failed</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="fb38bfcc-524e-41f5-a95f-92c188f1ec8e" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX7-'))
test.finalize();	
</script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="ff6afa3c-eede-49cd-87a5-7075cb23bf4d" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom2","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"Default","userC4");</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="45dee6a6-7157-4820-b247-b6c9399b3c7a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX8-Multitenancy-Tenant selection-Outgoing message-Domain name length-Min-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="2be72da6-dad5-44a8-b191-7bec8a1d3799"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain with name "a" is configured for C2.
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (3,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C2: "userC1C2Dom3" linked to "originalSender" and domain "a". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="b19d8b2b-7c0c-4ad0-a715-bb61c8acef86" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 3.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="5fbe968c-6f66-45fb-9211-a8a37859af6b" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="2d2f7c68-10cb-49c5-8c9e-200882aae66e" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"a","ROLE_USER","userC1C2Dom3","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");


// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="d4f3f818-c1bb-4d5c-827d-977ec09bf5e9" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"a");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="9aedbfd1-9527-40df-b20f-80e97cc21cf0" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"a");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="ee4f4d8b-6e65-49f3-a453-e03af265d6b1" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"a");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="385d46d3-23ed-404f-842b-76f0cff925a2" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomXX8-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom3", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom3</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="32488f33-c9dc-48d1-84d6-b48525bccfca" name="getStatus C2 Dom a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom a" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX8-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom3</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="593fa9a3-e12f-48aa-90f8-cc4f95eb6ca2" name="getStatus C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX8-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default" id="a958ad83-bab5-4b18-9284-924f3029e790">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomXX8-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="67a47496-96b0-4b99-8c98-d6ade994e9cf" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomXX8-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 After Download" id="0e193d75-3dfa-4d82-af1c-0fdf29f09e55">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomXX8-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="484b6208-12bd-432a-b503-38d958c429d4" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX8-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom3</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="560903ad-03d2-4a50-aa49-6a9860e4d673" name="getStatus C3 Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX8-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="31e07b11-4d0f-48fa-ad97-ccdcfad0d660" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="59bd4b08-54f7-44ed-93ff-8db07e3b4069" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX8-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom3</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d27af7e4-fc5e-4e9c-a200-a056c79398f6" name="getMessageErrors C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX8-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="08de0582-7bec-4557-9235-59f58bd3db50" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("blue",context,log,"a","userC1C2Dom3");

// Remove users in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="bc9bfff6-8173-45e0-bab3-24e75cfd83c7" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX8-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="ab3a3253-57e4-4ee4-b144-981a3822be6c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomXX9-Multitenancy-Tenant selection-Outgoing message-Domain name length-Max limit-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="4eab07a8-8a7b-4380-ade6-b2dd44446daf"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- domain with name.length=50 is configured for C2 (domain_equal_max).
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (3,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C2: "userC1C2Dom3" linked to "originalSender" and domain "domain_equal_max". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="4db7bfba-8913-4f15-8565-947777aae7e1" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 3.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="fae09c53-1aef-49bb-8067-bd4a34fb0db4" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc","ROLE_USER","userC1C2Dom3","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");


// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="58fc1b83-80eb-49e0-9f1e-aaa5dc239d61" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="64a38416-c59e-4d52-b6ad-3c7a42ab8536" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="13726140-100d-47b7-9be2-0d5d4d67c599" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="request" id="07852235-69de-42f7-a9f2-837394701fb1" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomXX9-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom3", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom3</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="814bd513-9442-4d9a-bdbc-c48e438eb925" name="getStatus C2 Dom SECOND"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom SECOND" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX9-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom3</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="95c33662-92f8-4692-9cf2-3d0197a22245" name="getStatus C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX9-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default" id="2ab6a4ef-13ee-4fe2-886f-60fd50060372">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomXX9-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="7288304a-27a1-4dcc-b77c-69c6c12f8cce" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomXX9-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 After Download" id="5f232d34-9b65-4624-8394-67f4a9f4bc28">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomXX9-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="55f5112b-1da6-4a31-8058-8de09e71b138" name="getStatus C2 Dom SECOND After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom SECOND After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX9-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom3</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="bfe88532-3fc6-472b-b842-dbc9df877145" name="getStatus C3 Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomXX9-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="5126da7d-a33d-4fb9-8268-bb0e5adeee2c" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="2ba32e13-84bc-47f1-80ab-96e2e15bb657" name="getMessageErrors C2 Dom SECOND"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom SECOND" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX9-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom3</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="11bba286-a8ec-4873-b6b8-dfa400f2b7d2" name="getMessageErrors C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomXX9-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="77e7cdb1-5a82-4423-8ec8-3186c2ff4e66" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("blue",context,log,"domain_equal_max","userC1C2Dom3");

// Remove users in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="bdd3878d-9f13-4f14-a775-03ea2131a8a7" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX9-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="738219a7-0fd2-4864-845d-c07ccfa49539" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX15-Multitenancy-Tenant selection-Outgoing message-Basic flow-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="2a53a406-200b-4a22-b90c-74834619b055"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="7d5ffed1-1bf7-452b-bee6-05709ebe16c7" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="c87d91a2-a40c-480f-a3a3-375b84868827" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="52aa2d76-3705-4b81-b0f6-9be67ac4f618" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="c7e47b5b-6002-41c0-92d1-73236e9b0e93" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="34b8c159-400d-4964-afe4-5a367f55e8ac" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="30c77bda-84a8-4ef0-8401-969ae295066c" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom2");
</script></con:config></con:testStep><con:testStep type="request" id="9c207786-0a6b-44d7-af0c-ca9512a47bc2" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX15-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Dom2")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="08ef0975-dca1-4515-9869-c7d86e1f68b2" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX15-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c4b98d5b-f2a5-4975-811f-fda91bbfd2dc" name="getStatus C3 Dom2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Dom2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX15-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Dom2" id="e8ce8651-7b76-447b-abad-bc64ac8f0e2a">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Dom2" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomX15-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" name="List Pending Messages C3 Dom1" id="a73aa829-6221-4be7-8ff3-8a744e687845">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Dom1" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="b2792745-dd75-447c-b41f-c77ca3969365" name="Not Contains"><con:configuration><token>-DomX15-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4C3Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="e079927b-4e43-4ce9-9ca1-42f0b066ee06" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomX15-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Dom2 After Download" id="a11881d1-942a-4825-93d1-4c62983da385">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Dom2 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomX15-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="fbc569a0-966e-417a-8888-dfa45922b600" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX15-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="cc7483ae-2208-4101-b9c5-78b12e1811fb" name="getStatus C3 Dom2 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Dom2 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX15-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="986226cb-ec2b-45bd-984c-e3761704d50b" name="Not SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b1c30e25-7b17-4e31-9ea2-7b4dd845749f" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX15-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a60fffd3-38ba-4b58-ba08-0b412e5f71d0" name="getMessageErrors C3 Dom2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Dom2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX15-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="deb110de-f01d-4d2d-a317-7c57c30e5d76" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="e26bcf7c-8b0d-42d3-b3b8-3a4cf1c24be7" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX15-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="4337e98d-0008-483a-9ee0-902a487cec64" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX16-Multitenancy-Tenant selection-DB name omitted-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="be763f5c-b4f4-4c19-ab4e-e9f2d6974d04"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schema.
- Configure Multitenancy for C2 (enable plugin security, create domain properties file, create domain schema ...).
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Schema name|db username (oracle) is not defined in the domibus.properties of (C2,domibus_C2Dom1).
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="e0224929-3d85-4498-8cb3-031dfb920e85" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="4b1ed336-1af9-45a2-81e1-2c25e81ab697"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that domibus fails to start. 
""", log, testRunner) 
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="df3e6f56-bdf4-4a2c-87b7-53db50f79e2f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX17-Multitenancy-Tenant selection-Wrong DB name -ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="3f554f21-97fc-4500-9587-00ad8648abb2"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schema.
- Configure Multitenancy for C2 (enable plugin security, create domain properties file, create domain schema ...).
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Schema name|db username (oracle) is defined with a wrong value in the domibus.properties of (C2,domibus_C2Dom1).
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="4e61321a-61df-4b3b-afa7-b5470b7a6e9b" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="1fe738bd-a359-4be7-8473-60287aab1f98"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that domibus fails to start. 
""", log, testRunner) 
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="f812149b-aa20-40df-bf3a-4f58a4390b32" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX18-Multitenancy-Tenant selection-Domain security properties omitted-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="23f545dc-97a1-4d5d-985d-ab0366c686a6"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Configure Multitenancy for C2 (enable plugin security, create domain properties file, create domain schema ...)
- Domain "domibus_C2Dom1" is configured for C2.
- Multitenany is not configured for C3.
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
- Certificate configured in default domain is not present in the truststore of C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="45b2ebec-ba98-4dbd-8d1f-70aaa06a2d38" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security-C2" id="29d32f9d-09cc-4a23-8dc6-8691b8d51325" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="76101528-f646-4e8a-938a-426083bbb21a" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2 ("Default" domain)
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3 ("Default" domain)
Domibus.addPluginUser("C3",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="c5ca9e0c-3ec6-4d54-9470-8534424a4b0c" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");


// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="5a49134a-b616-448a-8e88-fcb227706518" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="568580f3-b29f-496b-894c-a47a56448125" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Disable property-Test-Keystore Location" id="ef2a870e-279a-437d-86e6-05de2f17307a"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Disable domain1 property "domain1.domibus.security.keystore.location".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2-Test-Keystore Location" id="61f7e3ea-4ec6-4118-b4ad-355cac46cc96"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message-Test-Keystore Location" id="7d0a1150-c77b-4ffc-8a6c-d943c9a61d67"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-DomX18-')
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="80e230f7-a9eb-4508-81fc-56d63a59e3bf" name="Submit Message-Test-Keystore Location"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Test-Keystore Location" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX18-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5d9abea2-9490-493d-a187-c6db35f8595d" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="a68dc8c2-2b15-4e36-88e2-5ab4703fbd0c" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="c098a513-f126-4a6b-bfd8-5c54d942b0f4"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Disable property-Test-Keystore Type" id="a211afd2-74b9-449a-8602-3c0d615f8f10"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Disable domain1 property "domain1.domibus.security.keystore.type".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2-Test-Keystore Type" id="66f9bb21-686d-483e-a5c7-165c9d16cf6d"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message-Test-Keystore Type" id="33ff9e37-c7e3-4db8-b8e4-2a3492ec1d94"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-DomX18-2-')
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="c00d6059-15b7-427b-89c1-21d041206645" name="Submit Message-Test-Keystore Type"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Test-Keystore Type" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX18-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="eb2137b8-0cac-4e6e-b452-d5b7f11f6d3a" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="f4f887fb-555a-475e-b355-bc743b9e56fa"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Disable property-Test-Keystore Password" id="04e42d27-0ee6-49ba-a01b-0cd4dfe33d9a"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Disable domain1 property "domain1.domibus.security.keystore.password".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2-Test-Keystore Password" id="0d021323-75e1-4356-baa1-d3fff8949d18"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message-Test-Keystore Password" id="a27145a6-6949-4a7f-9e1c-30785a3883eb"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-DomX18-3-')
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="72e18bf3-49f7-423e-98ea-d6fefcd8cd4f" name="Submit Message-Test-Keystore Password"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Test-Keystore Password" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX18-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="f540a764-fe0d-419c-92d6-c8e4619d0326" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="fcb73856-b9d6-4ccb-9c84-2aa3d3683093"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Disable property-Test-Key Private Alias" id="3a362829-853e-40ea-a324-e49b90a823f1"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Disable domain1 property "domain1.domibus.security.key.private.alias".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2-Test-Key Private Alias" id="06725bd5-7168-41a7-a794-1e4985c1afe7"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message-Test-Key Private Alias" id="c190dd32-fac0-44ee-a238-da9314ef515b"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-DomX18-4-')
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="a4613e75-6806-45c6-b799-208f192c9d63" name="Submit Message-Test-Key Private Alias"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Test-Key Private Alias" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX18-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="9aabe6b6-d8a7-43db-a459-096f552ebd2d" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="63cf2877-a1a6-4717-a104-651dc69db958"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Disable property-Test-Key Private Password" id="493d15e0-f3e0-40db-a36f-0a149253926e"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Disable domain1 property "domain1.domibus.security.key.private.password".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2-Test-Key Private Password" id="a9394e99-b522-437e-99c5-c0e826e2fbdd"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message-Test-Key Private Password" id="0fcbe1e4-3c46-4ba7-b137-a8984ea6ea2e"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-DomX18-5-')
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="e3d76d82-cfb6-40a2-a7ce-a30cb5c9143c" name="Submit Message-Test-Key Private Password"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Test-Key Private Password" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX18-5-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="0cf1bc8e-edee-409e-a9bd-09c3ec423dd2" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D5" id="8c5303bd-4023-4cf2-912b-0e6d65df0f7e"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Disable property-Test-Truststore Location" id="08fd6ccb-e990-4a94-9f33-7acd815d96f2"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Disable domain1 property "domain1.domibus.security.truststore.location".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2-Test-Truststore Location" id="97d577e5-0194-4e3e-965e-a04ab5ab7dc3"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message-Test-Truststore Location" id="b615dadc-c5f0-4ea5-a2a1-841593276769"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX18-6-'))
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="ee84fb0b-8cc1-4829-955c-836ef5e61770" name="Submit Message-Test-Truststore Location"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Test-Truststore Location" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX18-6-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="10bbe664-862f-4573-831c-903db268b3f3" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D6" id="8999a314-09fa-46e3-842c-8d07f4b51107"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Disable property-Test-Truststore Type" id="f44f8e8d-580a-491c-a15c-485b98a70b27"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Disable domain1 property "domain1.domibus.security.truststore.type".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2-Test-Truststore Type" id="aa0d8933-1e7e-4bd1-9fb1-a61ed6d71599"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message-Test-Truststore Type" id="6323a99c-4f5f-4823-bf02-966984caf275"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX18-7-'))
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="fae94dd1-8aee-4070-a59e-cd076d6764a1" name="Submit Message-Test-Truststore Type"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Test-Truststore Type" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX18-7-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="850e22e9-d565-4581-830e-9f124dfcd156" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D7" id="c59e6659-7567-4c2a-b3b9-74d02af987e6"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Disable property-Test-Truststore Password" id="f211afbb-c536-4cc5-9b2d-b316cbd518f7"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Disable domain1 property "domain1.domibus.security.truststore.password".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2-Test-Truststore Password" id="5ce1307c-7801-4dd6-8c9d-a33fbf1da6a0"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message-Test-Truststore Password" id="88e84700-b46e-4bd8-8cb9-d10d0e49f400"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX18-8-'))
test.finalize();	
</script></con:config></con:testStep><con:testStep type="request" id="d8386789-711c-4305-8a64-9b848ced4104" name="Submit Message-Test-Truststore Password"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Test-Truststore Password" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX18-8-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="GroovyScriptAssertion" id="b5e04abd-9694-4af8-b216-c054050e3699" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="9f48bb0d-d5dc-47a1-9749-794b65c1d634" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom2","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="e6eb6f56-d5f3-4cb7-bab9-12244d14c158" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX18-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="f011dd8c-7493-4f6b-b0b7-498bb0ee6dcf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX31-noMultitenancy-Backward Compatibility-Security disabled-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configration" id="a4b654dc-3dc8-4f39-a70a-2956c9c80b98"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Multitenancy is not configured (No general schema specified). 
- Set properties (multitenancyModeC2,multitenancyModeC3) to (0,0).
- Plugin security is disabled.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="e63d6ed3-92e2-444a-bbbc-654114be82fd" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Disable plugin security" id="fe4adc91-2486-40a4-a4d5-c58e28df5e29" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Disable plugin security for C2 and C3.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="05b115fb-7958-4706-b42a-366996e0d654" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
log.info "================================================";
log.info "================ Upload PModes for C2 ================";
log.info "================================================";
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);

log.info "================================================";
log.info "================ Upload PModes for C3 ================";
log.info "================================================";
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststore" id="ffcb54e7-bf7d-469f-ba8d-2c5e3db34159" disabled="true"><con:settings/><con:config><script>// Upload truststore for C2
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);

// Upload truststore for C3
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="a0127d34-0bd6-42b9-abf0-9f563736208f" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log);

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="afdfaf31-f4b7-46da-9a81-23a7a9872cf3"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="e2fd6773-0327-4cce-8d9a-5d5f744421d2"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="fca9127a-9712-41c7-9e4d-af3a1d9a2811" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX32-noMultitenancy-Backward Compatibility-Security enabled-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configration" id="d0498eba-e7ec-4bb5-a97d-8fd6d6c46bfd"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Multitenancy is not configured (No general schema specified). 
- Set properties (multitenancyModeC2,multitenancyModeC3) to (0,0).
- Plugin security is enabled.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="860bfea9-6584-436b-afd9-545db929951d" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="1eef32f6-0c81-4dea-a1c5-35398daa3008" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2 and C3.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="40a312b2-be59-44f5-bbf4-37260018736f" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
log.info "================================================";
log.info "================ Upload PModes for C2 ================";
log.info "================================================";
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);

log.info "================================================";
log.info "================ Upload PModes for C3 ================";
log.info "================================================";
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststore" id="c7039c3b-e377-4bf6-ad96-9095e184a497" disabled="true"><con:settings/><con:config><script>// Upload truststore for C2
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);

// Upload truststore for C3
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="17bb6114-89cf-4406-8afc-0f194aa6ab4b" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log);

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="645b8e05-3a38-4f5e-a3a4-1dda4740b275"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="bc942b24-8d30-4f23-9c7c-5b2d42566a09"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="983b1999-d069-47a0-b087-ae0940bedb2e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX33-Multitenancy-Backward Compatibility-Default domain-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configration" id="5b4cebe3-9095-4e40-a1e3-9ce82327a271"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- general schema is created.
- Multitenancy is configured for C2. 
- Set properties (multitenancyModeC2,multitenancyModeC3) to (0,0).
- Plugin security is enabled.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="cfc65020-c373-4e57-a922-1b6c819a0635" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="755e6c82-b4b2-4972-b3e7-920009006edc" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
log.info "================================================";
log.info "================ Upload PModes for C2 ================";
log.info "================================================";
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log,"Default","successfully",null,"super","Domibus-123");

log.info "================================================";
log.info "================ Upload PModes for C3 ================";
log.info "================================================";
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststore" id="fc086a30-d347-4e0b-9d6b-37077556495f" disabled="true"><con:settings/><con:config><script>// Upload truststore for C2
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log, "Default", "successfully","test123", "super","Domibus-123");

// Upload truststore for C3
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="84c3f520-1ed8-486b-aa0e-8fbb6f350f85" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"Default", null, "super", "123456");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="96d5e7bd-0a74-4372-a0f4-04f9e698c7f2"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="0b3d2fb4-2b72-4481-9f31-d289549b0bff"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="7825df5e-7fd0-47c3-95c8-39c73758abf1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX34-Multitenancy-Tenant selection-Outgoing message-Default properties-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="d8886d4d-2ce9-4ed4-b896-1c19476c9572"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain "domibus_C2Dom1" is configured for C2.
- No specific properties present for the domain domibus_C2Dom1 (except for mandatory Keystore/Truststore properties).
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="177ff9e1-88be-422b-96d4-169cc378efdf" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="26c76c83-2e44-44e7-9154-1734c6d8428d" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="a7fd846b-8033-4faf-9c8b-49ab5e17b5da" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="4ffcb002-21bc-4de0-967e-3a4a7457ec39" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter FS" id="0b582c4b-dd96-4fbb-a9f8-c4026a13e774" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="69c9ee6c-62a9-4726-a455-9bcf399971fa"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="9ba6cf30-d144-4444-9a40-6de05505e89c"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is submitted.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="0baaac4c-9206-4ba4-beb0-a9f1f6bbdf67" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","userC1C2Dom1");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="3fe318a7-3a67-4f45-a6f0-abffff0e6f08" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX5-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="39a39ad7-4fcf-4635-9f5c-3a336c849a6d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX35-Multitenancy-Tenant selection-Outgoing message-Select correct-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="bf1b2f8f-94aa-41a2-b613-78dc1d8ceeee"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain "domibus_C2Dom1" is configured for C2.
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="5730304f-8dd3-419d-958f-d159f6e672ee" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="f07360fd-72ed-4966-a8f0-90ee3d403a11" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="cdad265a-a2fc-48c2-bea7-2c58ac45f35c" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"Default","ROLE_USER","userC1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1","super","123456");

// Create users in C3 
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="fa6d2087-0fc3-4c15-b703-97db7b63603e" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="617b58a9-62d0-4c3d-bba3-94e112cbcc96" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter FS" id="28421fd8-89f2-44c5-a986-fb886be39cfe" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="35d532b3-f740-4edd-9ff4-8028068612f6"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="fd185df5-4f70-44a0-afdf-ea23bc80352e"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="e023855e-5b5f-4419-9b8d-279ee854098a" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX5-'))
test.finalize();	
</script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="0a48087f-caeb-45d1-93f3-0f6e8b51822c" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="690e3469-eca8-4413-bd17-bf8a33a39905" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX36-Multitenancy-Tenant selection-Outgoing message-Select wrong-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="79f9a13d-ad35-41c5-8643-d512098f3f44"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain "domibus_C2Dom1" is configured for C2.
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="a3ca0b2d-6b09-4071-adb4-7d87a0ffa806" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="8d4ba2d0-6016-4cb1-aaec-2bf96f8d059f" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="8661e7cb-3f7d-4e93-abc2-467e4fe0cc52" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="f634bc38-f3c7-49b5-b769-fc2c8b967032" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="e33d837a-0f7f-4356-a690-c2499049398a" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter FS" id="359ceb4a-cb3d-421e-ab21-384e87a2640b" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="48105dc1-be9d-4da7-a9c5-4eba1bc36717"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom2\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom2\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom2\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="58073891-8fc7-4f7d-ae5b-e07e84e1e8b5"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is not submitted.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="5e8647fc-23e4-45d8-a6dc-92046c6b385a" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomXX5-'))
test.finalize();	
</script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="fad46f65-60ea-4517-842e-34fa0cd8a601" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="331985f0-be73-45ed-a93c-4c15b393c2f3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX37-Multitenancy-Tenant selection-Outgoing message-Domain name length-Min-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="12f2ed56-6b2e-4503-b7e6-013f3fa62e9d"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain with name "a" is configured for C2.
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (3,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C2: "userC1C2Dom3" linked to "originalSender" and domain "a". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="ec365d70-0dc8-441d-89af-6d31138a1bcd" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 3.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="6c30dd2c-32d0-447a-9f24-72028f111e3b" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="defeb5c5-d18b-4e2d-a34b-b4e54c2a2241" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"a","ROLE_USER","userC1C2Dom3","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");


// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="aeafcc8b-ad93-4ffc-9fb2-690c9ddef0c0" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"a");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="1b9f6279-8375-4f24-b0a6-8d58c533fbe5" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"a");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter FS" id="09c95662-e638-49a1-9d62-c063f883eb36" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"a");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="7a7ca689-b571-4984-990c-0d132b67d794"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\a\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\a\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\a\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="6146bbd3-aa55-4155-98b3-8ed852d2df02"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="870c3c9b-a52c-4c61-b33a-c9e5631eca65" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("blue",context,log,"a","userC1C2Dom3");

// Remove users in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="acec6fbb-f04e-4a41-9b5f-911c44c6012c" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX37-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="b783a983-9a73-44df-936f-ef963c30ebdf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX38-Multitenancy-Tenant selection-Outgoing message-Domain name length-Max limit-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="c15ef685-19db-47c6-bec7-0574dc7d122b"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain with name.length=50 is configured for C2 (domain_equal_max).
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (3,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C2: "userC1C2Dom3" linked to "originalSender" and domain "domain_equal_max". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="4e0a77f7-4ed7-46b1-848b-79e2897fa0ef" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="595d3732-8e01-4575-a7d9-ed24071da587" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 3.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="613f4f41-f59a-465e-9edc-27771d3c403a" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc","ROLE_USER","userC1C2Dom3","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");


// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="cf6b386f-2068-423e-8414-0e4e468b6d97" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="e886e7b2-e9d7-4d30-a377-df79b7e8c89f" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter FS" id="853d6381-420b-4989-8e65-39edaf2ad9e0" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="abc9d6be-96b8-4ec3-b691-56d85e980139"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="c1cee7b3-7406-4fcd-9391-01c772451bbb"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="bc2b181e-23aa-4b61-b8e5-abb25413040d" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("blue",context,log,"length_equal_50_aaaabbbbbbbbbbbbbbbbbbbbcccccccccc","userC1C2Dom3");

// Remove users in C3
Domibus.removePluginUser("blue",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="ac214060-72c9-4a67-8790-9adccf09878b" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX38-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="af3269d8-f600-44ac-8c6e-f75e0e0054c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX41-Multitenancy-Tenant selection-Outgoing message-Basic flow-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="374cad7b-1426-415c-8076-d124c48f8dc7"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="2ba7d3c6-5a17-4f08-9226-3ac92a593dba" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="b68c3be7-8a16-44c7-b826-e5e0de037960" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="718ec977-2241-4835-a00c-7204dd999683" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="b0fc3a82-4b28-4587-a088-291adebad7fd" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="8e30e136-d7f9-44cb-9678-dfeaf4b2fa9e" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="9b2ffd3d-121f-487b-aa30-b8be026ef720" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="70d11267-55c4-48f2-86e2-f734745a9a16"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="89a7d4c7-558d-4610-a3a3-02a5bd3430f7"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="68c856e1-8823-4a8c-85e3-b7bc5e2a49b0" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="f4a0212a-d3d5-4493-b6c9-1344f4589441" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX41-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="405ba2b6-f323-4774-a9ba-03a460862128" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX42-Multitenancy-Tenant selection-Incoming message-Domain found-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="93f2e44a-badb-45ae-90cd-e01903e7f00d"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
- Upload PModes in C2 and C3. Append strings: ?domain=domibus_C2Dom1 to the endpoint of C2 and ?domain=domibus_C3Dom2 to the endpoint of C3.  
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="f8ceb257-c5ca-4915-baaa-90584405d1dc" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="cadfd03d-ac7e-4907-9890-f5e15f11d286" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="5251ead7-24be-4262-8bbf-117075d6b4fa" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="40a40ba0-f87f-416e-93e3-5dc8c0b8e332" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="0cc52474-dec5-4c5a-9053-f6440f09e67a" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="a331a2ac-2c64-4dc3-9a5d-7387495a32c8" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
//Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
//Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom2");
</script></con:config></con:testStep><con:testStep type="request" id="045e376a-4112-4880-9b8d-52c0d22d55f1" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX42-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Dom2")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="0ce5e246-061a-422c-be37-031419257383" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="e9789dfa-fdd3-4696-ad2d-53f750e0326d" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX42-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="1f08387a-71b5-4b86-9f67-a4611a347b1a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX43-Multitenancy-Tenant selection-Incoming message-Domain not found-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="6029e6d4-f21a-408d-b3cd-48e0f8959427"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
- Upload PModes in C2 and C3. For PModes uploaded to C2, append strings: ?domain=domibus_C2Dom1 to the endpoint of C2 and ?domain=domibus_C3Random to the endpoint of C3. 
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="b931aa5c-3096-43a6-a457-5b9c2c92f098" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="ec6599f1-e747-4521-b891-456847661a1e" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="2ec40615-4a28-4190-acdc-7c7531880d9e" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="213015b8-dbfd-4dd3-8ea7-57aa7bb62f9e" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\randomC3Domain\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="ec17497c-9d7e-4a32-82dc-70852dc9a2cc" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="f4878057-4567-42f3-8750-bc6514c2d931" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom2");
</script></con:config></con:testStep><con:testStep type="request" id="692e349a-5040-4d43-b2a2-19b45cc66526" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX43-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Dom2")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="d4e734d4-b275-428c-ae4a-2f94f0eafb87" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="f339a006-7a4b-4695-ad0d-bbde1742218d" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX43-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="b6b9a0d1-4ff2-41b3-bbc7-8f0387424cf4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX44-Multitenancy-Tenant selection-Incoming message-Domain wrong-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="ed2427d3-e4a6-4997-9d47-6929c3118294"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
- Upload PModes in C2 and C3. Append strings: ?domain=domibus_C2Dom1 to the endpoint of C2 and ?domain=domibus_C3Dom1 to the endpoint of C3. 
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="89f96df9-c5a3-4ff7-a70e-1d8d437fa587" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="f6bc4e40-d308-42ae-add6-81dbc8ebc388" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="07964bcf-a29e-410c-8fd1-4ac7d05a4b89" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="71ab0269-0ad6-4926-af41-db6dcfa7f8f9" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom1\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="7680c527-a505-451c-bcc3-30c48d7f7c0c" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="339307a5-1b87-4075-8287-c8e22d1138a2" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom2");
</script></con:config></con:testStep><con:testStep type="request" id="aa67d596-b560-4d68-9a96-cde5f7d77505" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX44-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY", "", null, null, null, "C2Dom1", "C3Dom2")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="41394bb1-64cd-414d-9768-fd21cdca4443" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="b72ae6a1-08b3-4969-9861-648c32cf921c" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX44-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="6ab9523b-2588-427c-abc8-a8ea006ba069" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX48-Multitenancy-Tenant selection-Incoming message-Domain found-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="d7dd0d95-35a2-4f57-9566-b4d92e4bf037"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="71dcdddc-35be-4dde-8bd2-107e508c68f6" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="f9e2b763-939f-452f-9b63-43775aa68901" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="9254b95c-8c9e-44c8-bdc1-41e66ee2f84c" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="63d51670-7305-453b-a376-b8e02c11a81b" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="7f39761a-6da4-4f01-8ba8-f5735acafe5b" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="02c2ec7f-fb29-47e6-956b-c232dace3991" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="fdeaf985-e043-4847-96e6-25a7bbbebc93"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="251c342d-65ee-4299-ae7a-68e371b4d77c"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="87bc43f2-287d-4ecb-9eab-9c15e0de61c4" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="c862cda9-15cd-48c6-8743-60d67ba98e89" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX48-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="52ed8413-84bc-46c7-a8d7-5fc6b50f9227" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX49-Multitenancy-Tenant selection-Incoming message-Domain not found-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="a2444c10-8600-4c60-ae36-8b2d0f711c63"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="1bd174c1-c95f-4600-97e5-d4a2f0114138" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="92b4bcce-b170-4446-a7b9-abf54b533575" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="65434bdd-b16d-477c-8c9d-889225b8d6e5" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="f3ceed70-c695-4dbe-8233-eefa5ef9d251" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\randomC3Domain\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="9a6eb352-b795-4c44-bb78-a0c17f3016b8" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="df9d2732-56ec-41a4-8a8c-56ae8dda6ca2" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="a62da815-8372-4039-a42f-0246a74b5733"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="e02818c8-d0cf-442b-a5ec-d0841a58b38b"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is not acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="0e7c8c89-4a31-4237-b155-45b7a2c95fd9" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="1eaec13f-acc4-4ff4-804b-08cb096f8c75" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX48-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="ae8fe4b8-f236-4886-b699-835ab6278c48" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX50-Multitenancy-Tenant selection-Incoming message-Domain wrong-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="e02c7721-1d5e-4802-be88-42b77e9bb375"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="16ccf317-392d-4bea-8873-9fef44c6718d" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="9259e8f2-1b9e-4b42-afe7-601a471f90c4" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="d528ab2f-d75f-4131-94d8-c4be8acdb69d" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="4f117ca1-fab7-469c-93b4-9e0c1b584796" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom1\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="5986ab92-a517-4b02-8d44-1beb6f6374dd" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="110e8668-03de-43bc-9324-cd67d1db7ecf" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="d70a12b4-0731-4801-9c3f-472b84998fc2"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="dff79ff1-fe72-4dea-9675-35f5ef3bd52c"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is not acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="1b1ab3d3-dcca-4cb5-8eb1-e1bf060e753b" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="254e4105-0c62-4b91-8e78-fb462dd19bfd" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX48-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="bdb88f15-e961-48b0-9c65-d127a914601b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX51-Multitenancy-Tenant selection-Incoming message-Domains-folder-Creation-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="b53d8100-bcca-4de7-afe1-60e8248178eb"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is present in the truststore of domain "domibus_C3Dom1" and "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="1f23a1b4-cc97-439f-8f72-369c08ff913d" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="a8f85f95-a57a-404f-90e3-36c6c954a0e0" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="ae37ee61-ddf8-4b4f-937e-5c26c7f0b629" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes 1" id="6e7b13c7-ff87-4a36-948d-753c36ae7a68" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
//Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
//Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores 1" id="912c6ad3-3ab5-4a4f-966e-2428ddcbb3c6" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="14405c30-78ea-410b-8761-58d09f02a572" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 1" id="7b2567db-7586-4751-94a7-25920ebda911"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes 2" id="63ebc9a1-570d-4174-b039-7294b18ccdf6" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom1\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom1\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores 2" id="897bdd57-ee33-4106-835c-8b964efb6494" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message 2" id="23b1bc78-b607-4890-911f-07f2a1630c40"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="97e1abee-c549-40ae-823d-9e4113164cab"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that a folder is created in C3 for each message inside each targeted domain folder
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="5f912a53-2c88-4851-9f7b-123eca7d2d28" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="a00c56ef-2cfd-4b8a-8e7c-f1e18707cb43" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX41-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="ae22f1a4-73b8-42af-8689-b21bb82d9ca0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX54-Multitenancy-Security-Outgoing message-wrong user password-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="01547392-31fe-49e8-9eb3-7c287afbd720"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="7303816d-4ca4-4b47-b53d-3a856aaf2ddf" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="052c4b39-4223-45ec-b6fb-716333acc1de" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="fcdbdf3e-cdc2-49a5-9bb6-94de36b2a79d" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="71691631-d91f-4f34-ba7d-29dbd321d2f0" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="b179c723-13c3-4046-ba6f-1e371749cfef" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="d9d1a2a2-aedf-4bcc-a75d-59f469ce6f50" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom2");
</script></con:config></con:testStep><con:testStep type="request" id="4e7dc4e7-0f14-413e-b32f-1f80c12e1b12" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX54-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="06d13f0f-a30b-4107-baab-cc4fead484bf" name="SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>wrong</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e6f31510-14a8-4d7e-9bff-d5bdc4c8fc6f" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX54-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="4867ee3d-c218-4366-849a-378a3bc12835" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="967113af-68e4-470a-9c20-32753294e434" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX54-2-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="2fe9b01c-1469-4375-bb24-d64cf813a08a" name="SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>wrong</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Dom1" id="91f142b5-0669-43e9-8d8a-930c795eadc8">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Dom1" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Not SOAP Fault Assertion" id="52db5494-848c-4f5d-8a5b-ddfece7a5df4" name="SOAP Fault"/><con:credentials>
                            <con:username>userC4C3Dom1</con:username><con:password>wrong</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="dbdee0b9-f5a3-42f6-b48a-d2bbb6671433" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomX54-2-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="Not SOAP Fault Assertion" id="9d31ce46-fe7c-4eaa-8af5-2ad6ae3a4348" name="SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>wrong</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a4b2a5de-f10c-43c6-b9ef-b0c6fbb42097" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX54-2-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="38b479f4-c44a-4bf9-a489-20593b70ce4a" name="SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>wrong</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="579cc756-ac41-4c65-8e2f-2a03ce8e8b19" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="cb554a85-71c2-4e6f-9d1f-c24adb8dc114" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX54-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="f3675bf8-a08b-4a96-a078-96064dbcf8ed" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX55-Multitenancy-Self sending-Different Domain-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="51398741-7b8e-45ae-beff-2e5b6f93e21f"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="a5f98fae-3ecf-453a-bc7b-6a9da51afde6" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="0766b112-0753-4cd4-9710-a104fe799fa6" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="c091225d-7d6a-461b-b112-80f94a72fce5" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="60224e12-689b-4f31-89da-3239a957130e" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="59c71911-14b2-4b7c-bed1-72f3bde68cb6" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 Domain1 ================";
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC2Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
log.info "================ Upload pmodes C2 Domain2 ================";
Domibus.uploadPmode("C2","default","\\red\\domibus_C2Dom1ToC2Dom2\\domibus-pmode-red.xml",context,log,"domibus_C2Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="acb7c5b5-eed1-4d0e-a2dc-ff0491d251df" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 Domain1 ================";
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
log.info "================ Upload truststores C2 Domain2 ================";
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");



</script></con:config></con:testStep><con:testStep type="request" id="c2837191-4bbd-4e42-bb7f-ae2d75170463" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX55-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C2Dom2")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="54ce57af-34b2-494a-a676-9fbc235b2b0e" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX55-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="53f72f7f-da18-44f4-a7bf-0ebc93627109" name="getStatus C2 Dom2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX55-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C2 Dom2" id="537f389e-d75b-463b-8ffd-b7a255104445">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C2 Dom2" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomX55-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC1C2Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" name="List Pending Messages C2 Dom1" id="450e52f0-7ed0-44bd-8867-4e75266db336">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C2 Dom1" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="b2792745-dd75-447c-b41f-c77ca3969365" name="Not Contains"><con:configuration><token>-DomX55-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="014b0dc6-f25b-4fa0-a93d-51141f04fbca" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomX55-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C2 Dom2 After Download" id="9e584a4a-bbeb-4acd-a051-ffc6167ecd2e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C2 Dom2 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomX55-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC1C2Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="54a40a13-0c11-4b36-8962-80281249b4b5" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX55-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4a78450a-4e89-48da-9fbe-febd027d7100" name="getStatus C2 Dom2 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom2 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX55-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="986226cb-ec2b-45bd-984c-e3761704d50b" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e7da3630-0d55-4715-a782-bf987678b1ba" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX55-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c265d8f6-6db9-426e-b11f-0fe63bcb7606" name="getMessageErrors C2 Dom2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX55-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="79a3c379-6047-4b1a-8846-4068a456314b" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="276c747f-b8cb-4271-a7ee-366dbbf80759" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX55-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="ae21c553-62e0-406a-a62c-0ce71b04ff75" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX56-Multitenancy-Self sending-Same Domain-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="295bcc88-7ba5-435f-ac49-6bf006129280"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="b51d537d-9c90-4b97-8796-72e620b27568" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="69c03ee2-b41b-4fed-95b6-10e4ea916d17" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="5275ca73-5123-46dc-bf41-f525a7fdc69f" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="eeb31404-1601-4362-b411-daf5ebdfd7c9" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="4cf69cda-4398-4f8c-b957-c266765386fb" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 Domain1 ================";
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC2Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
log.info "================ Upload pmodes C2 Domain2 ================";
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC2Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="69b077d7-1634-4e49-963a-326231a3409f" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 Domain1 ================";
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
log.info "================ Upload truststores C2 Domain2 ================";
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");



</script></con:config></con:testStep><con:testStep type="request" id="d1c94e1f-3e0e-40e8-aa94-aa504767ccd7" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX56-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "", null, null, null, "C2Dom1", "C2Dom1");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="670cfbee-b9f9-4bb0-80c4-bd95fd82ce07" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX56-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="bd3c0fb4-9663-4b91-8b14-022d11aeb25b" name="getStatus C2 Dom1 R"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 R" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX56-_1</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C2 Dom1" id="93408368-2a24-4b1b-9450-e971a4ec6b23">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C2 Dom1" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomX56-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="3bea0c89-4959-4111-afb8-bf3889ba0d9f" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomX56-_1</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C2 Dom1 After Download" id="77f4778b-a71d-478f-be2b-c8fd8b09aea0">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C2 Dom1 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomX56-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="ba4d9ef3-dc50-4220-aea4-620436950e25" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX56-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="522eb0bb-fdbe-44ee-8b5a-6e82af1e2563" name="getStatus C2 Dom1 R After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 R After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX56-_1</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="986226cb-ec2b-45bd-984c-e3761704d50b" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d7c9d203-f463-4cef-be25-9c7ae2559122" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX56-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="22add5e4-afb7-478d-98a4-460e08f8987d" name="getMessageErrors C2 Dom1 R"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1 R" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX56-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="0afd543f-56bb-4923-8c0e-a110ad4ee534" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="405865a1-93ab-4ea6-97b0-e59bc08b613c" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX56-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="6fe02e0c-259e-48ec-b549-91b5721b72b4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX57-Multitenancy-Pull MEP-Basic flow-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="47b638e5-345a-4b5f-9c7e-1b4445c102ab"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="dffb5f36-d444-4dce-ab3c-772258e8f475" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="f0007916-c562-4c66-b915-f63de822bd49" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="17c8c7ec-ab57-4596-b44b-4d4d1761ee22" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="4890bf2b-2041-40dc-b42c-ee68fbf3e59b" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="b03084ed-1f4c-42f6-9487-db6256a7af1f" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="98114e71-c620-4692-a20c-6939f3e2ae76" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom2");
</script></con:config></con:testStep><con:testStep type="request" id="a2b8087d-806d-4bf9-a505-5d784ccdda61" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX57-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Dom2")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e1ac048a-b774-44dc-9fd0-c189528cf213" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX57-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6a9db013-9c0c-4726-b5ba-d94340cf946e" name="getStatus C3 Dom2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Dom2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX57-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Dom2" id="d6c46b61-930b-4083-ae40-246a4b03ab35">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Dom2" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomX57-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" name="List Pending Messages C3 Dom1" id="f0248b89-1d1a-4a4c-b9af-d13dd0426e54">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Dom1" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="b2792745-dd75-447c-b41f-c77ca3969365" name="Not Contains"><con:configuration><token>-DomX57-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4C3Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="2ed12a4a-40e1-4568-a2b9-5a856506a1db" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomX57-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Dom2 After Download" id="8b3c9e23-5c97-4ebc-ad8a-5b4e280f1df2">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Dom2 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomX57-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="394d0c60-4206-4506-ba55-ce7fbc5314b6" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX57-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c8c09042-41c5-45d2-9094-759a9ac0f66c" name="getStatus C3 Dom2 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Dom2 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX57-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="986226cb-ec2b-45bd-984c-e3761704d50b" name="Not SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="2e64bc79-91b7-4078-b066-7ae91d8da307" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX57-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7c7189d5-7119-483a-a805-43ee993fd812" name="getMessageErrors C3 Dom2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Dom2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX57-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4C3Dom2</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="52423562-cde1-48f6-8136-03fe3d0740b7" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="5a96f4f6-1be1-4109-9b1f-03997a64aaae" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX57-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c7d2e8c9-df68-4a64-bdc2-53d7d98b633c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX59-Multitenancy-Pull MEP-Basic flow-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="1c8f3d0a-8f7d-4498-a10a-75f4d98caefd"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="2bbac817-b341-4391-b8c3-59ff72aab871" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="dc4d96ab-89b8-4f94-8001-558aa5e2272e" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="db3cbd4d-2a21-4140-8f0e-b6420bb92fa8" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="a49c7fd7-7aca-411a-9529-b1eb4f761dd7" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="b3d4e50e-c515-4752-ad43-eeb8384a4ff6" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="fb64a10e-923f-4635-a688-44086f09b1ad" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="ca657d7b-1ca5-4c81-955b-c4d0b8acb79b"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\pull\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\pull\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\pull\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="968d6cdf-a704-44cd-a6d1-199b30ec7c3d"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="f767b9c1-9a5d-4f75-8538-780362461f28" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="83460634-ccbd-4379-b6fe-d2dfd79bc8b1" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX59-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="9eaadc65-3300-44d1-89f2-9c0cb1e1cecb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX60-Multitenancy-Overwrite default properties" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="2a458d30-511c-450c-ad51-d2298fce9f0d"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Configure Multitenancy for C2 (enable plugin security, create domain properties file, create domain schema ...)
- Domain "domibus_C2Dom1" is configured for C2.
- Multitenany is not configured for C3.
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Certificate configured in default domain is not present in the truststore of C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="a2ed3952-1407-4cf7-a654-08d8f91be823" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security-C2" id="27248712-d46d-4763-9526-8652c4cad0dd" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="b6a5afa5-5a76-4525-9f79-ba2e389d0c83" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2 ("Default" domain)
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3 ("Default" domain)
Domibus.addPluginUser("C3",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="c36f0eb0-b6c3-4d2e-9ff7-96e93388a470" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");


// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="4fd43968-3566-4913-aee7-9dad03f66dcf" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="c2ac58af-3b6b-4ee2-b5fe-4c5007a84d6b" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Update property - test 1" id="d152ef58-6294-471b-80bf-cb86ad538de7"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- In file "domibus_C2Dom1-domibus.properties" set property "domibus.UI.title.name" to "New AC Title".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2 - test 1" id="74247b91-9fe8-4b70-aef0-72fff6831877"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Check Result - test 1" id="31fb8f3e-0d6b-4910-88bd-0c07c4ab968d"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- UI title takes the new value when domain "domibus_C2Dom1" is selected.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="delay" name="D1" id="8a146465-e5d5-4a36-badd-29ef56d99f9b"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Update property - test 2" id="024bb56d-00b1-401f-a1a4-50226a5320ba"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- In file "domibus_C3Dom2-domibus.properties" set property "domibus.msh.pull.cron" to a faster frequency than the default.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C3 - test 2" id="78082af7-81b8-4f65-9911-54bff26457a3"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus C3.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Check Result - test 2" id="ffa858c8-9a21-4aab-a3ec-dae7964717de"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Check that pull requests for domain "domibus_C3Dom2" occurs occording to the new set value.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="delay" name="D2" id="f94756f5-516d-4cc6-90fc-3fba99f6ac5d"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Update property - test 3" id="8b9eb5de-13d0-4164-9b6f-dcf0a4a35ea8"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- In file "domibus_C2Dom1-domibus.properties" set property "domibus.proxy.enabled" to "true".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2 - test 3" id="5e83d5ef-5b63-4e77-8312-ff6b8bfac82a"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Check Result - test 3" id="5c25aa14-c8ff-4316-97b8-466a1be1d597"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
- Proxy is enabled for domain "domibus_C2Dom1".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="delay" name="D3" id="a68fd7c2-cb80-4ed6-a0ce-6a0c909aa16e"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Update property - test 4" id="e5ea390f-7d18-445d-a502-a10393d13efc"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- In file "domibus_C2Dom1-domibus.properties" set property "domibus.sendMessage.messageIdPattern" to "^[A-Z]*$".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2 - test 4" id="3d5bbe64-30bf-4d4a-bbb2-ce4228a4cbb7"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="request" id="20328ccd-a285-4289-8518-655f82da12a0" name="Check Result - test 4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Check Result - test 4" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX60-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="9bea8656-6d5d-48a9-8354-97360f0fddba" name="SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="341c60bc-01fd-4a65-aad5-665fd959aa51"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Update property - test 5" id="06cf3f09-dc6a-4f6f-a764-f7dff3e8fbf6"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- In file "domibus_C2Dom1-domibus.properties" set property "domibus.sender.trust.validation.onreceiving" to "true".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart domibus C2 - test 5" id="a16b81ca-6f08-469a-9290-7406190a2f65"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Restart domibus C2.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="request" id="bb972c80-d6f8-441e-ad67-75e10a22fc87" name="Check Result - test 5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Check Result - test 5" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX60-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">white-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc10">bdx:noprocess</ns:Service>
               <ns:Action>TC10Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="9bea8656-6d5d-48a9-8354-97360f0fddba" name="SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="920d7523-fd6b-4c9a-91ca-29fb0d3bb15d" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom2","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"Default","userC4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="07c3f25d-1c41-4736-b619-1355779be37d" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX60-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="69663c6d-8cc1-4707-866b-b8e8d0a3a7e9" name="WS-Manual-testCases"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting><con:setting id="GeneratableJUnitReport@Style">Single Page (Print)</con:setting><con:setting id="GeneratableJUnitReport@Folder"/></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom012-Push-Submit message-Exceptional flow-Data-RefToMessageId-Format" searchProperties="true" id="4ffe7537-565a-4111-ab24-41c1a23a0ca9">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Check XSD validation enabled" id="ba6ce319-a865-4fb8-ae30-396f0a4a1b6d"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
Plugin security needs to be turn enabled
Set wsplugin.schema.validation.enabled=true in ws-plugin.properties file.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="request" id="615b6abc-d482-4f70-9749-c360de81963c" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom012-1-</ns:MessageId>
            	<ns:RefToMessageId></ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a2f3f264-407f-4490-8286-d590010b849c"/><con:assertion type="Not SOAP Fault Assertion" id="857ab22b-0722-4c8f-a96f-736797e79c42" name="SOAP Fault"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4e493c35-1af5-4798-8d70-308fc4afddde"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5ff829f3-9c05-4d1e-9ef2-246cf8260446" name="Contains"><con:configuration><token>(?s).*Could not validate soapheader caused by.*org.xml.sax.SAXParseException: cvc-minLength-valid: Value '' with length = '0' is not facet-valid with respect to minLength '1' for type 'max255-non-empty-string'.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="62763796-fcf3-418c-af7a-dac15c997678" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom012-1-");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="97578e7e-83a8-4524-84ac-46a73156d293" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom012-2-</ns:MessageId>
            	<ns:RefToMessageId>	</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a2f3f264-407f-4490-8286-d590010b849c"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="e03ad8e1-c659-4598-83a6-c6d7cbad19b4"><con:configuration><scriptText>def test = new Domibus(log, messageExchange, context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4e493c35-1af5-4798-8d70-308fc4afddde"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="6726d710-4c9f-476c-b75f-7e86b68a967f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom012-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom101-Push-Test Experience-encryption algorithm" searchProperties="true" id="42c6b3e5-1ff2-48a6-ba44-e59a4d4b1e4d">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="3cd7827c-84e4-4f99-b418-9b10c815d698" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc7">bdx:noprocess</ns:Service>
               <ns:Action>TC7Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d3034acc-2bbb-48b6-8b0f-3da3480acc90"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="a0672ba5-9a21-4a6a-802f-5938b46d0456"/><con:assertion type="XPath Match" name="XPath Match" id="eb0cd69d-d472-4bf4-b66c-c7acbea38e01"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f31bafde-5378-4339-8d46-0001a32fbe0c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the log file" id="7d955b26-b9f9-4153-927e-c9fc387493be"><con:settings/><con:config><script><![CDATA[def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check the log file for message Sender (DEBUG logs option is on) (in \\Installation path\\domibus\\logs:
- EncryptionMethod Algorithm is set to: http://www.w3.org/2009/xmlenc11#rsa-oaep.
- MGF Algorithm is set to: http://www.w3.org/2009/xmlenc11#mgf1sha256.
- DigestMethod Algorithm is set to: http://www.w3.org/2001/04/xmlenc#sha256.

After the manual check of the expected result:
- Click Yes when result is correct.
- Click No when result is incorrect. 
- Click Cancel to skip this check."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

	/* 
	 *  TODO Automate this
	 *  
	 *  in dombius.log file: 
	 *  
	  <xenc:EncryptionMethod Algorithm="http://www.w3.org/2009/xmlenc11#rsa-oaep">
<xenc11:MGF xmlns:xenc11="http://www.w3.org/2009/xmlenc11#" Algorithm="http://www.w3.org/2009/xmlenc11#mgf1sha256"/>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>

            <xenc:EncryptionMethod Algorithm="http://www.w3.org/2009/xmlenc11#rsa-oaep">
               <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" xmlns:ds="http://www.w3.org/2000/09/xmldsig#"/>
               <xenc11:MGF Algorithm="http://www.w3.org/2009/xmlenc11#mgf1sha256" xmlns:xenc11="http://www.w3.org/2009/xmlenc11#"/>
            </xenc:EncryptionMethod>
	 */]]></script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>08a9d62f-4b92-46b4-b656-bdff44743135</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom109-Push-Manual Retention Change" searchProperties="true" id="a8fcd782-2c97-4ffc-842a-2ed4061124e4">
            <con:settings/>
            <con:testStep type="groovy" name="Description" id="7acd807a-9c43-4523-835c-0928c2ae7890"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck(
	"""Test several retention values for downloaded and undownloaded messages.
	Retention parameter should be changed in the PMode file for Receiver and new PMode need to be uploaded.""" , log, testRunner); </script></con:config></con:testStep>
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="2e2cfcbc-0f7b-47a9-a169-818d63697862" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom109-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc11">bdx:noprocess</ns:Service>
               <ns:Action>TC11Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3f482ecb-8497-427d-8cfc-796847e55e5b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e4069868-b8e0-4d35-9531-63908ba79c25"/><con:assertion type="XPath Match" name="XPath Match" id="0cb9bb05-6fb6-4123-8cf3-c28ebd53c673"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1ed02d17-87ca-4ffc-a739-21a4ad19ea8c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="266bc784-23c2-4d76-a41a-6fa30b2b198d" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom109-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc11">bdx:noprocess</ns:Service>
               <ns:Action>TC11Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="868e8bf8-475a-43a0-a8b5-07a201994850"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="4fce2365-e365-424f-8f7d-9120fa616c07"/><con:assertion type="XPath Match" name="XPath Match" id="4af7130a-5f51-43b9-8b03-416bbfcdb458"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1f47a980-5036-4bde-adda-6b3162286645"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" id="4cddfcbf-a016-4ce9-a76b-76371539eaf1"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="request" id="b0380d21-6a26-4b6a-ba56-64cb3d545ee0" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message 1#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="7507d87e-0b5e-49e2-ae78-a69d70a5749a"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="6e2d30b5-28b8-46d9-b0c6-1917b9758ce3"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="cdd8de11-4c9f-4921-88ba-e3567e26fabe"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom099-2-");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)
//commented as we can't remove message when waitting to check they retention time
//def test = new Domibus(log,null,context);
//test.cleanDBMessageIDStartsWith("-Dom109-");
//test.finalize();
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46a821e6-6caf-43f3-8f1e-fc16fd2acf61</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3839a52-98bf-4836-bfd0-d66c9077dc86</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f5256d54-eb04-4164-b2f7-6da2314a570f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3499e85-3074-4087-83b6-890f629307f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="c30dcbac-6ea8-41d8-9364-961e8e1f1b6f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom123-Push-EDELIVERY-1686-Manual-The message receive failure notifications are not sent" searchProperties="true"><con:description>1. Change attributes for errorHandling in PMode file for Receiver 
&lt;errorHandlings>
	&lt;errorHandling name="demoErrorHandling" errorAsResponse="true" businessErrorNotifyProducer="true" businessErrorNotifyConsumer="true" deliveryFailureNotifyProducer="true"/>
&lt;/errorHandlings>

2. Reload PMode with changed value

3. Change filters order for Receiver - put JMS at top position

4. Submit a message. In this test to standard message with attachment optional property was added: 
                     &lt;ns:Property name="CharacterSet"> #UTF-8&lt;/ns:Property>
This incorrect Charset should result with exception raised in checkCharset method.

5. Confirm " #UTF-8  is not a valid Charset" message in domibus.log for Sender

6. Validate that in queue jms/domibus.backend.jms.errorNotifyConsumer error message is present with correct content.

7. Reset Pmode and filtering to default.
</con:description><con:settings/><con:testStep type="groovy" name="Upload P-Mode red" id="f4c9426b-b16e-42b2-baa0-3d2dfffb0217"><con:settings/><con:config><script>Domibus.uploadPmode("receiver","special","\\errorNotif\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Update Message Filter on red To JMS" id="ef24d3d7-9cec-4f8b-ac80-c5e026f50d36"><con:settings/><con:config><script>Domibus.setMessageFilters("receiver","Jms",context,log);</script></con:config></con:testStep><con:testStep type="request" id="317f2af3-2a62-4c6a-a1d4-4ac443ed5609" name="Submit Message with incorrect Charset for Attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with incorrect Charset for Attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom123-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                     <ns:Property name="CharacterSet"> #UTF-8</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>

      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6bfde16c-412b-4699-a0a2-8917010f5e80"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="44d52d43-1352-4ba0-b8e8-3f646aa583c3"/><con:assertion type="XPath Match" name="XPath Match" id="afa3c42f-087e-479c-97c5-a8b35f44faf9"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="f733d589-5208-49b7-81ec-09c7eb890a62"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>11ec7aca-298e-48f6-8bed-b0cb766b9de0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Verification" id="7447eaa9-b227-4eff-a62d-3d77e8c863ce"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
In this test case optional property was added to standard message with attachment: 
	&lt;ns:Property name="CharacterSet"> #UTF-8&lt;/ns:Property>
This incorrect Charset should result with exception raised in checkCharset method.

- Confirm " #UTF-8  is not a valid Charset" message in domibus.log for Receiver: sample error in log:
ERROR e.d.c.s.i.UserMessageHandlerService:179 - [BUSINESS - BUS-005] Invalid charset [#UTF-8] used

- Validate that in queue (receiver) jms/domibus.backend.jms.errorNotifyConsumer error message is present with correct content.""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PMode Red" id="e8f1c8d3-6ccc-4f33-9316-539671f16de4" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Update Message Filter on red To WS" id="7b9e065a-ac7e-4292-83b6-512807af1f5e" disabled="true"><con:settings/><con:config><script>Domibus.setMessageFilters("receiver","backendWebservice",context,log);</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);
def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom123-");
test.finalize();
testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Start default configuration"].run(new com.eviware.soapui.support.types.StringToObjectMap(), false);
</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>794b7679-4f04-4b8f-8ac9-92488a86dd2d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc2ee100-3e68-43c6-b5fa-32ba57db4ddf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="83d5e6eb-899b-4686-8c2f-12e9fd4afc9c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom124-Push-EDELIVERY-1721-Manual-HTTPClientPolicy: the connection and the receive timeout are hard coded" searchProperties="true"><con:description><![CDATA[1. In domibus-configuration.xml file for Sender add/change values for properties connectionTimeout and receiveTimeout to values: 
	<prop key="domibus.dispatcher.connectionTimeout">2</prop>
	<prop key="domibus.dispatcher.receiveTimeout">2</prop>
Now sending message with big attachment should fail with timeout error.

2. Restart Sender

3. Sent Submit message. 

4. Confirm "java.net.SocketTimeoutException: SocketTimeoutException invoking http://localhost:8180/domibus/services/msh: Read timed out" error message is present in domibus.log for Sender.

5. In domibus-configuration.xml file for Sender increase values for properties connectionTimeout and receiveTimeout to values:  
	<prop key="domibus.dispatcher.connectionTimeout">200000</prop>
	<prop key="domibus.dispatcher.receiveTimeout">200000</prop>

6. Restart Sender

7. Sent Submit message once again (with changed messageID) 

8. Validate message was received this time

9. Change back configuration to previous state.
]]></con:description><con:settings/><con:testStep type="groovy" name="Preconfiguration" id="bbbf4d69-6f9a-4dec-95f7-bdac88cb01dd"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
In domibus.properties file for Sender add/change values for properties connectionTimeout and receiveTimeout to values (values in [ms]): 
	domibus.dispatcher.connectionTimeout=2
	domibus.dispatcher.receiveTimeout=2
Now sending message with big attachment should fail with timeout error.

Next test step would automaticly restart Sender.""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender 1" id="81d6f166-fc2c-4259-8338-32c52b923d83"><con:settings/><con:config><script>// Stop sender
Domibus.stopSetMSHs(1,0,0,context,log);
// Start sender
Domibus.startSetMSHs(1,0,0,context,log);

log.info "--SENDER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="request" id="1ff1fdd1-97b6-46d5-bdce-8bf531ac0f3a" name="Submit Message with Attachments 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with Attachments 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom124-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="XPath Match" name="XPath Match" id="eb0cd69d-d472-4bf4-b66c-c7acbea38e01"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f31bafde-5378-4339-8d46-0001a32fbe0c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="SOAP Response" name="SOAP Response1" id="ba115558-1af0-4ef0-b589-558ac1c7ec07"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault1" id="3f0a2206-16c2-4d97-9961-8f1ab8f2c14e"/><con:assertion type="XPath Match" name="XPath Match1" id="898ee47c-e859-4968-bcda-e9e84240bc62"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion1" id="f9d7aea0-ae8b-4eea-8e5e-35bf9a6e6d83"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment} </con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Verification" id="f9374ab6-ddd5-4d2c-bdc0-dd1d4f0ea044"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
Confirm "java.net.SocketTimeoutException: SocketTimeoutException invoking http://localhost:8080/domibus/services/msh: Read timed out" 
error message is present in domibus.log for Sender.""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Change configuration" id="83efe46a-b619-4ba8-998f-2e1b6ff7d692"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
In domibus.properties file for Sender increase values for properties connectionTimeout and receiveTimeout to values:  
	domibus.dispatcher.connectionTimeout=240000
	domibus.dispatcher.receiveTimeout=240000

Next test step would automaticly restart Sender.""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender 2" id="ab305e9c-7813-4c10-b062-28c84cd8dc51"><con:settings/><con:config><script>// Stop sender
Domibus.stopSetMSHs(1,0,0,context,log);
// Start sender
Domibus.startSetMSHs(1,0,0,context,log);

log.info "--SENDER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="request" id="fa8fa3e6-4270-476a-970b-99468a2f5d5d" name="Submit Message with Attachments 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with Attachments 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom124-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="75242e4b-5142-40f9-9526-41ec69f89484"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="10c71d59-38b5-4046-8b61-ce5b29b13caf"/><con:assertion type="XPath Match" name="XPath Match" id="d020af5b-2ee6-499e-b9fb-e429ad1581c7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bafba71b-91c6-4bd9-9260-fe1b7c67ed89"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment} </con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Postconfiguration" id="7e70b507-3714-4a14-907c-906e7f1eb7f8"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
Change back configuration to previous state.""", log, testRunner) 
</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom124-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f58da1b1-9588-4bc3-b485-75cdc05031b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b989b3b2-e25a-40dd-b532-c01531d3f800</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41ae593a-fb05-4a98-98b2-738318e99ba9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f546feed-ebae-4d44-8f56-e7f287893fd7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="fcbceeac-ed32-433d-9c13-88803019eb2e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom125-Push-EDELIVERY-1731-Manual- CXF attachment temporary files leakage" searchProperties="true"><con:description>- Add the following property in file domibus-configuration for both sender and receiver: 
	domibus.attachment.storage.location=../payloads
- Create folder "payloads" in under the Path folder of both sender and receiver 
</con:description><con:settings/><con:testStep type="groovy" name="Preconfiguration" id="eff73d4d-30a8-44e8-9050-57ba1c9b1b62"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Add the following property in file domibus.properties for both sender and receiver: 
	domibus.attachment.storage.location=../payloads
- Create folder "payloads" in under the domibus root folder of both sender and receiver 
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Restart APs" id="0d58be3b-44f4-47f3-94ab-25ba85f00a80"><con:settings/><con:config><script>// Stop 2 Domibus: sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Start 2 Domibus: sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="request" id="8f5bbb87-2993-4797-84c4-0e47b917c227" name="Submit Message with very Big attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with very Big attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom125-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/bigFile.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" id="b4f9066d-5b4f-48a0-a173-6f897ba18f79"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="request" id="a7c03a38-8878-42d3-a228-ca1676bf9a15" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message with very Big attachment#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>//def test = new Domibus(log,null,context);
//test.cleanDBMessageIDStartsWith("-Dom125-");
//test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ae392797-6456-42c4-994c-bbe60c11540c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>63989107-7510-4f1a-b2f4-e46d2bba1ff4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5abb4c7c-a055-4115-b36d-c347d0a50516</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom127-EDELIVERY-2061-Push-Combined support for 1-way and 2-way SSL by Domibus" searchProperties="true" id="8fee7d56-b18b-40cf-9c06-c25fba38f512">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="066546bd-6bdf-46c1-bdc1-1aea8f7dab8b"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Please apply the following configuration and start the gateways:\n- 1 sender domibus configured for both 1-way and 2-way SSL client (green)  \n- receiver domibus configured as 1-way ssl server (blue) \n- receiver domibus configured as 2-way ssl server (red) \n- Configuration details can be found on the Administration Guide (9.1.3 and 9.1.4)\n (set the project custom property thirdGateway to true)");
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to true" id="d24e2757-bfc9-4417-a03c-4dd604b3eb25"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set true'].run( testRunner, context );
log.info "DONE."</script></con:config></con:testStep><con:testStep type="groovy" name="Start the 3 configured gateways" id="37860736-38ad-4159-b380-127d871cb44d"><con:settings/><con:config><script>
def result=javax.swing.JOptionPane.showConfirmDialog( null,"Start the 3 configured gateways.");
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload P-Modes blue-red-green" id="0b33d0fa-7a39-41d0-8b16-3f52405fa194"><con:settings/><con:config><script>// Upload PModes: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadPmode("sender","special","\\Threegateways\\blue\\ssl\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\Threegateways\\red\\ssl\\domibus-pmode-red.xml",context,log);
Domibus.uploadPmode("receivergreen","special","\\Threegateways\\green\\ssl\\domibus-pmode-green.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red-Green" id="083e9575-8f49-420c-908a-d42c3a53cbfe"><con:settings/><con:config><script>// Upload truststores: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadTruststore("sender","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\Threegateways\\red\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receivergreen","special","\\Threegateways\\green\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="fcc60a7c-78b3-489a-b4a3-670e9319b153"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="ec86cd5f-6dab-414b-af98-84d10eccf27d" name="Green To Blue 1-way ssl"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue 1-way ssl" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom127-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="abb8fb7b-d670-4863-a9ed-32659c7b3fcc"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="706af1bd-8891-4997-b392-e6a040b2e1dc"/><con:assertion type="XPath Match" name="XPath Match" id="4d066b30-af53-4fbd-8376-2bc693675947"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="35442fce-94a4-4a4e-8551-a063ec627e4c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="d9bd7900-349a-4d7f-a4a9-66f74d9aecf3"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="06659ae7-6956-4a0b-8720-0d8ac6e1fc25" name="Green To Red 2-way ssl"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Red 2-way ssl" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom127-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2881e42b-d4ba-40fd-a24c-fefca6d3d36b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="840c5915-59c7-4118-b342-9d847bc0e2a8"/><con:assertion type="XPath Match" name="XPath Match" id="c1d90e38-beb9-4c2d-b371-8712cd2617b7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b26707b8-56a8-423c-9f25-f31dbef752d2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="a9d12ae3-2de2-45ef-bb0e-1766cf3ee425"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Multitenancy" id="7763b879-924f-4c2d-aa89-6bcce026de9b"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Please update with the following configuration and start the gateways:\n- Configure the sender (green) with 2 domains in multitenancy mode  \n- Configure both receivers (blue and red) to exchange messages with only domain1 from the sender (green) \n- Add files domain1Name_clientauthentication.xml and domain2Name_clientauthentication.xml to the configuration folder.\n- Pmodes can be found on locations:\n   * Domibus-MSH-soapui-tests\\src\\main\\soapui\\resources\\PModesandKeystoresSpecialTests\\Threegateways\\blue\\ssl\\multitenancy \n   * Domibus-MSH-soapui-tests\\src\\main\\soapui\\resources\\PModesandKeystoresSpecialTests\\Threegateways\\red\\ssl\\multitenancy\n   * Domibus-MSH-soapui-tests\\src\\main\\soapui\\resources\\PModesandKeystoresSpecialTests\\Threegateways\\green\\ssl\\multitenancy");
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D4" id="7265666c-942b-4b4f-9bd3-f3960f86e3eb"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5cefab01-6f8f-451a-93eb-54699c12ab3c" name="Green To Blue 1-way ssl Multitenancy"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue 1-way ssl Multitenancy" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom127-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="abb8fb7b-d670-4863-a9ed-32659c7b3fcc"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="706af1bd-8891-4997-b392-e6a040b2e1dc"/><con:assertion type="XPath Match" name="XPath Match" id="4d066b30-af53-4fbd-8376-2bc693675947"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="35442fce-94a4-4a4e-8551-a063ec627e4c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D5" id="94a08ac3-3876-4c01-aa97-6fd462fbfc39"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="32914d4f-5667-4a94-a78a-c6917949cd5b" name="Green To Red 2-way ssl Multitenancy"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Red 2-way ssl Multitenancy" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom127-4-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2881e42b-d4ba-40fd-a24c-fefca6d3d36b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="840c5915-59c7-4118-b342-9d847bc0e2a8"/><con:assertion type="XPath Match" name="XPath Match" id="c1d90e38-beb9-4c2d-b371-8712cd2617b7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b26707b8-56a8-423c-9f25-f31dbef752d2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D6" id="9934f791-1de2-485b-a46d-5c48279bc17e"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Multitenancy-Fallback" id="92a00782-8ddf-4220-9f72-39074da8ede2"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Please update with the following configuration and start the gateways:\n- Configure the sender (green) with 2 domains in multitenancy mode  \n- Configure both receivers (blue and red) to exchange messages with only domain1 from the sender (green) \n- Remove file domain1Name_clientauthentication.xml from the configuration folder.\n- Pmodes can be found on locations:\n   * Domibus-MSH-soapui-tests\\src\\main\\soapui\\resources\\PModesandKeystoresSpecialTests\\Threegateways\\blue\\ssl\\multitenancy \n   * Domibus-MSH-soapui-tests\\src\\main\\soapui\\resources\\PModesandKeystoresSpecialTests\\Threegateways\\red\\ssl\\multitenancy\n   * Domibus-MSH-soapui-tests\\src\\main\\soapui\\resources\\PModesandKeystoresSpecialTests\\Threegateways\\green\\ssl\\multitenancy");
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D7" id="df6631dd-dfe0-4bf2-9635-f3f6feab181c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="177f990d-a08e-41c0-8d4e-f90636f61a3d" name="Green To Blue 1-way ssl Multitenancy Fallback"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue 1-way ssl Multitenancy Fallback" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom127-5-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="abb8fb7b-d670-4863-a9ed-32659c7b3fcc"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="706af1bd-8891-4997-b392-e6a040b2e1dc"/><con:assertion type="XPath Match" name="XPath Match" id="4d066b30-af53-4fbd-8376-2bc693675947"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="35442fce-94a4-4a4e-8551-a063ec627e4c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D8" id="fe3aeb6d-cf9c-4de0-b09a-18b92f2b97e3"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="ef48f48d-09c5-45cf-b09d-31fdd6ab9755" name="Green To Red 2-way ssl Multitenancy Fallback"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Red 2-way ssl Multitenancy Fallback" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom127-6-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2881e42b-d4ba-40fd-a24c-fefca6d3d36b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="840c5915-59c7-4118-b342-9d847bc0e2a8"/><con:assertion type="XPath Match" name="XPath Match" id="c1d90e38-beb9-4c2d-b371-8712cd2617b7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b26707b8-56a8-423c-9f25-f31dbef752d2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to false" id="5be8eff3-f9db-4ccb-a84e-c09eef220038" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set false'].run( testRunner, context );
log.info "DONE."</script></con:config></con:testStep><con:setupScript/><con:tearDownScript>ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom127-");
test.finalize();

</con:tearDownScript><con:properties><con:property><con:name>jdbcUrlRed</con:name><con:value>jdbc:mysql://localhost:3306/domibus_green</con:value></con:property></con:properties>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7e2111bd-caf1-4ece-adf0-5de282728262</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a177ab3b-f1ef-4ed2-8a4f-882a91d55571</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f5c0a3b-778d-4796-b2e7-89724071c8e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3217263a-ddec-4c22-82da-2f6ed073afd6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bb3d553b-d22d-4249-82e1-f37fadcf9c22</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4b53041-3c3c-446f-a4ac-464fdfa27271</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fc1b003f-bdeb-4e09-844b-b653b0a9879a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1818ce2-e330-425c-b727-ca25f8c56cdf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom130-Push-EDELIVERY-2760-LDAP CRLs are not supported" searchProperties="true" id="c8a479f2-d3de-41b2-84fc-f96b31614bb6">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Use NOBLE certificates" id="5c172e42-c950-43ec-a0d1-f5bf9fe80a4c" disabled="true"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Replace the current certificates with ones that have LDAP CRL endpoints.\n Re-load the truststores."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Connect to the open internet" id="409c605d-2c2f-4337-b5fc-932569879168"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Enable proxy or connect to the open internet (for the curl to be verified)."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files Http_Http" id="400c87ca-7e98-4d3f-8a2d-3164ab5d5aa1"><con:settings/><con:config><script>// Copy keystore blue Http_Http
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Http\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red Http_Http
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Http\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 1" id="c41290c7-fe20-400f-8e1d-1da9f58f80ef"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="eb8ffca8-ce87-458e-9195-b29f7bcb8c1c"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Http_Http" id="540d7750-71e4-4617-b516-dc405c061bf1"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\Http_Http\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\Http_Http\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="38e6c4f2-fbf0-46f4-9dd3-08c79ee74fa4" name="Submit Message Http_Http"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Http_Http" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom130-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d39c2574-b2b3-486b-944c-151ea3993a74"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="0648432e-c3df-4f36-8cf8-275782ed7221"/><con:assertion type="XPath Match" name="XPath Match" id="bf6c9808-69af-4ec9-8471-bb97517959bb"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="3ffb9db4-5a23-44e4-a271-311394d57d90"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file Http_Http" id="933146e9-1950-4352-9888-d0d12241d637"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that there are no exceptions for the certificates."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="ab8cdf56-3ad3-4601-942c-52b674467749"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files Http_Ldap" id="1143a508-703c-4634-8b3e-fbd4d02b36bc"><con:settings/><con:config><script>// Copy keystore blue Http_Ldap
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Ldap\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


//Copy keystore red Http_Ldap
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Ldap\\red\\gateway_keystore.jks";
dest =  context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 2" id="170cc105-6ea8-4a9c-ab65-42177e68963d"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="6de65e5d-1b0f-4740-b517-d723a50d3cc4"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Http_Ldap" id="84ed5565-f055-4ef8-978d-69983284fbc6"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\Http_Ldap\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\Http_Ldap\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="6b769e54-1910-443f-8127-8c00406225ab" name="Submit Message Http_Ldap"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Http_Ldap" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom130-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="dd132898-7a1a-4188-8368-871efa076fd5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="2b042f82-133e-4158-8bfe-f1cdeaed165f"/><con:assertion type="XPath Match" name="XPath Match" id="6126c08e-54c5-406c-8bc3-1e54d6c9d7f7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="88bc400c-0162-4e7c-8688-3be840e355f9"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file Http_Ldap" id="98fbe392-38d0-4c27-84fd-bc9161f39e00"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that there are no exceptions for the certificate ldap crl url."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D4" id="90b2ddf6-db1d-45cc-8ee5-9b77aae4eb6e"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files Ldap_Ldap" id="8d324083-1169-41af-a9cd-749c8c716937"><con:settings/><con:config><script>// Copy keystore blue Ldap_Ldap
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Ldap_Ldap\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red Ldap_Ldap
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Ldap_Ldap\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 3" id="7bc677b5-6e88-4cfd-aba7-3339b1c0ca7d"><con:settings/><con:config><script>// Stop sender and receiver
//Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="delay" name="D5" id="400b12c5-ea7b-4fa8-9672-f56a85091de7"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Ldap_Ldap" id="24c797a2-edee-4c25-849c-3112f7639c11"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\Ldap_Ldap\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\Ldap_Ldap\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="cd60489d-52b1-40f0-9746-97ef72991ecf" name="Submit Message Ldap_Ldap"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Ldap_Ldap" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom130-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="994aaf6e-79d6-466d-b1af-65894bb22e2b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="ec2bc059-9796-42a9-a76f-0a1f95bc7f25"/><con:assertion type="XPath Match" name="XPath Match" id="f0c9a6c3-5cc8-4186-8d43-8bc4d1b17c95"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f9243267-8362-4ef1-bce6-b0bdf6c57bea"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file Ldap_Ldap" id="abef5541-eb2d-4dcd-a59c-a3be034fdbc1"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that there are no exceptions for the certificate ldap crl url."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="0a1cb91a-af23-4010-80b3-8c1be7bce6d3" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="7c6360c5-876b-4862-8cec-77a99278e63b" disabled="true"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="436396dd-095c-467e-bffd-b1dc1523c88e" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();	


</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>18f2d17e-3617-4603-920e-ed8b33001a77</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>12473f18-9361-41d6-aa07-504435a32428</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d882aceb-1ed4-4a30-b70c-454a9da17d8f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ca3cb6b-550a-4ec2-8c65-3ff867961900</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46b7eca8-beb4-4947-8383-fe45a6bf41d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1451eb6a-6c9d-4e5f-9339-9e7e2f9fd6c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6d39462-ee71-4b33-8db8-ba32b50c8829</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="85e47452-2dd5-4c2f-8a5c-c2195b465e73" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom135-Push-Manual- BIG attachments" searchProperties="true"><con:description>Not working fully 
- Add the following property in file domibus-configuration for both sender and receiver: 
	&lt;prop key="domibus.attachment.storage.location">../payloads&lt;/prop> 
- Create folder "payloads" in under the domibus root folder of both sender and receiver 
</con:description><con:settings/><con:testStep type="groovy" name="Preconfiguration" id="b4b0ad91-b872-4a4a-8821-d40e2c0304ed"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Add the following property in file domibus.properties for both sender and receiver: 
	&lt;prop key="domibus.attachment.storage.location">../payloads&lt;/prop> 
- Create folder "payloads" in under the domibus root folder of both sender and receiver 
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Restart APs" id="e57aca67-c496-479d-b8b2-da857b91bc25"><con:settings/><con:config><script>// Stop 2 Domibus: sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Start 2 Domibus: sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="request" id="4827d9f9-7c35-4758-8ec3-72600a9ccea9" name="Submit Message with Small attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with Small attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom135-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/mediumFile.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="dd48f6ab-dc14-4651-951a-904a43e02c34" name="retrieveMessage - Small attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage - Small attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message with Small attachment#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a5db5e1b-2ec3-4128-bb7c-8e964d60dc5d" name="Submit Message with very Medium attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with very Medium attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom135-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/bigFile.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="da2fba8f-deb7-4c7c-9801-09316fbe9350" name="retrieveMessage - Medium attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage - Medium attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message with very Medium attachment#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b85b0af9-05bb-4a64-8aa5-3c211f826f22" name="Submit Message with Big attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with Big attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom135-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/File_97mb.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ac4a199c-cf84-48b1-89aa-0be3d6624f49" name="retrieveMessage - Big attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage - Big attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message with Big attachment#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="99d5392f-296d-43f1-b425-d0470c6c68d5" name="Submit Message with Very Big attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with Very Big attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom135-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/mediumBigFile.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" id="713c67b4-5429-44d2-8804-0b35809cfe17" disabled="true"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="request" id="65259798-4335-4ad8-bdf2-e92759437ff4" name="retrieveMessage - Very Big attachment" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage - Very Big attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:retrieveMessageRequest>
         <messageID>${Submit Message with Very Big attachment#Response#//messageID}</messageID>
      </_1:retrieveMessageRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="9a62735e-c96c-4fda-abd8-56fec28ca820" name="Pull Submit Message with Small attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Pull Submit Message with Small attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom135-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/mediumFile.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b450468e-595f-4b56-8cc2-9b5d5a388608" name="Pull retrieveMessage - Small attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="Pull retrieveMessage - Small attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@force_mtom">false</con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Pull Submit Message with Small attachment#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="44d822d1-7cc7-4a5d-bbb8-e785f44e55dc" name="Pull Submit Message with very Medium attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Pull Submit Message with very Medium attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom135-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/bigFile.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c0243fcc-ad09-43e2-b06a-fbea6c551411" name="Pull retrieveMessage - Medium attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="Pull retrieveMessage - Medium attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Pull Submit Message with very Medium attachment#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="af156194-ad0d-418d-892b-c49e28069291" name="Pull Submit Message with Big attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Pull Submit Message with Big attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom135-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/mediumFile.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="41bd32e0-30bd-4744-a093-deb9937c1940" name="Pull retrieveMessage - Big attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="Pull retrieveMessage - Big attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting><con:setting id="discardResponse">false</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Pull Submit Message with Big attachment#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>//def test = new Domibus(log,null,context);
//test.cleanDBMessageIDStartsWith("-Dom125-");
//test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ae392797-6456-42c4-994c-bbe60c11540c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>63989107-7510-4f1a-b2f4-e46d2bba1ff4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5abb4c7c-a055-4115-b36d-c347d0a50516</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="EDELIVERY-3908,EDELIVERY-2886 - Dom137-Push-weblogic-tomcat-getStatus request with spaces at the begin and end of messageId" searchProperties="true" id="71fb9cd6-9b54-49e7-ba04-3bcb7d820ff0" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set custom properties" id="4a74109b-55a1-4456-a25c-6f165c4ca575" disabled="true"><con:settings/><con:config><script>// blue: weblogic (edeltest1)
testRunner.testCase.testSuite.project.setPropertyValue("localUrl", "http://104.40.147.186:7005/domibus-weblogic");
testRunner.testCase.testSuite.project.setPropertyValue("databaseBlue", "oracle");
testRunner.testCase.testSuite.project.setPropertyValue("driverBlue", "oracle.jdbc.OracleDriver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlBlue", "jdbc:oracle:thin:@localhost:1521/xe");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "edelivery");
testRunner.testCase.testSuite.project.setPropertyValue("blueDbPassword", "edelivery");

// red: tomcat (edeltest2)
testRunner.testCase.testSuite.project.setPropertyValue("remoteUrl", "http://104.46.52.211:9080/domibus");
testRunner.testCase.testSuite.project.setPropertyValue("databaseRed", "mysql");
testRunner.testCase.testSuite.project.setPropertyValue("driverRed", "com.mysql.jdbc.Driver");
testRunner.testCase.testSuite.project.setPropertyValue("jdbcUrlRed", "jdbc:mysql://localhost:3308/domtestusr");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "root");
testRunner.testCase.testSuite.project.setPropertyValue("redDbPassword", "edelCld2017");

log.info "Update done.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="3f2658ef-10f1-4467-bf16-8522825d356c" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\cloud\\weblogic\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\cloud\\weblogic\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="0aedc6d6-cb25-4993-b19b-2406b27b6cdd" name="Submit Message-weblogic-tomcat"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-weblogic-tomcat" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
             <ns:MessageInfo>
               <ns:MessageId>-Dom137--</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="793a3647-2e12-4e45-8cd8-d701c89b55fe" name="getStatus - sender without extra spaces"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - sender without extra spaces" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message-weblogic-tomcat#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>ACKNOWLEDGED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="db711044-2b07-4a24-b336-ce1d633bc1ba" name="getStatus - sender spaces at the beginning of messageId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - sender spaces at the beginning of messageId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>   ${Submit Message-weblogic-tomcat#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>ACKNOWLEDGED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7986b8ed-ab42-491f-9866-3983592219d6" name="getStatus - sender spaces at the end of messageId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - sender spaces at the end of messageId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message-weblogic-tomcat#Response#//messageID}    </messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>ACKNOWLEDGED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c39a03a0-cda8-4610-b811-7a61fc90565b" name="getStatus - receiver without extra spaces"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - receiver without extra spaces" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message-weblogic-tomcat#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>RECEIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6c36b8ce-254d-479e-b13e-e150d3242ad0" name="getStatus - receiver spaces at the beginning of messageId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - receiver spaces at the beginning of messageId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>   ${Submit Message-weblogic-tomcat#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>RECEIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="efce4b51-aba5-4bea-8dc5-71795c08a3d7" name="getStatus - receiver spaces at the end of messageId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus - receiver spaces at the end of messageId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message-weblogic-tomcat#Response#//messageID}       </messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="XPath Match" id="e1519a64-73c4-45fb-80df-75b9848244dc" name="Match content of [ns4:getStatusResponse]"><con:configuration><path>declare namespace ns4='http://org.ecodex.backend/1_1/';
//ns4:getStatusResponse[1]/text()</path><content>RECEIVED</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith('-Dom137-')
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom144-Push-EDELIVERY-2201-Verification of the sender alias" searchProperties="true" id="8e5faa30-f517-4a99-b0df-b92b1a376067">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set alias and validation properties" id="5e7b843e-1b12-4ded-8a0a-6c56b5de8224"><con:settings/><con:config><script>// Blue
def propValueDict1 = ['domibus.sender.trust.validation.onreceiving' : 'true', 'domibus.security.key.private.alias':'bluediff_gw']
Domibus.changeDomibusProperties("BLUE", propValueDict1, log, context, testRunner)

// Red
def propValueDict2 = ['domibus.sender.trust.validation.onreceiving' : 'true']
Domibus.changeDomibusProperties("RED", propValueDict2, log, context, testRunner)</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore file for Blue" id="7f7a66c9-f253-4839-8df7-d06026c5cc18"><con:settings/><con:config><script>// Copy keystore blue
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\aliasSubjectDiff\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);




</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Domibus Blue and Red 1" id="4909239b-cdc1-46a1-aa3e-9a3107b3b0a3"><con:settings/><con:config><script>// Stop blue and red
Domibus.stopSetMSHs(1,1,0,context,log);
// Start blue and red
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload pmode Blue and Red" id="709e5694-b32a-48d2-bc3f-fe3ce5c7e2b1"><con:settings/><con:config><script>// Upload PModes: blue and red
Domibus.uploadPmode("sender","special","\\certificates\\aliasSubjectDiff\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\certificates\\aliasSubjectDiff\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red" id="17caf14f-dfcc-4464-9a3f-ba46afef0977"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\aliasSubjectDiff\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\aliasSubjectDiff\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="ad150412-b1f3-48b6-8b04-0ac6a3219e2a" name="Submit Message Failure"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Failure" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="530f54aa-a767-4da0-a3da-f840a117d5ee"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="25613cb0-9773-4092-98d0-3543d6d2d550"/><con:assertion type="XPath Match" name="XPath Match" id="c491142a-9415-4d0a-a9ae-55b2d98222ee"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5978371d-94be-414f-a8f0-a8e468dc6549"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set validation property to false" id="888c0eb6-de5d-4999-8cc9-91f27353cd9c"><con:settings/><con:config><script>// Blue
def propValueDict1 = ['domibus.sender.trust.validation.onreceiving' : 'false']
Domibus.changeDomibusProperties("BLUE", propValueDict1, log, context, testRunner)

// Red
def propValueDict2 = ['domibus.sender.trust.validation.onreceiving' : 'false']
Domibus.changeDomibusProperties("RED", propValueDict2, log, context, testRunner)</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Domibus Blue and Red 2" id="986f71c3-b8a8-452b-bad8-f71ee8207eb5"><con:settings/><con:config><script>// Stop sender
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="request" id="e3da65d2-df92-419d-8be8-52de0a2c4821" name="Submit Message Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="530f54aa-a767-4da0-a3da-f840a117d5ee"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="25613cb0-9773-4092-98d0-3543d6d2d550"/><con:assertion type="XPath Match" name="XPath Match" id="c491142a-9415-4d0a-a9ae-55b2d98222ee"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5978371d-94be-414f-a8f0-a8e468dc6549"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore properties files" id="792e23c6-3c43-4bd1-b2d2-854e1f5df09b" disabled="true"><con:settings/><con:config><script>Domibus.restoreDomibusPropertiesFromBackup("BLUE",  log, context, testRunner)
Domibus.restoreDomibusPropertiesFromBackup("RED",  log, context, testRunner)</script></con:config></con:testStep><con:testStep type="groovy" name="Restore keystore file default" id="2b5a24e0-17d8-44a0-9d30-402de18fb349" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="4e9cea70-90e0-4827-a6c5-c9b82234c0e7" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="9a3a822c-2f3a-42c6-8ef6-eeec428102d4" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript>//testRunner.testCase.testSteps['Restore properties files'].run(testRunner, context);
//testRunner.testCase.testSteps['Restore keystore file default'].run(testRunner, context);
//testRunner.testCase.testSteps['Restart Domibus Blue and Red 1'].run(testRunner, context);
//testRunner.testCase.testSteps['Upload default PModes Blue-Red'].run(testRunner, context);
//testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);
//ExcelReporting.reportTestCase(testRunner, log)

</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d2822aff-64cc-4d3d-b01f-905092eaffb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b3a9d704-5f48-4b51-845e-30ad56a09d63</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>096cd24a-d7ef-4e0b-9a04-4e3fc56d0c84</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d316f7b3-f2c4-4da0-8ffe-257836a13c90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>99411964-e893-44cc-b261-1e0b8c271948</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2d6adb0d-a4b5-4d01-b9a1-b3ea83f8ce3c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e110d38c-4b36-417e-9ab6-cad304a49587</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41a7af78-2394-46d0-a1d7-897b737c4fae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0524d26a-8fa5-4524-97d4-1721cd46c9d8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e73ca55c-ccb2-4626-8f66-199c5cb3c08d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76333cec-611d-4545-a169-37eaf4a405e5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>243248d2-e3f0-4743-9e6e-0518b99831cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>670d472b-1f71-4664-b6b6-a5126853ef3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fa6ef50-ede8-4ddc-970e-9ff7a6625e37</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>498c3117-cf06-400e-864e-93f43fce900a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0b07235-fe1b-4a0d-91f4-5dce059daea6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c5aad99-870d-42a3-80c0-5f7589b7ff46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom145-EDELIVERY-2338-Null pointer exception in cxf interceptors when pmodes are not in synch" searchProperties="true" id="262ba10f-671a-438a-81c2-79a2b2fffc3a" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="ceb06c24-61ff-4012-b0f3-f38d4fe36f65"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set CXF log level to INFO then restart domibus."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="e5d05887-4aae-4e9c-931e-f215e6bdfd05" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-BLue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-rED</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>SomeValue</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6da50573-4c2a-47d0-8b0c-88b66cbc5d87"/><con:assertion type="Simple Contains" id="4010365a-7e0e-4199-a422-1b2eab98c5d5" name="Contains"><con:configuration><token>No matching action found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" id="a477f756-4337-434c-adad-bf7332fc9c9c" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the logs of the sender" id="1afdcee2-5af9-4b77-ac21-b2f32000e84d"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Verify that there is no Null pointer exception in cxf interceptors present in the logs (NullPointerException)."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0b9f8157-456a-4775-b6d5-ae446d910bf1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom150-Push-EDELIVERY-2663-Exception when there is no pMode specified" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="1a655abf-739b-4d5b-98fe-96bc4f49b43b"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Drop then re-create schema for domibus. Start this domibus"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="90cfaa59-ca22-4fd7-9fcc-2b11e1c1139c"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that no exception for missing configuration is present in the logs.\nNotification of missing configuration should be done via a warning message."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom156-Push-3 Domibus Scenario-Submit Message-Basic Flow-Message with same ID from different senders" searchProperties="true" id="c367b6d4-9764-46cd-a897-5e0b667dbf3b">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set properties, PMode and truststores" id="22c87119-17cf-45e7-8614-7dc8acc3f97b"><con:settings/><con:config><script>def tc = testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Cloud 3 gateways configuration"]
def testStep = tc.testSteps['Set custom properties']
testStep.run( testRunner, context )
testStep = tc.testSteps['Upload PModes Blue-Red-Green']
testStep.run( testRunner, context )
testStep = tc.testSteps['Upload truststores Blue-Red-Green']
testStep.run( testRunner, context )
//testStep = tc.testSteps['Set Message Filters to WS Blue-Red-Green']
//testStep.run( testRunner, context )</script></con:config></con:testStep><con:testStep type="request" id="acc118d0-49f8-41d7-a4a1-89a38dd6f609" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom156-</ns:MessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc52">bdx:noprocess</ns:Service>\r
               <ns:Action>TC52Leg12</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="eb0739dc-7c80-40f1-a687-1cc99c84fe13" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom156-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc52">bdx:noprocess</ns:Service>
               <ns:Action>TC52Leg12</ns:Action>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C2</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C3</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPlNlY29uZCBoZWxsbyBmcm9tIGRpZmZyZW50IHNlbmRlcjwvaGVsbG8+</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","", null,null,null,"thirdDefault", "C3Default");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:setupScript/><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-Dom156'))
test.finalize();	

//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom158-EDELIVERY-977-Adding irrelevant attributes" searchProperties="true" id="cbc85731-b802-4221-aae4-3878c1745bb8" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="e8072bc8-4cf6-419c-991e-9a52749f7196"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Enable schema validation from ws properties file."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="request" id="0f0354b4-f408-43a7-8422-94d6b16db55e" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom158-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action toto="haha">TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion" id="971deb64-71a2-4caa-9ad9-662c6d2650b9" name="SOAP Fault"/><con:assertion type="SOAP Response" id="a3a2f3c1-c5e5-4704-b810-e801276e4a2d" name="SOAP Response"/><con:assertion type="Simple Contains" id="be59de63-d719-4be4-856a-d741384dce94" name="Contains"><con:configuration><token>(?s).*org.xml.sax.SAXParseException.*[aA]ttribut.*</token><ignoreCase>true</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2b9267bf-d4fa-4505-8a82-c504e0968765" name="Contains 1"><con:configuration><token>Action</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f293c29f-5274-43ef-92e6-5326c2f1ccd6" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom158-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service tata="hoho" type="tc7">bdx:noprocess</ns:Service>\r
               <ns:Action>TC7Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion" id="971deb64-71a2-4caa-9ad9-662c6d2650b9" name="SOAP Fault"/><con:assertion type="SOAP Response" id="6a274cc3-d7fc-4fc9-9c62-9e0e38e80900" name="SOAP Response"/><con:assertion type="Simple Contains" id="b726403c-042f-4e5a-90fb-20a3c2ae7391" name="Contains"><con:configuration><token>(?s).*org.xml.sax.SAXParseException.*[aA]ttribut.*</token><ignoreCase>true</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b7ac13c3-9100-4e92-bf5d-bf24d2d24d4c" name="Contains 1"><con:configuration><token>Service</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e56855b5-337c-4d8f-b8a0-e18f7676a6a7" name="RetrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="RetrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID attribute="type">-dummy-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="Not SOAP Fault Assertion" id="265cd6d9-1d1a-4017-a909-9d9f06abe1a8" name="SOAP Fault"/><con:assertion type="Simple Contains" id="e18a282b-2aa8-424e-bf36-07bbcef29807" name="Contains"><con:configuration><token>(?s).*messageID.*[aA]ttribut.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4b1404a7-af9e-442e-beeb-adf249a1c36b" name="getStatus"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID attribute="type">-dummy-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="5f84ca66-6a46-4ed3-b92e-2ee695ffff66" name="SOAP Fault"/><con:assertion type="Simple Contains" id="c8f4a185-038b-4849-8c8c-6b4efccaf67a" name="Contains"><con:configuration><token>(?s).*messageID.*[aA]ttribut.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="0dde3521-7bf4-42f5-b190-1b6bedf95c86" name="getMessageErrors"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="25304b07-269e-46f7-a485-26e11fc92724"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID attribute="type">-dummy-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="afb90fde-4023-4745-b142-5f93d28746ff" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="a7000821-49b8-4b17-88d3-b1ba9f68ec49" name="SOAP Fault"/><con:assertion type="Simple Contains" id="2d1d74c5-0bbc-4873-998b-ef22a1a508ca" name="Contains"><con:configuration><token>(?s).*messageID.*[aA]ttribut.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="list Pending Messages" id="45d4223d-f95c-43e4-98e8-bc8908c04b3e">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="list Pending Messages" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest attribute="type">random</_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="be2f6af0-41a4-44ff-b163-8f669901f0e9" name="Not SOAP Fault"/><con:credentials>
                            <con:authType>No Authorization</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-Dom158-');
test.finalize();	</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom159-EDELIVERY-1982-Configure the deletion of Message when its status is SEND_FAILURE" searchProperties="true" id="bd6384c3-0b80-45ec-8be9-bd35b9e892b0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload unsuitable truststore Blue" id="7405ab18-9b76-46cb-97f7-9208852bfff2"><con:settings/><con:config><script>// Upload unsuitable truststore to blue.  
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="5006ac8c-6f49-47fb-a436-cf68b664b52b"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="e5da187a-fce0-439c-8778-dfd7b441e1de" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom159-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="f3348388-86cb-4ed4-89f3-f9cce5044e85"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="365defe9-ca8a-44b0-92c7-6ac031a91e7c"/><con:assertion type="XPath Match" name="XPath Match" id="e732d14e-6a50-4177-88b8-bcf61919cd6a"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="326d4819-a043-4395-a428-c1b75a3e7711"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
//test.waitForStatus("WAITING_FOR_RETRY","");
test.waitForStatus("SEND_FAILURE","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="05f7bbfc-8e06-47ce-a3f6-6ebd825c791c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Restore Truststore" id="752f0962-77ae-4e64-9284-19f532edd771"><con:settings/><con:config><script>// Upload default truststore for blue.  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="c50e70e0-994a-4502-9ee2-05bfdbc9df49"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Manually re-send the message." id="e958b875-f5a0-410b-8176-be78a3913ff0"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check if it is possible to re-send the message via admin console. 
After the manual check of the expected result:
- Click Yes when result is correct.
- Click No when result is incorrect. 
- Click Cancel to skip this check."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom159-");
test.finalize();
Domibus.startMSH("sender", context, log);
testRunner.testCase.testSteps['Restore Truststore'].run(testRunner, context);
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>906220c2-8277-4fcb-a3bd-f15306888b25</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53c0a958-b619-493b-b45b-7b9d7ecf4e43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e138bc36-5999-4555-b848-c445b16888f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e463ae55-976e-4821-ba44-7ac3ab41c5e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72a27452-cd8c-4971-8adc-00af35c941f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>af041385-12f1-4709-a09d-189cb32e5fbd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b4dd5a76-3e3a-4c77-812b-72385f03e7d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c900b357-a318-4d50-af49-a18a044c70e6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom163-EDELIVERY-2151-Potential performance degradation due to single thread limitation" searchProperties="true" id="68a4941c-c327-4905-96c5-04279c716120" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Send Messages in parallel" id="09e05da7-1bd3-449d-8ea4-840ac5c0a8b7"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Send a large file with domibus java client.
In parallel send messages with small size payloads using soapUI. 
Check that the small messages are not blocked by the message with large payload."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PMode domibus-client" id="e4b8d813-9024-4a84-a8eb-2c2a20a456e9"><con:settings/><con:config><script>// Upload PModes: blue for sender, red for receiver.  
Domibus.uploadPmode("sender","special","\\clientPlugin\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\clientPlugin\\red\\domibus-pmode-red.xml",context,log);
</script></con:config></con:testStep><con:testStep type="request" id="f3cd2430-e006-45ff-bb90-ff2d1f83e170" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope">
   <S:Header>
      <ns2:Messaging mustUnderstand="false" xmlns:ns2="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:ns4="http://org.ecodex.backend/1_1/" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
         <ns2:UserMessage>
            <ns2:PartyInfo>
               <ns2:From>
                  <ns2:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns2:PartyId>
                  <ns2:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns2:Role>
               </ns2:From>
               <ns2:To>
                  <ns2:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns2:PartyId>
                  <ns2:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns2:Role>
               </ns2:To>
            </ns2:PartyInfo>
            <ns2:CollaborationInfo>
               <ns2:Service type="tc1">bdx:noprocess</ns2:Service>
               <ns2:Action>TC1Leg1</ns2:Action>
            </ns2:CollaborationInfo>
            <ns2:MessageProperties>
               <ns2:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns2:Property>
               <ns2:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns2:Property>
            </ns2:MessageProperties>
            <ns2:PayloadInfo>
               <ns2:PartInfo href="cid:payload">
                  <ns2:PartProperties>
                     <ns2:Property name="MimeType">text/xml</ns2:Property>
                  </ns2:PartProperties>
               </ns2:PartInfo>
            </ns2:PayloadInfo>
         </ns2:UserMessage>
      </ns2:Messaging>
   </S:Header>
   <S:Body>
      <ns4:submitRequest xmlns:ns2="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:ns4="http://org.ecodex.backend/1_1/" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
         <bodyload contentType="application/xml" payloadId="cid:payload">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </bodyload>
      </ns4:submitRequest>
   </S:Body>
</S:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="198883bf-4169-414c-a938-7bd782b94ff4" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<S:Envelope xmlns:S="http://www.w3.org/2003/05/soap-envelope" xmlns:env="http://www.w3.org/2003/05/soap-envelope">
   <S:Header>
      <ns2:Messaging mustUnderstand="false" xmlns:ns2="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:ns4="http://org.ecodex.backend/1_1/" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
         <ns2:UserMessage>
            <ns2:PartyInfo>
               <ns2:From>
                  <ns2:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns2:PartyId>
                  <ns2:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns2:Role>
               </ns2:From>
               <ns2:To>
                  <ns2:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns2:PartyId>
                  <ns2:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns2:Role>
               </ns2:To>
            </ns2:PartyInfo>
            <ns2:CollaborationInfo>
               <ns2:Service type="tc1">bdx:noprocess</ns2:Service>
               <ns2:Action>TC1Leg1</ns2:Action>
            </ns2:CollaborationInfo>
            <ns2:MessageProperties>
               <ns2:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns2:Property>
               <ns2:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns2:Property>
            </ns2:MessageProperties>
            <ns2:PayloadInfo>
               <ns2:PartInfo href="cid:payload">
                  <ns2:PartProperties>
                     <ns2:Property name="MimeType">text/xml</ns2:Property>
                  </ns2:PartProperties>
               </ns2:PartInfo>
            </ns2:PayloadInfo>
         </ns2:UserMessage>
      </ns2:Messaging>
   </S:Header>
   <S:Body>
      <ns4:submitRequest xmlns:ns2="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:ns4="http://org.ecodex.backend/1_1/" xmlns:xmime="http://www.w3.org/2005/05/xmlmime">
         <bodyload contentType="application/xml" payloadId="cid:payload">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </bodyload>
      </ns4:submitRequest>
   </S:Body>
</S:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="fd1d04c5-887a-4575-9550-f17b6854e184" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom164-EDELIVERY-3046-AND-EDELIVERY-2997" searchProperties="true" id="3d875324-9ed6-4325-b04e-753ccae42639">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set payload storage location to HD" id="15a0f6c8-628e-45be-bee1-a2f2fc8807e7"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Set property domibus.attachment.storage.location to some existing folder."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful WRby user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set log level to INFO" id="dedefe3f-ade1-4b86-b3a6-f6f2545ee6bb"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Set log level to INFO."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful WRby user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue-Red 1" id="7f91b0de-e198-4e21-96c3-b067d1d5e520"><con:settings/><con:config><script>// Start 2 Domibus: sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
Domibus.startSetMSHs(1,1,0,context,log);
</script></con:config></con:testStep><con:testStep type="request" id="7e0390e4-0b1e-465c-85bd-25255849a428" name="Submit Message1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom164-1-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="cfc0ec61-a586-4211-9494-2290e320608a"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="e97bfb1f-fef5-40f0-9368-95e958e0f553" name="retrieveMessage1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-Dom164-1-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="353a0864-03ee-4579-ad24-3d9f2b8ff3f7" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom164-1-",null,"Wait long for receiver status");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check that the payload files are deleted from HD" id="776da0bc-a867-4b16-b406-060531417cee"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check that the payload files are deleted from the storage location."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful WRby user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Check both sender and receiver logs 1" id="8706bd42-7146-4cb7-b091-ec71cacf2d87"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check that the message payload size is logged in both sender and receiver logs (with the associated message ID). \nThis information should be present once per message."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful WRby user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="request" id="46245224-f8a3-4118-b864-4e5fcbe89dca" name="listPendingMessages"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>listPendingMessages</con:operation><con:request name="listPendingMessages" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="d2ada3e1-039c-4aab-8486-81d00be4b586"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="d71954af-b90a-449e-9317-cd17c44dd8c8" name="SOAP Response"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/listPendingMessages"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set payload storage location to DB" id="82c19d4d-37a8-4610-b71c-1fe77e2b4658"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Disable property domibus.attachment.storage.location."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful WRby user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue-Red 2" id="abed229c-97c0-45e4-ba26-ea09a939174f"><con:settings/><con:config><script>// Start 2 Domibus: sender and receiver
//Domibus.stopSetMSHs(1,1,0,context,log);
Domibus.startSetMSHs(1,1,0,context,log);
</script></con:config></con:testStep><con:testStep type="request" id="342d22e4-d05d-4935-a363-49dfcc631dcd" name="Submit Message2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom164-2-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3ef60308-bf91-4268-8fcf-929ed9a9c7e4" name="retrieveMessage2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-Dom164-2-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="353a0864-03ee-4579-ad24-3d9f2b8ff3f7" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom164-1-",null,"Wait long for receiver status");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check that the payload files are deleted from DB" id="1cd97759-3a74-45ab-9580-b8084a547af0"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check that the payload files are deleted from the database."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful WRby user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Check both sender and receiver logs 2" id="9a3ded6c-07d3-4d57-b97b-f49e6815eeb0"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check that the message payload size is logged in both sender and receiver logs (with the associated message ID). \nThis information should be present once per message."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful WRby user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom089-");
test.finalize();
////ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>561878b2-aeaf-4c84-aa05-2d5aff136800</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="8d49a1d0-6e15-4659-83ae-7b23368bcfb1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom171-EDELIVERY-2996-Log the unsuccessful login attempts" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Add user" id="cf3cdf63-8210-415c-a8b1-744d9a9ef345"><con:settings/><con:config><script>Domibus.addAdminConsoleUser("C2",context,log,"Default","ROLE_USER","high");
</script></con:config></con:testStep><con:testStep type="groovy" name="Lock user" id="e7afce30-4589-4efd-81ab-736703223a2d"><con:settings/><con:config><script>Domibus.insertWrongPassword("C2",context,log,"high",5);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="6c9063e3-5e7c-482a-9e22-074b98490b42"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
In the file security.log, check that the following strings are present: 
- "[SECURITY - SEC-016] The user [high] is trying to login with bad credentials" (5 times)
- "[SECURITY - SEC-017] The user [high] is locked after trying to login for [5] wrong attempts" 
"""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Delete user" id="2e701b85-1668-40f2-a118-62da860daa4d" disabled="true"><con:settings/><con:config><script>Domibus.removeAdminConsoleUser("C2",context,log,"Default","high");</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)
</con:tearDownScript><con:properties/></con:testCase><con:testCase id="e9bd5e6a-be09-4327-a52b-d41c05e3a53c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom172-EDELIVERY-2995-Log every message status change" searchProperties="true"><con:description>1. When I submit the message receiver is turn off. 
2. I wait until 5 attempts of sending  are done. 
3. On administrator panel I click resend and wait until also 4 new attempts of sending the message would fail. 
4. I turn on receiver. 
5. On administrator panel I click resend second time (now receiver is already up) 
6. After message been acknowledged I retrieve message on receiver side.</con:description><con:settings/><con:testStep type="request" id="16debceb-5ad3-4204-a8c4-124c9d961c6d" name="Submit Message1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom172-1-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/File_97mb.pdf</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Stop Receiver MSH" id="3bf96549-a179-4506-aaa5-e72474e6e416"><con:settings/><con:config><script>Domibus.stopMSH("receiver", context, log);</script></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a67852a6-6bbd-4a4e-8b63-78cde8783b25"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="request" id="ca32cfa1-7136-4c26-99c9-8664515ff2dd" name="Submit Message2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom172-2-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc7">bdx:noprocess</ns:Service>
               <ns:Action>TC7Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/File_97mb.pdf</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Start Receiver MSH" id="9f7f8193-d6fd-42f3-986e-5cdbc69243f2"><con:settings/><con:config><script>Domibus.startSetMSHs(0,1,0,context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="Delay1" id="0e22dba0-7367-4dbf-a89b-782c062a0c35"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="request" id="7f587f6e-40a5-4e4d-ac87-2d4b66249207" name="retrieveMessage1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:retrieveMessageRequest>
         <messageID>-Dom172-1-</messageID>
      </_1:retrieveMessageRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="353a0864-03ee-4579-ad24-3d9f2b8ff3f7" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom164-1-",null,"Wait long for receiver status");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check Script" id="c317d4f0-9c98-4b58-8a1a-cc39a6362332"><con:settings/><con:config><script>def expectedInLogsOnSenderSite = 
"""[BUSINESS - BUS-063] Notifying about message status change from [null] to [SEND_ENQUEUED]
[BUSINESS - BUS-063] Notifying about message status change from [SEND_ENQUEUED] to [WAITING_FOR_RETRY]
[BUSINESS - BUS-063] Notifying about message status change from [WAITING_FOR_RETRY] to [SEND_FAILURE]
[BUSINESS - BUS-063] Notifying about message status change from [SEND_FAILURE] to [SEND_ENQUEUED]
[BUSINESS - BUS-063] Notifying about message status change from [WAITING_FOR_RETRY] to [SEND_FAILURE]
[BUSINESS - BUS-063] Notifying about message status change from [SEND_FAILURE] to [SEND_ENQUEUED]
[BUSINESS - BUS-063] Notifying about message status change from [SEND_ENQUEUED] to [ACKNOWLEDGED]
 """

def expectedInLogsOnReceoverSite = 
 """[BUSINESS - BUS-063] Notifying about message status change from [null] to [RECEIVED]
[BUSINESS - BUS-063] Notifying about message status change from [RECEIVED] to [DOWNLOADED]
[BUSINESS - BUS-063] Notifying about message status change from [DOWNLOADED] to [DELETED]
 """
 
def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Checks logs contains proper information."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)
def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom172-");
test.finalize();</con:tearDownScript><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom173-Push-Revoked Certificates Information in Logs" searchProperties="true" id="980ee517-8b17-46d7-bce8-f06d30daaa21">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Change keystore files" id="d3b69419-d594-4981-b851-f57105e644f5"><con:settings/><con:config><script>// Copy keystore blue
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\nearlyExpired\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\nearlyExpired\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="098a0e91-e396-4969-9514-f4c23a5abc37"><con:settings/><con:config><script>// Stop sender and receiver
//Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Revoked" id="4d18abaa-e7c2-4f2e-b74f-55ab24047e13"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\nearlyExpired\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\nearlyExpired\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="4a47b452-7559-41e8-bbd4-2660e66443d4" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom173-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="530f54aa-a767-4da0-a3da-f840a117d5ee"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="25613cb0-9773-4092-98d0-3543d6d2d550"/><con:assertion type="XPath Match" name="XPath Match" id="c491142a-9415-4d0a-a9ae-55b2d98222ee"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5978371d-94be-414f-a8f0-a8e468dc6549"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check" id="3e4378a8-d511-4531-bb42-7109ae36b2ff"><con:settings/><con:config><script>def expectedInLogsOnSenderSite = 
"""[SECURITY - SEC-018] The certificate with alias [blue_gw] will be revoked on [
[SECURITY - SEC-018] The certificate with alias [red_gw] will be revoked on [
[SECURITY - SEC-018] The certificate with alias [blue_gw] will be revoked on [
[SECURITY - SEC-018] The certificate with alias [red_gw] will be revoked on [
 """

def expectedInLogsOnReceiverSite = 
 """[SECURITY - SEC-018] The certificate with alias [blue_gw] will be revoked on [
[SECURITY - SEC-018] The certificate with alias [red_gw] will be revoked on [
[SECURITY - SEC-018] The certificate with alias [blue_gw] will be revoked on [
[SECURITY - SEC-018] The certificate with alias [red_gw] will be revoked on [
 """
 
def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Checks logs contains proper information."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="2d5229a5-991e-42b4-a70c-5c8b2664520e" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="046a17bd-634e-45ff-ab5f-a5f6537a15ac" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();	
//testRunner.testCase.testSteps['Copy keystore files default'].run(testRunner, context);
//testRunner.testCase.testSteps['Restart Sender and Receiver'].run(testRunner, context);
//testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);


</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d2822aff-64cc-4d3d-b01f-905092eaffb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b3a9d704-5f48-4b51-845e-30ad56a09d63</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>096cd24a-d7ef-4e0b-9a04-4e3fc56d0c84</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d316f7b3-f2c4-4da0-8ffe-257836a13c90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>99411964-e893-44cc-b261-1e0b8c271948</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2d6adb0d-a4b5-4d01-b9a1-b3ea83f8ce3c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e110d38c-4b36-417e-9ab6-cad304a49587</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41a7af78-2394-46d0-a1d7-897b737c4fae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0524d26a-8fa5-4524-97d4-1721cd46c9d8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e73ca55c-ccb2-4626-8f66-199c5cb3c08d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76333cec-611d-4545-a169-37eaf4a405e5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>243248d2-e3f0-4743-9e6e-0518b99831cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>670d472b-1f71-4664-b6b6-a5126853ef3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fa6ef50-ede8-4ddc-970e-9ff7a6625e37</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>498c3117-cf06-400e-864e-93f43fce900a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0b07235-fe1b-4a0d-91f4-5dce059daea6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c5aad99-870d-42a3-80c0-5f7589b7ff46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom174-Push-Revoked Certificates Plus Information in Logs" searchProperties="true" id="4493a4fc-7210-478c-bf1a-df6313720bf4">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Change keystore files" id="de65a3a7-f38e-4393-83f6-bb7592c2035d"><con:settings/><con:config><script>// Copy keystore blue nearly expired
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\nearlyExpiredTenDays\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red nearly expired
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\nearlyExpiredTenDays\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="095b6ad1-ee55-44a6-ac87-59dc14068526"><con:settings/><con:config><script>// Stop sender and receiver
//Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Revoked" id="ebdcc8b2-8e0d-4fbd-955c-c57739900126"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\nearlyExpiredTenDays\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\nearlyExpiredTenDays\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="ea75b3ea-e811-40dd-b471-55c46a73251b" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom174-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="530f54aa-a767-4da0-a3da-f840a117d5ee"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="25613cb0-9773-4092-98d0-3543d6d2d550"/><con:assertion type="XPath Match" name="XPath Match" id="c491142a-9415-4d0a-a9ae-55b2d98222ee"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5978371d-94be-414f-a8f0-a8e468dc6549"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Change keystore files 2" id="b3c404ab-16d4-4377-a497-58f28f946c41"><con:settings/><con:config><script>// Copy keystore blue Http_Http
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\nearlyExpiredOneDay\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red Http_Http
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\nearlyExpiredOneDay\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 2" id="5cdc77b1-a51f-4768-8939-e8b937e3006b"><con:settings/><con:config><script>// Stop sender and receiver
//Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Revoked 2" id="004fb969-309d-44a3-9dc6-c4623d73247e"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\nearlyExpiredOneDay\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\nearlyExpiredOneDay\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="6d8253e5-50f1-49f6-8df5-34f43829a3a2" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom174-1-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc7">bdx:noprocess</ns:Service>
               <ns:Action>TC7Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="530f54aa-a767-4da0-a3da-f840a117d5ee"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="25613cb0-9773-4092-98d0-3543d6d2d550"/><con:assertion type="XPath Match" name="XPath Match" id="c491142a-9415-4d0a-a9ae-55b2d98222ee"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5978371d-94be-414f-a8f0-a8e468dc6549"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="2c3be2c9-2b39-4317-b2c1-60a0c3a0b5c5" name="Submit Message 3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 3" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom174-1-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="530f54aa-a767-4da0-a3da-f840a117d5ee"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="25613cb0-9773-4092-98d0-3543d6d2d550"/><con:assertion type="XPath Match" name="XPath Match" id="c491142a-9415-4d0a-a9ae-55b2d98222ee"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5978371d-94be-414f-a8f0-a8e468dc6549"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="17d71ab6-a888-420f-bf8f-109b581cef11" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="8c27cbbc-e99c-40a8-bb31-2782bdb80a6d" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();	
//testRunner.testCase.testSteps['Copy keystore files default'].run(testRunner, context);
//testRunner.testCase.testSteps['Restart Sender and Receiver'].run(testRunner, context);
//testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);


</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d2822aff-64cc-4d3d-b01f-905092eaffb7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b3a9d704-5f48-4b51-845e-30ad56a09d63</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>096cd24a-d7ef-4e0b-9a04-4e3fc56d0c84</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d316f7b3-f2c4-4da0-8ffe-257836a13c90</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>99411964-e893-44cc-b261-1e0b8c271948</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2d6adb0d-a4b5-4d01-b9a1-b3ea83f8ce3c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e110d38c-4b36-417e-9ab6-cad304a49587</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41a7af78-2394-46d0-a1d7-897b737c4fae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0524d26a-8fa5-4524-97d4-1721cd46c9d8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e73ca55c-ccb2-4626-8f66-199c5cb3c08d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76333cec-611d-4545-a169-37eaf4a405e5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>243248d2-e3f0-4743-9e6e-0518b99831cb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>670d472b-1f71-4664-b6b6-a5126853ef3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fa6ef50-ede8-4ddc-970e-9ff7a6625e37</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>498c3117-cf06-400e-864e-93f43fce900a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0b07235-fe1b-4a0d-91f4-5dce059daea6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c5aad99-870d-42a3-80c0-5f7589b7ff46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2d2377c2-6efb-4edd-bed8-f84bd318ba54" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom178-Push-EDELIVERY-2908-Metadata not available/received when using FS Plugin" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Set the fs plugin configuration" id="b96459d2-1bad-4791-808a-e5b8a65e7071"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"- Create the folder structure needed for the fsplugin for both sender and receiver.\n- Set the property \"fsplugin.messages.location\" in the file \"fs-plugin.properties\" to that folder."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS for Blue - FS for Red" id="6e18ac70-73d1-445c-ae14-f1e6e212823c"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendFSPlugin",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="90919f77-ebbc-45cf-86d5-948b397de615" name="Submit Message wsTOfs single payload"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOfs single payload" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom178-1-</ns:MessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the files present in receiver side 1" id="e9094cb0-d6f6-49c8-a906-c3c25ace622f"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check in the receiver's folder \"fsplugin.messages.location\"\\MAIN\\IN\\\"final receiver\"\\\"message id\"\\:\n- file \"metadata.xml\" is present \n- file \"message.xml\" (containing the payload) is present"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="42b4bf48-3bfe-48cb-b60a-a4a356c2c6ef" name="Submit Message wsTOfs 2 payloads"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOfs 2 payloads" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom178-2-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the files present in receiver side 2" id="74d21268-4671-4af3-93f9-cc90b3ba44ea"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check in the receiver's folder \"fsplugin.messages.location\"\\MAIN\\IN\\\"final receiver\"\\\"message id\"\\:\n- file \"metadata.xml\" is present \n- file \"message.xml\" (containing the xml payload) is present\n- file \"attachment.pdf\" (the pdf payload) is present"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="98c2fec6-2300-4688-9e5e-b0779ce1f536" name="Submit Message wsTOfs single payload with name property"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOfs single payload with name property" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom178-3-</ns:MessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                     <ns:Property name="PayloadName">customName.xml</ns:Property>
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the files present in receiver side 3" id="6bf369c8-c453-46d2-9bac-517f91da87a5"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check in the receiver's folder \"fsplugin.messages.location\"\\MAIN\\IN\\\"final receiver\"\\\"message id\"\\:\n- file \"metadata.xml\" is present \n- file \"customName.xml\" (containing the payload) is present"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="96777292-a8b2-4b57-8105-49ede5a29113" name="Submit Message wsTOfs 2 payloads with name property"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOfs 2 payloads with name property" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom178-4-</ns:MessageId>
            </ns:MessageInfo>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                     <ns:Property name="PayloadName">some-name.xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                     <ns:Property name="PayloadName">newName.pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the files present in receiver side 4" id="076bd69f-fb01-4e01-8bd5-aefaa1c90e2f"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check in the receiver's folder \"fsplugin.messages.location\"\\MAIN\\IN\\\"final receiver\"\\\"message id\"\\:\n- file \"metadata.xml\" is present \n- file \"some-name.xml\" (containing the xml payload) is present\n- file \"newName.pdf\" (the pdf payload) is present"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="923cd045-a449-47dd-8654-d9e354fb22d2" name="Submit Message wsTOfs payloadName property Empty"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOfs payloadName property Empty" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom178-5-</ns:MessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                     <ns:Property name="PayloadName"></ns:Property>
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="Not SOAP Fault Assertion" id="79346537-05bc-4b04-b96e-64d021962367" name="SOAP Fault"/><con:assertion type="Valid HTTP Status Codes" id="625b35ab-72fc-402f-8569-72e754cb6d78" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS Blue" id="7c472f1e-2f99-4437-8297-e9fded43b352"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendFSPlugin",context,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Send a message using fs plugin" id="16161dce-9f52-4600-a150-73fdcd8d4eff"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Check the files present in receiver side 5" id="fc6526f9-6857-4e60-82ac-c661643fbe58"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check in the receiver's folder \"fsplugin.messages.location\"\\MAIN\\IN\\\"final receiver\"\\\"message id\"\\:\n- file \"metadata.xml\" is present \n- file \"payload_name_as_in_sender_folder\" (containing the payload) is present"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS Blue-Red" id="c1b3becb-8faa-4233-90a8-4db81da1c601" disabled="true"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendWebservice",context,log);


</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom178-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>32187c3e-10a4-4f74-bb76-0024b1cf6dc0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="d6db00d5-fdc6-458a-b1bd-e45fb657ebe9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom179-EDELIVERY-3067-Cron jobs running every second" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Start Blue-Red" id="a0cb1139-46a2-4cfc-9fbd-bfb397a6ba75"><con:settings/><con:config><script>// Start 2 Domibus: sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Check the log files" id="af8c2c84-6403-4d55-8b21-9e306c51324b"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check the log files of the sender and the receiver:\n no logs appear every 1 second.\n(Verify the cron jobs configuration parameters)"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom180-EDELIVERY-973-Sending a message to the same Access Point-ws filter" searchProperties="true" id="d7932486-8ad4-47c1-9e8d-b163b4813b5d">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set Message Filters to WS for Blue" id="427db3d9-8d66-4ed0-be15-1222132cdeb0"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="236ee2b6-bf32-47c8-acd2-932a61de0c49" name="Submit Message wsTOws 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOws 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom180-1-1-</ns:MessageId>\r
               <ns:RefToMessageId>12349999</ns:RefToMessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","","-Dom180-1-1-");
test.waitForStatus("RECEIVED","","-Dom180-1-1-_1");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>cf853837-994e-444f-ae08-b020737f3415</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f80013d1-4b30-447a-bd99-09d75ac2c0b3" name="Submit Message wsTOws 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOws 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom180-1-2-</ns:MessageId>\r
               <ns:RefToMessageId>12349999</ns:RefToMessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-white</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc2">bdx:noprocess</ns:Service>\r
               <ns:Action>TC2Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","","-Dom180-1-2-");
test.waitForStatus("RECEIVED","","-Dom180-1-2-_1");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>9bffc075-5de7-4114-9a60-01d98c70feb6</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Submit Message jmsTOws 1" id="6d1a4ffa-3bce-48f4-b07b-782626547390"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-blue");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-Dom180-2-1-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload1 = pay1.getBytes();
messageMap.setBytes("payload_1", payload1);

messageMap.setStringProperty("payload_2_mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2_mimeType", "application/pdf");
messageMap.setStringProperty("payload_2_description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);


log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test jmsTOws 1" id="6149f7d2-0664-4c81-8b1b-629cff57ec65"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","","-Dom180-2-1-");
test.waitForStatus("RECEIVED","","-Dom180-2-1-_1");
test.finalize()</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message jmsTOws 2" id="d69acbb1-14ca-4cde-b07c-dfcf404e2857"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc2");
messageMap.setStringProperty("action", "TC2Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-white");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-Dom180-2-2-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload1 = pay1.getBytes();
messageMap.setBytes("payload_1", payload1);

messageMap.setStringProperty("payload_2_mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2_mimeType", "application/pdf");
messageMap.setStringProperty("payload_2_description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);


log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test jmsTOws 2" id="dedaca5e-2c86-4831-8144-b11ed1df3786"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","","-Dom180-2-2-");
test.waitForStatus("RECEIVED","","-Dom180-2-2-_1");
test.finalize()</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message fsTOws 1" id="76bae22a-dadf-4744-a992-3fe6ac4d4397"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Test fsTOws 1" id="eacb617d-399a-475a-8283-52dc36f2ebb1"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that the messages are correctly sent/received in the sender side."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message fsTOws 2" id="1177106b-c907-4de4-b48d-3efec4a27dad"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\doNothingPolicy\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test fsTOws 2" id="e95f7d8c-1642-489a-a7cd-d9c0eb835d11"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that the messages are correctly sent/received in the sender side."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-Dom180-');
test.finalize();	

ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom181-EDELIVERY-973-Sending a message to the same Access Point-jms filter" searchProperties="true" id="f2a03ac0-87f0-431b-8782-c8244ddf74de">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set Message Filters to JMS for Blue" id="d34a78e2-a3f2-4f92-bfe7-4aa8a1072fe2"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","Jms",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="ba5c13f2-aea8-4e52-9e1e-4e62fae2d4b1" name="Submit Message wsTOjms 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOjms 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom181-1-1-</ns:MessageId>\r
               <ns:RefToMessageId>12349999</ns:RefToMessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","","-Dom181-1-1-");
test.waitForStatus("DOWNLOADED","","-Dom181-1-1-_1");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>c396a4d4-ba46-4e4d-80e4-1719516d0df5</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="1f138a6f-a555-4764-9bc7-775e2c7a77e7" name="Submit Message wsTOjms 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOjms 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom181-1-2-</ns:MessageId>\r
               <ns:RefToMessageId>12349999</ns:RefToMessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-white</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc2">bdx:noprocess</ns:Service>\r
               <ns:Action>TC2Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","","-Dom181-1-2-");
test.waitForStatus("DOWNLOADED","","-Dom181-1-2-_1");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>ddb63ef1-8988-40d3-804a-8aed6b31ec68</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Submit Message jmsTOjms 1" id="0f7921c8-addb-4fb4-84b4-354f99487478"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-blue");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-Dom181-2-1-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload1 = pay1.getBytes();
messageMap.setBytes("payload_1", payload1);

messageMap.setStringProperty("payload_2_mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2_mimeType", "application/pdf");
messageMap.setStringProperty("payload_2_description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);


log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test jmsTOjms 1" id="8f740a0b-0ae7-4fa1-a9fa-d19de7f61e49"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","","-Dom181-2-1-");
test.waitForStatus("DOWNLOADED","","-Dom181-2-1-_1");
test.finalize()</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message jmsTOjms 2" id="48e7f27c-f1f5-4a92-a27e-2761e79397a7"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc2");
messageMap.setStringProperty("action", "TC2Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-white");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-Dom181-2-2-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload1 = pay1.getBytes();
messageMap.setBytes("payload_1", payload1);

messageMap.setStringProperty("payload_2_mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2_mimeType", "application/pdf");
messageMap.setStringProperty("payload_2_description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);


log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test jmsTOjms 2" id="020e2786-1842-4f23-b2d4-ba13b2026d1e"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","","-Dom181-2-2-");
test.waitForStatus("DOWNLOADED","","-Dom181-2-2-_1");
test.finalize()</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message fsTOjms 1" id="1ee51480-96c8-4ce4-a206-504da4650e8d"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test fsTOjms 1" id="4e2f0891-3658-46bd-b73f-87cf03d4d33b"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that the messages are correctly sent/received in the sender side."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message fsTOjms 2" id="8b0eab11-527f-473c-b40c-a9bff46d6e7b"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\doNothingPolicy\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test fsTOjms 2" id="67371571-c350-4ee9-8a4c-729dd0fa257f"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that the messages are correctly sent/received in the sender side."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS for Blue" id="1e17d569-9781-484f-8342-1e23cad15e8e" disabled="true"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);

</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-Dom181-');
test.finalize();	

ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom182-EDELIVERY-973-Sending a message to the same Access Point-fs filter" searchProperties="true" id="412e46d0-dc31-4440-934c-b58294e299fe">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set Message Filters to FS for Blue" id="8b98ace8-a158-43a1-a4b8-5c91cec77052"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendFSPlugin",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="87ff16f1-b163-419f-ae55-f205a3fb11ea" name="Submit Message wsTOfs 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOfs 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom182-1-1-</ns:MessageId>\r
               <ns:RefToMessageId>12349999</ns:RefToMessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","","-Dom182-1-1-");
test.waitForStatus("DOWNLOADED","","-Dom182-1-1-_1");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>012455a6-6a66-4c63-b0c0-4bc06ed00fe8</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c495d9c2-b927-442c-8ae6-494df592b0a9" name="Submit Message wsTOfs 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message wsTOfs 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom182-1-2-</ns:MessageId>\r
               <ns:RefToMessageId>12349999</ns:RefToMessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-white</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc2">bdx:noprocess</ns:Service>\r
               <ns:Action>TC2Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","","-Dom182-1-2-");
test.waitForStatus("DOWNLOADED","","-Dom182-1-2-_1");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>9427f3f2-5bb0-47e3-a751-6af7a7177d6d</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Submit Message jmsTOfs 1" id="02ed32dd-8a51-4ce6-b2d6-c2e367a6fb5a"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc10");
messageMap.setStringProperty("action", "TC10Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-blue");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-Dom182-2-1-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

// messageMap.setJMSCorrelationID("12345");

messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload1 = pay1.getBytes();
messageMap.setBytes("payload_1", payload1);

messageMap.setStringProperty("payload_2_mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2_mimeType", "application/pdf");
messageMap.setStringProperty("payload_2_description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);


log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test jmsTOfs 1" id="47c03f13-5462-4fb6-be26-8a588f332097"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","","-Dom182-2-1-");
test.waitForStatus("DOWNLOADED","","-Dom182-2-1-_1");
test.finalize()</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message jmsTOfs 2" id="7f90c827-6215-4395-85e9-b7622024e16f"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
Destination destination = session.createQueue("domibus.backend.jms.inQueue");
producer = session.createProducer(destination);
producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
MapMessage messageMap = session.createMapMessage();

messageMap.setStringProperty("messageType", "submitMessage");
messageMap.setStringProperty("service", "bdx:noprocess");
messageMap.setStringProperty("serviceType", "tc2");
messageMap.setStringProperty("action", "TC2Leg1");
messageMap.setStringProperty("fromPartyId", "domibus-blue");
messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("toPartyId", "domibus-white");
messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");
messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
messageMap.setStringProperty("protocol", "AS4");


// Optional
messageMap.setStringProperty("messageId", "-Dom182-2-2-");
// messageMap.setStringProperty("conversationId", "123");
// messageMap.setStringProperty("refToMessageId", "11");
 

messageMap.setStringProperty("totalNumberOfPayloads", "2");
messageMap.setStringProperty("payload_1_mimeContentId", "cid:message");
messageMap.setStringProperty("payload_1_mimeType", "text/xml");
messageMap.setStringProperty("payload_1_description", "message");
String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload1 = pay1.getBytes();
messageMap.setBytes("payload_1", payload1);

messageMap.setStringProperty("payload_2_mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2_mimeType", "application/pdf");
messageMap.setStringProperty("payload_2_description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);


log.info "sending message"
producer.send(messageMap);
log.info "message sent"

connection.close();</script></con:config></con:testStep><con:testStep type="groovy" name="Test jmsTOfs 2" id="b1c8a523-128f-4d6f-85b0-71ccd2fd24d6"><con:settings/><con:config><script>def test = new Domibus(log,null,context)
test.waitForStatus("ACKNOWLEDGED","","-Dom182-2-2-");
test.waitForStatus("DOWNLOADED","","-Dom182-2-2-_1");
test.finalize()</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message fsTOfs 1" id="26ca8fe4-22e5-4661-8d06-d8a0e2008201"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test fsTOfs 1" id="60024142-9056-462f-b299-ce146c1328b0"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that the messages are correctly sent/received in the sender side."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message fsTOfs 2" id="f56f40f7-a402-4ad1-a474-c91938512294"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\self\\doNothingPolicy\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test fsTOfs 2" id="1b53f371-5c66-4d9d-bc12-abdcc2fd4003"><con:settings/><con:config><script>// TODO: investigate automation

def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that the messages are correctly sent/received in the sender side."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS for Blue" id="346a8cc3-7cbc-422a-aa0c-fbd242cb5c0d" disabled="true"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);

</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-Dom182-');
test.finalize();	

ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom185-Push-Submit Message-ConversationId present" searchProperties="true" id="a7a18acd-a0c5-45a4-8629-75335afa0860" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="d1a8914b-71c1-4ece-9853-58bcf3eff7d2" name="Submit Message with conversationId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with conversationId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom185-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
               <ns:ConversationId>-Dom185-1-123456</ns:ConversationId>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4aea63dd-430c-4d82-a99c-9857967d14c3"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1f63c004-1775-41f1-adbf-4eec2cab64db"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="051886c9-4f86-4b14-8f9a-44b1a10b2c50"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d4f20e22-9806-4d17-8433-5a346189b433"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the log file 1" id="e22d2435-eef3-47e2-b861-66350d4cb934"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check the log file for message Sender (DEBUG logs option is on) (in \\Installation path\\domibus\\logs: in the AS4 created message,\n\"ConversationId\" element is present with value \"-Dom185-1-123456\"."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}</script></con:config></con:testStep><con:testStep type="request" id="f5ab4a1c-2dea-4ea7-adb0-b3376b26aece" name="Submit Message without conversationId"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message without conversationId" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
         	  <ns:MessageInfo>
            	<ns:MessageId>-Dom185-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the log file 2" id="f9e6d12e-07c1-4326-9ebb-cbcd18108c3d"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check the log file for message Sender (DEBUG logs option is on) (in \\Installation path\\domibus\\logs: in the AS4 created message,\n\"ConversationId\" element is present (with an auto-generated value)."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}</script></con:config></con:testStep><con:tearDownScript>
ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom185-");
test.finalize();	
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom303-Pull-Submit Message-Exceptional flow-No receipt" searchProperties="true" id="b1241225-6e90-4483-a257-43c39d7d8b01">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Stop Receiver MSH" id="3cdf8f34-721f-49b7-916c-8bb68b28e36e"><con:settings/><con:config><script>Domibus.stopMSH("receiver",context, log);</script></con:config></con:testStep><con:testStep type="request" id="d406dbb6-9437-4a62-b218-e7f2af44d60f" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom303-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="b09ff2a9-7316-406b-aacc-cd6273c563f2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="48b4f9c8-c628-4cd0-92ec-6fe237c596ee"/><con:assertion type="XPath Match" name="XPath Match" id="f2773a10-8752-47d0-a67a-987d493ee481"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a7594c9b-fffe-42e9-b335-3eeea24c0ff4"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL",null, null, "long wait");
test.verifyMessagePresence(1,0);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom303-");
test.finalize();
Domibus.startMSH("receiver", context, log)
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom304-Pull-Submit message-Exceptional flow-retry max not reached" searchProperties="true" id="b0f6565f-63c2-4783-9f46-e520c6c22adb">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Stop Receiver MSH" id="78802102-8439-44b6-817c-def3d2ca5bb2"><con:settings/><con:config><script>Domibus.stopMSH("receiver", context, log);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="5eaaaad6-e677-424a-90e5-48f0e3adc406"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="a38e2223-379f-43e8-823a-d18a568abb61" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom304-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="42b93b9b-3898-43eb-ae9e-17ddca308a06"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="1a2d4133-cf3b-456e-93ec-863668d51326"/><con:assertion type="XPath Match" name="XPath Match" id="b864a879-3367-4810-90bf-228f6ecc56c8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1082515e-e592-4d94-b25d-8698cfa053d2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL",null,null,"Long wait");
test.verifyMessagePresence(1,0);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Start Receiver MSH" id="a5ebd526-fe91-4c64-b035-ef6def30c2a4"><con:settings/><con:config><script>Domibus.startMSH("receiver", context, log);
</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="d22a0462-4fa7-4682-b4e3-13dfafe68bb9"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Check message submitted" id="47855125-259c-4d24-96ba-41ac5a1346ec"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED","-Dom304-","Long");
test.finalize();</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom304-");
test.finalize();

Domibus.startMSH("receiver", context, log);

//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fec5eaa6-eb1f-4928-91f2-18cbee9d9a0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom305-Pull-Submit message-Exceptional flow-retry max reached" searchProperties="true" id="179259d1-341f-45da-94fd-bf28beda4afe">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Stop Receiver MSH" id="a8cbde56-a90a-4ca6-8149-6c4e7c6ba43a"><con:settings/><con:config><script>Domibus.stopMSH("receiver",context,log)</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="68b8287b-f857-4a0f-beb2-7881d2267ead"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="e2f93509-f1f3-44e6-8e36-8b0b8060bb59" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom305-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="38aac512-5223-4773-9a2e-903fa14eebc7"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d60a2e2f-89f7-4d10-aecb-57a39479fa55"/><con:assertion type="XPath Match" name="XPath Match" id="f591fb10-9686-491b-ae43-d6284d2e9042"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="815aea7e-4a63-4727-8141-93674fc9401d"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL",null,null,"Wait for Sender status");
test.verifyMessagePresence(1,0);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="5c8f3951-6298-41d7-a738-41d864bd8627"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Check message submitted" id="1cafdf72-9b5a-4c24-a991-437e18496ea3"><con:settings/><con:config><script>def test = new Domibus(log,messageExchange,context)
test.waitForStatus("SEND_FAILURE",null,"-Dom305-")
test.verifyMessagePresence(1,0,"-Dom305-")
test.finalize()</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom305-");
test.startMSH("receiver",context,log);
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b5e2d58-7565-4f1a-a207-dec52faddd39</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom312-Pull-Submit message-Exceptional flow-Data-RefToMessageId-Format" searchProperties="true" id="ec7c2d3b-9306-4ac5-9d33-af769001a9a7">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Check XSD validation enabled" id="ae3fc6d0-c428-4ccd-b166-1a77a47a7847"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
Plugin security needs to be turn enabled
Set wsplugin.schema.validation.enabled=true in ws-plugin.properties file.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="request" id="510fc29f-ca76-4dc6-9571-d874491beb60" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom312-1-</ns:MessageId>\r
               <ns:RefToMessageId></ns:RefToMessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc14">bdx:noprocess</ns:Service>\r
               <ns:Action>TC14Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="664902de-7c05-4526-b1cb-b4ae0cf78202"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f5690517-addc-47fd-a52c-634c946ebc32"><con:configuration><scriptText>def test = new Domibus(log, messageExchange, context);
test.verifyMessagePresence(0,0,"-Dom312-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="72129cbd-09a8-4875-9aec-c9caaecd437a"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bcd5a317-1146-4ccc-87ec-af11df617030" name="Contains"><con:configuration><token>(?s).*cvc-minLength-valid.*max255-non-empty-string.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" id="feee79cf-8d02-4d54-bdfc-63fa9a8de6a3" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="d27188a1-c703-48d0-9097-c39161f5f163" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom312-2-</ns:MessageId>
               <ns:RefToMessageId>	</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a2f3f264-407f-4490-8286-d590010b849c"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="e03ad8e1-c659-4598-83a6-c6d7cbad19b4"><con:configuration><scriptText>def test = new Domibus(log, messageExchange, context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4e493c35-1af5-4798-8d70-308fc4afddde"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="6726d710-4c9f-476c-b75f-7e86b68a967f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom346-Pull-Submit message-Exceptional flow-Data-AgreementRefId-Empty" searchProperties="true" id="d5881cc4-6f35-4e72-bacc-bf066c685b1e">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Check XSD validation enabled" id="8e368847-92c7-40ab-a2ba-5324cb5544a8"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
Plugin security needs to be turn enabled
Set wsplugin.schema.validation.enabled=true in ws-plugin.properties file.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="request" id="6e9a11e7-4683-491d-bbb9-f07097a6ca65" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom346-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef></ns:AgreementRef>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="5630d98f-af92-4145-92f0-781e0e0b29c0"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="736fcefe-059a-4154-a24c-21888fc2f1af"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom346-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="8755c05a-8d09-4cb9-90e5-a6dc398c2b31"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" id="fb1b24df-0f0e-496b-84e0-e54932e72a6f" name="SOAP Fault"/><con:assertion type="Simple Contains" id="0da879bb-6cbd-4f07-98b7-ce8274f88642" name="Contains"><con:configuration><token>(?s).*cvc-minLength-valid.*max255-non-empty-string.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Request#//ns:MessageId}' )
test.cleanDBMessageID(msgID)
test.finalize()
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom401-Pull-Test Experience-encryption algorithm" searchProperties="true" id="3f1e1d40-88ba-4971-a39e-e4d1878893a2">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="b0ac1b5d-dab8-4dde-8a22-cfdd96404309" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d3034acc-2bbb-48b6-8b0f-3da3480acc90"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="a0672ba5-9a21-4a6a-802f-5938b46d0456"/><con:assertion type="XPath Match" name="XPath Match" id="eb0cd69d-d472-4bf4-b66c-c7acbea38e01"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f31bafde-5378-4339-8d46-0001a32fbe0c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the log file" id="8e7d5934-491c-4a88-87a6-570188131227"><con:settings/><con:config><script><![CDATA[def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Check the log file for message Sender (DEBUG logs option is on) (in \\Installation path\\domibus\\logs:
- EncryptionMethod Algorithm is set to: http://www.w3.org/2009/xmlenc11#rsa-oaep.
- MGF Algorithm is set to: http://www.w3.org/2009/xmlenc11#mgf1sha256.
- DigestMethod Algorithm is set to: http://www.w3.org/2001/04/xmlenc#sha256.

After the manual check of the expected result:
- Click Yes when result is correct.
- Click No when result is incorrect. 
- Click Cancel to skip this check."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

	/* 
	 *  TODO Automate this
	 *  
	 *  in dombius.log file: 
	 *  
	  <xenc:EncryptionMethod Algorithm="http://www.w3.org/2009/xmlenc11#rsa-oaep">
<xenc11:MGF xmlns:xenc11="http://www.w3.org/2009/xmlenc11#" Algorithm="http://www.w3.org/2009/xmlenc11#mgf1sha256"/>
<ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>

            <xenc:EncryptionMethod Algorithm="http://www.w3.org/2009/xmlenc11#rsa-oaep">
               <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" xmlns:ds="http://www.w3.org/2000/09/xmldsig#"/>
               <xenc11:MGF Algorithm="http://www.w3.org/2009/xmlenc11#mgf1sha256" xmlns:xenc11="http://www.w3.org/2009/xmlenc11#"/>
            </xenc:EncryptionMethod>
	 */]]></script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();

//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>08a9d62f-4b92-46b4-b656-bdff44743135</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom409-Pull-Manual Retention Change" searchProperties="true" id="7baf80ad-c08e-4c95-9758-943551841a11">
            <con:settings/>
            <con:testStep type="groovy" name="Description" id="01a9dc5b-d9d1-495d-a22d-2194a2d13ad2"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck(
	"""Test several retention values for downloaded and undownloaded messages.
	Retension parameter shouble be changed in PMode file for Receiver and new PMode need to be uploaded.""" , log, testRunner); </script></con:config></con:testStep>
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="4256ccf3-091a-434f-833b-37713acf629f" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom409-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc15">bdx:noprocess</ns:Service>
               <ns:Action>TC15Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3f482ecb-8497-427d-8cfc-796847e55e5b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e4069868-b8e0-4d35-9531-63908ba79c25"/><con:assertion type="XPath Match" name="XPath Match" id="0cb9bb05-6fb6-4123-8cf3-c28ebd53c673"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1ed02d17-87ca-4ffc-a739-21a4ad19ea8c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="48eb4290-e5dc-4c14-8928-97025ee0eb42" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom409-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc15">bdx:noprocess</ns:Service>
               <ns:Action>TC15Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="868e8bf8-475a-43a0-a8b5-07a201994850"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="4fce2365-e365-424f-8f7d-9120fa616c07"/><con:assertion type="XPath Match" name="XPath Match" id="4af7130a-5f51-43b9-8b03-416bbfcdb458"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1f47a980-5036-4bde-adda-6b3162286645"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ce963fa7-05c8-49da-8c1e-535453988019"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="request" id="990b1d76-3bfc-4ddc-a66e-803af43b7e3d" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message 1#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="7507d87e-0b5e-49e2-ae78-a69d70a5749a"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="6e2d30b5-28b8-46d9-b0c6-1917b9758ce3"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="cdd8de11-4c9f-4921-88ba-e3567e26fabe"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom099-2-");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)
//def test = new Domibus(log,null,context);
//test.cleanDBMessageIDStartsWith("-Dom409-");
//test.finalize();
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46a821e6-6caf-43f3-8f1e-fc16fd2acf61</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3839a52-98bf-4836-bfd0-d66c9077dc86</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f5256d54-eb04-4164-b2f7-6da2314a570f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3499e85-3074-4087-83b6-890f629307f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2c4e25f1-0b16-4e71-ba71-fd4cf158d76d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom423-Pull-EDELIVERY-1686-Manual-The message receive failure notifications are not sent" searchProperties="true"><con:description>1. Change attributes for errorHandling in PMode file for Receiver 
&lt;errorHandlings>
	&lt;errorHandling name="demoErrorHandling" errorAsResponse="true" businessErrorNotifyProducer="true" businessErrorNotifyConsumer="true" deliveryFailureNotifyProducer="true"/>
&lt;/errorHandlings>

2. Reload PMode with changed value

3. Change filters order for Receiver - put JMS at top position

4. Submit a message. In this test to standard message with attachment optional property was added: 
                     &lt;ns:Property name="CharacterSet"> #UTF-8&lt;/ns:Property>
This incorrect Charset should result with exception raised in checkCharset method.

5. Confirm " #UTF-8  is not a valid Charset" message in domibus.log for Sender

6. Validate that in queue jms/domibus.backend.jms.errorNotifyConsumer error message is present with correct content.

7. Reset Pmode and filtering to default.
</con:description><con:settings/><con:testStep type="groovy" name="Upload P-Mode red-businessErrorNotifyConsumer-enabled" id="75f194fb-6ba0-415a-955e-cfcad3f04b91"><con:settings/><con:config><script>Domibus.uploadPmode("receiver","special","\\errorNotif\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Update Message Filter on red To JMS" id="76cfc3c9-2cb6-4c96-b5a8-b54cd1a73fa5"><con:settings/><con:config><script>Domibus.setMessageFilters("receiver","jms",context,log);</script></con:config></con:testStep><con:testStep type="request" id="930b110a-a3b4-41b9-9786-02ea72a3769d" name="Submit Message with incorrect Charset for Attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with incorrect Charset for Attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom423-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                     <ns:Property name="CharacterSet"> #UTF-8</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>

      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6bfde16c-412b-4699-a0a2-8917010f5e80"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="44d52d43-1352-4ba0-b8e8-3f646aa583c3"/><con:assertion type="XPath Match" name="XPath Match" id="afa3c42f-087e-479c-97c5-a8b35f44faf9"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="f733d589-5208-49b7-81ec-09c7eb890a62"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>11ec7aca-298e-48f6-8bed-b0cb766b9de0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Verification" id="67d0d09c-6051-490f-b4a6-be88e411976c"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
In this test case optional property was added to standard message with attachment: 
	&lt;ns:Property name="CharacterSet"> #UTF-8&lt;/ns:Property>
This incorrect Charset should result with exception raised in checkCharset method.

- Confirm " #UTF-8  ... Invalid charset ..." message in domibus.log for Receiver

- Validate that in queue jms/domibus.backend.jms.errorNotifyConsumer error message is present with correct content.""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Restore default PMode red" id="bbacdbdc-9830-469e-9353-bcb20c666221" disabled="true"><con:settings/><con:config><script>// Upload PMode: default Pmode red for receiver  
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restore Message Filter on red To WS" id="de3ee707-10a3-418f-8495-f647a0ebd5b2" disabled="true"><con:settings/><con:config><script>Domibus.setMessageFilters("receiver","webservice",context,log);</script></con:config></con:testStep><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log);
def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom423-");
test.finalize();
testRunner.testCase.testSuite.project.testSuites["Administration"].testCases["Start default configuration"].run(new com.eviware.soapui.support.types.StringToObjectMap(), false);
</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>794b7679-4f04-4b8f-8ac9-92488a86dd2d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc2ee100-3e68-43c6-b5fa-32ba57db4ddf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="bae2893d-792e-4b39-a9b1-b1aeb5f30929" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom424-Pull-EDELIVERY-1721-Manual-HTTPClientPolicy: the connection and the receive timeout are hard coded" searchProperties="true"><con:description><![CDATA[1. In domibus-configuration.xml file for Sender add/change values for properties connectionTimeout and receiveTimeout to values: 
	<prop key="domibus.dispatcher.connectionTimeout">2</prop>
	<prop key="domibus.dispatcher.receiveTimeout">2</prop>
Now sending message with big attachment should fail with timeout error.

2. Restart Sender

3. Sent Submit message. 

4. Confirm "java.net.SocketTimeoutException: SocketTimeoutException invoking http://localhost:8180/domibus/services/msh: Read timed out" error message is present in domibus.log for Sender.

5. In domibus-configuration.xml file for Sender increase values for properties connectionTimeout and receiveTimeout to values:  
	<prop key="domibus.dispatcher.connectionTimeout">200000</prop>
	<prop key="domibus.dispatcher.receiveTimeout">200000</prop>

6. Restart Sender

7. Sent Submit message once again (with changed messageID) 

8. Validate message was received this time

9. Change back configuration to previous state.
]]></con:description><con:settings/><con:testStep type="groovy" name="Preconfiguration" id="d14addf8-4983-4c96-a544-063f3c4ccdb7"><con:settings/><con:config><script>def propValueDict = ["domibus.dispatcher.connectionTimeout" : "2","domibus.dispatcher.receiveTimeout" : "2"]

Domibus.changeDomibusProperties("BLUE", propValueDict,  log, context, testRunner)
Domibus.changeDomibusProperties("RED", propValueDict,  log, context, testRunner)</script></con:config></con:testStep><con:testStep type="groovy" name="Restart sender and receiver 1" id="041d9bb1-77fb-4911-b341-710bc9a8545b"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="request" id="7f5d0c73-a7e3-4b0b-990f-f5d274001483" name="Submit Message with Attachments 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with Attachments 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom424-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="XPath Match" name="XPath Match" id="eb0cd69d-d472-4bf4-b66c-c7acbea38e01"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="SOAP Response" name="SOAP Response" id="ba115558-1af0-4ef0-b589-558ac1c7ec07"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="3f0a2206-16c2-4d97-9961-8f1ab8f2c14e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f9d7aea0-ae8b-4eea-8e5e-35bf9a6e6d83"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RECEIPT","");
test.finalize();

def testSecond = new Domibus(log,messageExchange,context);
testSecond.verifyMessagePresence(1,0,"-Dom424-1-","C2Default", "C3Default");
testSecond.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/octet-stream</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment} </con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Verification" id="bc7da2e4-b44e-42a2-84e2-5f522b1532b1"><con:settings/><con:config><script>Domibus.showPopUpForManualCheck("""\
Confirm "java.net.SocketTimeoutException: SocketTimeoutException invoking http://localhost:8180/domibus/services/msh: Read timed out" 
error message is present in domibus.log for Sender.""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Change configuration" id="d80201b6-09af-4643-b6fc-262248b9341a"><con:settings/><con:config><script>def propValueDict = ["domibus.dispatcher.connectionTimeout" : "200000","domibus.dispatcher.receiveTimeout" : "200000"]

Domibus.changeDomibusProperties("BLUE", propValueDict,  log, context, testRunner)
Domibus.changeDomibusProperties("RED", propValueDict,  log, context, testRunner)</script></con:config></con:testStep><con:testStep type="groovy" name="Restart sender and receiver 2" id="d3749815-d20a-4c87-8ad6-2755da20aa67"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="request" id="353a3eaa-b45a-4314-873e-3044b3ed88fa" name="Submit Message with Attachments 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with Attachments 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom424-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="75242e4b-5142-40f9-9526-41ec69f89484"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="10c71d59-38b5-4046-8b61-ce5b29b13caf"/><con:assertion type="XPath Match" name="XPath Match" id="d020af5b-2ee6-499e-b9fb-e429ad1581c7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bafba71b-91c6-4bd9-9260-fe1b7c67ed89"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment} </con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Postconfiguration" id="d695391f-cfcf-4988-bfcf-0bafda063994"><con:settings/><con:config><script>Domibus.restoreDomibusPropertiesFromBackup("BLUE",  log, context, testRunner)
Domibus.restoreDomibusPropertiesFromBackup("RED",  log, context, testRunner)</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom424-");
test.finalize();
////ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f58da1b1-9588-4bc3-b485-75cdc05031b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b989b3b2-e25a-40dd-b532-c01531d3f800</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41ae593a-fb05-4a98-98b2-738318e99ba9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f546feed-ebae-4d44-8f56-e7f287893fd7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0074d589-8e20-443f-a0e9-154fb383fcf3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom425-Pull-EDELIVERY-1731-Manual- CXF attachment temporary files leakage" searchProperties="true"><con:description>- Add the following property in file domibus-configuration for both sender and receiver: 
	&lt;prop key="domibus.attachment.storage.location">../payloads&lt;/prop> 
- Create folder "payloads" in under the domibus root folder of both sender and receiver 
</con:description><con:settings/><con:testStep type="groovy" name="Preconfiguration" id="220fd776-7e8e-4da0-8a85-a60f593f0587"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Add the following property in file domibus.properties for both sender and receiver: 
	&lt;prop key="domibus.attachment.storage.location">../payloads&lt;/prop> 
- Create folder "payloads" in under the domibus root folder of both sender and receiver 
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Restart APs" id="823dfcf8-b132-4d6b-ad3b-e5163eff7c82"><con:settings/><con:config><script>// Stop 2 Domibus: sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);

// Start 2 Domibus: sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="request" id="9795b149-c766-452c-99b1-5e5b454302d6" name="Submit Message with very Big attachment"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message with very Big attachment" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="WsdlSettings@enable-mtom">true</con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom425-${=new Date().format("yyMMdd-HHmmss")}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="93b867f8-6ae7-4bbd-8fb2-2e38dbeb73d2"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="869c5b29-0cfc-424c-9af2-efaed49d64d1"/><con:assertion type="XPath Match" name="XPath Match" id="66fd2577-7f41-412b-a263-82f42a176f9f"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0244942e-7205-4e48-b37a-0cd979ec5bcf"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED",null, "Long wait");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>C:/ec/soapui/resources/fileSmall.pdf</con:url><con:id>15801bd3-4e9f-4fd1-a6c4-d212fd0402c0</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a009eaf3-b981-45f6-b690-9bab0620b154"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="request" id="c51067e2-1447-4f68-a90e-f3bc4f61ae33" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message with very Big attachment#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c00862e8-55a9-45fd-a1c6-931cab224e25"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e12b5a02-5506-4d93-aa02-364ceab3eb5e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d1122dec-3cac-41a7-aae6-7577349b2c8a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
def mssgID = context.expand('${Submit Message with very Big attachment#Response#//messageID}')
log.info mssgID
//test.waitForStatus("ACKNOWLEDGED","DELETED",mssgID);
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="79c873b6-f63e-4831-adf4-0a6f7b5fd365"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom265-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ae392797-6456-42c4-994c-bbe60c11540c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>63989107-7510-4f1a-b2f4-e46d2bba1ff4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5abb4c7c-a055-4115-b36d-c347d0a50516</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom427-Pull-EDELIVERY-2061-Combined support for 1-way and 2-way SSL by Domibus" searchProperties="true" id="ffb3a7d9-bbfa-4867-b99e-6a842a40d4a0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="916ca942-d585-4141-a65b-9c733ec0ac9d"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Please apply the following configuration and start the gateways:\n- 1 sender domibus configured for both 1-way and 2-way SSL client (green)  \n- receiver domibus configured as 1-way ssl server (blue) \n- receiver domibus configured as 2-way ssl server (red) \n- Configuration details can be found on the Administration Guide (9.1.3 and 9.1.4)");
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to true" id="62c1a7e0-e2c0-47c7-a2a5-e68e7ef4fdb7"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set true'].run( testRunner, context );
</script></con:config></con:testStep><con:testStep type="groovy" name="Start the 3 configured gateways" id="255105c2-e819-4c93-8d57-1458968df994"><con:settings/><con:config><script>
def result=javax.swing.JOptionPane.showConfirmDialog( null,"Start the 3 configured gateways.");
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload P-Modes blue-red-green" id="02b68f1b-f98d-4e5f-9889-060db7656b7d"><con:settings/><con:config><script>// Upload PModes: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadPmode("sender","special","\\Threegateways\\blue\\ssl\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\Threegateways\\red\\ssl\\domibus-pmode-red.xml",context,log);
Domibus.uploadPmode("receivergreen","special","\\Threegateways\\green\\ssl\\domibus-pmode-green.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red-Green" id="324be294-1f96-43e2-9b0f-8da5ea294b93"><con:settings/><con:config><script>// Upload truststores: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadTruststore("sender","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\Threegateways\\red\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receivergreen","special","\\Threegateways\\green\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="01cd5ff1-bae0-4b96-8d3b-d1bc9dac4957"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="969ebd21-f744-4aba-9ec4-2b5de72cdb20" name="Green To Blue 1-way ssl"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Blue 1-way ssl" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom427-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc51">bdx:noprocess</ns:Service>
               <ns:Action>TC51Leg11</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_BRIS</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="abb8fb7b-d670-4863-a9ed-32659c7b3fcc"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="706af1bd-8891-4997-b392-e6a040b2e1dc"/><con:assertion type="XPath Match" name="XPath Match" id="4d066b30-af53-4fbd-8376-2bc693675947"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="35442fce-94a4-4a4e-8551-a063ec627e4c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C2Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="f8454f6d-0a8e-4ed2-b146-2dceb042bc8c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="7d483536-e06a-449a-94fb-e52765999d9e" name="Green To Red 2-way ssl"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Green To Red 2-way ssl" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom427-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc61">bdx:noprocess</ns:Service>
               <ns:Action>TC61Leg11</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:Swedish</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:ECP_Insolvency</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2881e42b-d4ba-40fd-a24c-fefca6d3d36b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="840c5915-59c7-4118-b342-9d847bc0e2a8"/><con:assertion type="XPath Match" name="XPath Match" id="c1d90e38-beb9-4c2d-b371-8712cd2617b7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b26707b8-56a8-423c-9f25-f31dbef752d2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED", "ACKNOWLEDGED", null, null, null, "C3Default", "thirdDefault");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway parameter to false" id="32b544b8-fcdf-4172-a63d-4c596e468c0e" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Set Third gateway property"].testSteps['Set false'].run( testRunner, context );
</script></con:config></con:testStep><con:setupScript/><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom427-");
test.finalize();

</con:tearDownScript><con:properties><con:property><con:name>jdbcUrlRed</con:name><con:value>jdbc:mysql://localhost:3306/domibus_green</con:value></con:property></con:properties>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7e2111bd-caf1-4ece-adf0-5de282728262</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a177ab3b-f1ef-4ed2-8a4f-882a91d55571</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f5c0a3b-778d-4796-b2e7-89724071c8e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3217263a-ddec-4c22-82da-2f6ed073afd6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bb3d553b-d22d-4249-82e1-f37fadcf9c22</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f4b53041-3c3c-446f-a4ac-464fdfa27271</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fc1b003f-bdeb-4e09-844b-b653b0a9879a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1818ce2-e330-425c-b727-ca25f8c56cdf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom430-Pull-EDELIVERY-2760-LDAP CRLs are not supported" searchProperties="true" id="b9bbf5d6-5ec7-4faa-8663-cdde24a65c57">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Use NOBLE certificates" id="bef7d021-79a9-4137-b8ed-0f431958275a" disabled="true"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Replace the current certificates with ones that have LDAP CRL endpoints.\n Re-load the truststores."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files Http_Http" id="0b60551b-d92d-46ff-adfd-a45e652ebb11"><con:settings/><con:config><script>// Copy keystore blue Http_Http
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Http\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red Http_Http
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Http\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 1" id="53ae565b-6056-4038-ad37-11938803dc94"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="8d2fc480-048c-445f-92eb-a5ab12dc7d40"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Http_Http" id="e0eb033d-a84f-40b8-8f6f-51429ce87ff7"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\Http_Http\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\Http_Http\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="b03ac174-27df-46de-9fac-17d352d418ac" name="Submit Message Http_Http"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Http_Http" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom430-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d39c2574-b2b3-486b-944c-151ea3993a74"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="0648432e-c3df-4f36-8cf8-275782ed7221"/><con:assertion type="XPath Match" name="XPath Match" id="bf6c9808-69af-4ec9-8471-bb97517959bb"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="3ffb9db4-5a23-44e4-a271-311394d57d90"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file Http_Http" id="05ef4f44-896e-40b8-a3f6-268a1c53c9ba"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that there are no exceptions for the certificates."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="e3e59a4a-7fb4-4f10-99fc-57bad7270936"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files Http_Ldap" id="4319cf96-f9ec-4bdc-99f2-1b50edd08311"><con:settings/><con:config><script>// Copy keystore blue Http_Ldap
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Ldap\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

//Copy keystore red Http_Ldap
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Ldap\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 2" id="b56c31c9-8830-4e41-b8a0-ffd5c51cc2f9"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="3c674248-ae17-4dbd-ac25-7cd658e91008"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Http_Ldap" id="18045e30-72cf-4e5f-a897-1e5d79c66508"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\Http_Ldap\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\Http_Ldap\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="1b0491c8-4256-4969-a752-2170c76d763e" name="Submit Message Http_Ldap"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Http_Ldap" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom430-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="dd132898-7a1a-4188-8368-871efa076fd5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="2b042f82-133e-4158-8bfe-f1cdeaed165f"/><con:assertion type="XPath Match" name="XPath Match" id="6126c08e-54c5-406c-8bc3-1e54d6c9d7f7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="88bc400c-0162-4e7c-8688-3be840e355f9"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file Http_Ldap" id="338b3ad2-52f7-4f4b-b924-97d026b55e2a"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that there are no exceptions for the certificate ldap crl url."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D4" id="9a7ad2d3-dfa9-4592-bdcc-908011bed3b1"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files Ldap_Ldap" id="d5f16e39-0ea2-41b4-8eca-20b9a0bf47c8"><con:settings/><con:config><script>// Copy keystore blue Ldap_Ldap
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Ldap_Ldap\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red Ldap_Ldap
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Ldap_Ldap\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 3" id="03ac83aa-d310-4989-bf86-6c37c9c2c129"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";</script></con:config></con:testStep><con:testStep type="delay" name="D5" id="cfcdd206-0aa8-495b-9597-3b88f9b1046b"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Ldap_Ldap" id="0db861e0-473f-4e89-97bc-f80199e33206"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\Ldap_Ldap\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\Ldap_Ldap\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="2e4f20c6-2a69-4372-be83-49ea10ea275a" name="Submit Message Ldap_Ldap"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Ldap_Ldap" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom430-3-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="994aaf6e-79d6-466d-b1af-65894bb22e2b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="ec2bc059-9796-42a9-a76f-0a1f95bc7f25"/><con:assertion type="XPath Match" name="XPath Match" id="f0c9a6c3-5cc8-4186-8d43-8bc4d1b17c95"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f9243267-8362-4ef1-bce6-b0bdf6c57bea"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file Ldap_Ldap" id="c6e623e0-6aad-4025-9233-5cceb45ca3f0"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check that there are no exceptions for the certificate ldap crl url."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="8fd76e4c-70e6-47ca-9599-73788ecf6d0f" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="bef27553-1815-4fde-acaf-fe5b40d2ed48" disabled="true"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="bb75eb78-367c-4776-9a00-f71830c7e0fd" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:setupScript/><con:tearDownScript>////ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();	

//testRunner.testCase.testSteps['Copy keystore files default'].run(testRunner, context);
//testRunner.testCase.testSteps['Restart Sender and Receiver'].run(testRunner, context);
//testRunner.testCase.testSteps['Upload default truststores Blue-Red'].run(testRunner, context);


</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>18f2d17e-3617-4603-920e-ed8b33001a77</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>12473f18-9361-41d6-aa07-504435a32428</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d882aceb-1ed4-4a30-b70c-454a9da17d8f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ca3cb6b-550a-4ec2-8c65-3ff867961900</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46b7eca8-beb4-4947-8383-fe45a6bf41d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1451eb6a-6c9d-4e5f-9339-9e7e2f9fd6c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6d39462-ee71-4b33-8db8-ba32b50c8829</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom435-EDELIVERY-2526-Pull mep: Unsuported policy exception" searchProperties="true" id="83d895a7-bfea-4f56-b91f-838642ccf0fb" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Config" id="c0fccadb-bd20-4b52-b2d0-b130343dea36"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set CXF log level to INFO then restart domibus."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="cab013ee-1e04-4817-b120-8808ea15a182" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-BLue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-rED</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6da50573-4c2a-47d0-8b0c-88b66cbc5d87"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="65832da5-4cef-4fe9-a371-56d4b43c98ac"/><con:assertion type="XPath Match" name="XPath Match" id="903a69d6-fbf8-4154-8f78-eb72374621aa"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="327fcd66-8d38-459f-b8b6-f7b50830fe27"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check" id="54c2b8f0-976c-4aa8-a524-c958ced9ad55"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Verify that there is no \"Unsuported policy exception\" present in the logs."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom458-EDELIVERY-977-Adding irrelevant attributes" searchProperties="true" id="8f2978a6-44e2-427d-b785-c5223539a0dc" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="5200a911-472c-45cd-a175-ad37a37b4437"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Enable schema validation from ws properties file for Sender and Receiver ."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="request" id="4244bee9-5790-42e1-90ef-c075f3babd0f" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom458-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc13">bdx:noprocess</ns:Service>\r
               <ns:Action toto="haha">TC13Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion" id="971deb64-71a2-4caa-9ad9-662c6d2650b9" name="SOAP Fault"/><con:assertion type="SOAP Response" id="a3a2f3c1-c5e5-4704-b810-e801276e4a2d" name="SOAP Response"/><con:assertion type="Simple Contains" id="be59de63-d719-4be4-856a-d741384dce94" name="Contains"><con:configuration><token>(?s).*org.xml.sax.SAXParseException.*[aA]ttribut.*</token><ignoreCase>true</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="63de0e78-bcf8-403a-9bb2-357e009a7093" name="Contains 1"><con:configuration><token>Action</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5b6435ef-8ea1-40ea-bbf3-cd2381d972ab" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>
               <ns:MessageId>-Dom458-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service tata="hoho" type="tc13">bdx:noprocess</ns:Service>\r
               <ns:Action>TC13Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="Not SOAP Fault Assertion" id="971deb64-71a2-4caa-9ad9-662c6d2650b9" name="SOAP Fault"/><con:assertion type="SOAP Response" id="6a274cc3-d7fc-4fc9-9c62-9e0e38e80900" name="SOAP Response"/><con:assertion type="Simple Contains" id="b726403c-042f-4e5a-90fb-20a3c2ae7391" name="Contains"><con:configuration><token>(?s).*org.xml.sax.SAXParseException.*[aA]ttribut.*</token><ignoreCase>true</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="594ff759-7dcf-4f13-bd94-dbc8452ab2d7" name="Contains 1"><con:configuration><token>Service</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6760662b-f6c7-4878-befe-bbf356a8bb8a" name="Submit Message just for reference in next steps"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message just for reference in next steps" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">\r
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:MessageInfo>\r
               <ns:MessageId>-Dom458-3-</ns:MessageId>\r
            </ns:MessageInfo>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="91c3b28c-353d-4f9c-88d0-e8517a003817" name="RetrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="RetrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest >\r
         <messageID attribute="type">-Dom458-3-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="Not SOAP Fault Assertion" id="265cd6d9-1d1a-4017-a909-9d9f06abe1a8" name="SOAP Fault"/><con:assertion type="Simple Contains" id="e18a282b-2aa8-424e-bf36-07bbcef29807" name="Contains"><con:configuration><token>(?s).*messageID.*[aA]ttribut.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c6cb3fcc-36da-4bcb-b6ae-1fcaad58f675" name="getStatus"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID attribute="type">-Dom458-3-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="5f84ca66-6a46-4ed3-b92e-2ee695ffff66" name="SOAP Fault"/><con:assertion type="Simple Contains" id="c8f4a185-038b-4849-8c8c-6b4efccaf67a" name="Contains"><con:configuration><token>(?s).*messageID.*[aA]ttribut.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3fcdfea8-9d3d-4a0d-ac40-8f6d0b675ee8" name="getMessageErrors"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="25304b07-269e-46f7-a485-26e11fc92724"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID attribute="type">-Dom458-3-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="afb90fde-4023-4745-b142-5f93d28746ff" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="a7000821-49b8-4b17-88d3-b1ba9f68ec49" name="SOAP Fault"/><con:assertion type="Simple Contains" id="2d1d74c5-0bbc-4873-998b-ef22a1a508ca" name="Contains"><con:configuration><token>(?s).*messageID.*[aA]ttribut.*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="list Pending Messages" id="50c35b41-e435-4c29-ad36-03f743f900bd">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="list Pending Messages" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest attribute="type">random</_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="be2f6af0-41a4-44ff-b163-8f669901f0e9" name="Not SOAP Fault"/><con:credentials>
                            <con:authType>No Authorization</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-Dom458-');
test.finalize();	</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="ae4e77ca-fdef-4b3f-8deb-2cc1519b94b2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom472-EDELIVERY-2995-Log every message status change" searchProperties="true"><con:settings/><con:testStep type="request" id="ef0bfdb1-98d6-4ed1-9d2f-8ea696cdb8c3" name="Submit Message1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom472-1c-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="79c96c6f-e2db-475c-8f66-7293716c1540"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="b86207b7-20fe-4fc5-bad2-db6d85d53ee4"/><con:assertion type="XPath Match" name="XPath Match" id="6db23909-8546-43ef-bcaf-bb8918873114"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="8113e2a4-1ceb-4c54-a6c8-e57d9c830b3a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="1042dd1e-42e5-450d-9a50-c35ce95fa2a9"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="cd46d0c6-757f-428d-8efd-7bb825cd9797" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message1#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="85f7a24e-aaa8-4e85-b600-28984c5d2765"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="b145ac00-0b60-4ead-91a6-5212451fae5d"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="33cd882e-7516-436d-be0b-0cee4aa94460"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DOWNLOADED","-Dom472-1-",null,"Wait long for receiver status");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="8eb9c94e-aa75-4ae4-9e81-5ea7bfec360c"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check logs" id="cb803464-3bcc-421c-ac9d-af97ceff2b3b"><con:settings/><con:config><script>def expectedInLogsOnSenderSite = 
"""Notifying about message status change from [null] to [READY_TO_PULL]
BUS-063] Notifying about message status change from [READY_TO_PULL] to [BEING_PULLED]
 - BUS-063] Notifying about message status change from [WAITING_FOR_RECEIPT] to [ACKNOWLEDGED]
 """

def expectedInLogsOnReceoverSite = 
 """[BUSINESS - BUS-063] Notifying about message status change from [null] to [RECEIVED]
 [BUSINESS - BUS-063] Notifying about message status change from [RECEIVED] to [DOWNLOADED]
 """
 
def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Checks logs contains proper information."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)
def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom472-");
test.finalize();
</con:tearDownScript><con:properties/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom474-EDELIVERY-4058-Possibility to exclude a protocol from the CRL list" searchProperties="true" id="56283635-857e-4adc-bce8-7b81a766374d" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="e59f4a73-b557-4e6e-9f6a-e7a638818e18"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Enable certificate validation domibus.sender.certificate.validation.onsending and domibus.receiver.certificate.validation.onsending in domibus.properties file for Sender and Receiver ."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files Http_Ldap" id="1ff84b2d-0e13-45b4-ad38-64d2a1bdb7e4"><con:settings/><con:config><script>// Copy keystore blue Http_Ldap
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\excludedProtocols\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


//Copy keystore red Http_Ldap
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\Http_Ldap\\red\\gateway_keystore.jks";
dest =  context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 1" id="6c0bf920-0f40-453c-a730-af22a144b116"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red Http_Ldap" id="c1196a2e-0def-432a-9fa9-4ea0dbeae855"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\excludedProtocols\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\excludedProtocols\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="ffc0a9a7-c09d-47d4-a717-7af740aad1de" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();

</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file 1" id="ed066d0a-bc4c-430a-85aa-7bd05b796df7"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check the log \"Downloading CRL from url ...\" is present only for one protocol: http or ldap (http in this case)."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Disable the default checked protocol" id="527a7bda-7170-420d-abd2-463e832b949a"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Disable the check for the default checked protocol: protocol found on step \"Check sender log file 1\".\nIn this case http."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 2" id="0fcc49f9-97ef-4825-94e3-8ea32e941b32"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="request" id="1d67ad0b-5f32-44d0-8ad8-094f2ba3dc29" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file 2" id="26be98a3-f10b-48da-9a2d-5e9ee1d0253b"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check the log \"Downloading CRL from url ...\" is present only for one protocol: http or ldap (not both).\n The protocl found must not be the one disabled via test step\"Disable the default checked protocol\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Disable both protocols" id="5e063f09-7072-4fa0-94aa-66c0f7c7d592"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Disable the check for both protocols."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 3" id="d433a729-be5d-4e26-a739-2f9785b1430f"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="request" id="74bc7fa5-1b7c-4c6c-b6fd-219c268dbc6e" name="Submit Message 3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 3" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check sender log file 3" id="f612cfa4-e418-4d1d-a584-9b42df45a6a0"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check the log \"Downloading CRL from url ...\" is not present."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="0496ab2c-5cdd-4c7b-8657-34616d1be40a" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="f6e2ff54-6965-4619-a335-517575411c92" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message 2#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom475-EDELIVERY-4119-Binary token missused when validating sender certificate" searchProperties="true" id="de1d7ea5-de03-4cf6-bb6a-ee5423f5b11c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Copy keystore files" id="0e1f7c60-cf9f-41de-a089-3eca793324f4"><con:settings/><con:config><script>// Copy keystore blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\allPolicies\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\allPolicies\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Set certificate validation properties Auto" id="c42bb1cc-403b-4c9a-8e8c-eb57ccf7594d" disabled="true"><con:settings/><con:config><script>def propValueDict=['domibus.sender.trust.validation.onreceiving' : 'true', 'domibus.sender.certificate.validation.onreceiving':'true'];

Domibus.changeDomibusProperties("BLUE", propValueDict,  log, context, testRunner)
Domibus.changeDomibusProperties("RED", propValueDict,  log, context, testRunner)


</script></con:config></con:testStep><con:testStep type="groovy" name="Set certificate validation properties" id="0e9e8425-9a10-4fea-82df-e97143c84ddb"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set properties:\n\"domibus.sender.trust.validation.onreceiving\" to true.\n\"domibus.sender.certificate.validation.onreceiving\" to true."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 1" id="5172cff0-70b4-469c-b74f-4372c3ab2d85"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes Blue-Red all policies" id="069960e7-f5fe-4bf8-82f8-37e85c61489f"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\allPolicies\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\allPolicies\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red without chains in Red truststore" id="6ed71097-a59d-46f4-b3c3-8576c76d3a5f"><con:settings/><con:config><script>// Upload truststores  
Domibus.uploadTruststore("sender","special","\\allPolicies\\truststoreNoChain\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\allPolicies\\truststoreNoChain\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="ee3d8f7d-3ee7-4d12-a62b-044a80862767" name="Submit Message Do Nothing Policy"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Do Nothing Policy" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc2">bdx:noprocess</ns:Service>
               <ns:Action>TC2Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="97d58634-2962-459e-bf14-8892c117dd47" name="Submit Message Sign Only"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Sign Only" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc3">bdx:noprocess</ns:Service>
               <ns:Action>TC3Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="0396e3a2-47cb-48d5-ba3b-37c2ff55d226"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="b081f907-c0eb-445a-a290-48a4ff900f5c"/><con:assertion type="XPath Match" name="XPath Match" id="d22c79bf-f172-483d-a3f6-735f1aca30fd"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="8d4b15f9-7230-4bf1-80a1-a573e3a173ff"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="b5803a96-6cb3-495a-af0e-9b2356c45ed7" name="Submit Message eDeliveryAS4Policy"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message eDeliveryAS4Policy" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="eb9a6b67-e9a8-421d-88fd-c24f6f020cd0" name="Submit Message eDeliveryAS4Policy_IS 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message eDeliveryAS4Policy_IS 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc4">bdx:noprocess</ns:Service>
               <ns:Action>TC4Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e68e374c-a976-4ad4-86d6-1ad4740d6e7b" name="Submit Message eDeliveryAS4Policy_BST 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message eDeliveryAS4Policy_BST 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc5">bdx:noprocess</ns:Service>
               <ns:Action>TC5Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="6d4cd23b-5cc6-4276-8e03-ab04d6028b7c" name="Submit Message eDeliveryAS4Policy_BST_PKIP 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message eDeliveryAS4Policy_BST_PKIP 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red with chains in Red truststore" id="318542f6-19dc-404a-b9e2-be270e819822"><con:settings/><con:config><script>// Upload truststores  
Domibus.uploadTruststore("sender","special","\\allPolicies\\truststoreAllChain\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\allPolicies\\truststoreAllChain\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="81596a23-2eb9-491f-b7c0-3a5ae87e97fa" name="Submit Message eDeliveryAS4Policy_BST_PKIP 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message eDeliveryAS4Policy_BST_PKIP 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc6">bdx:noprocess</ns:Service>
               <ns:Action>TC6Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="ba8d6f0b-d8d5-411f-9663-2277fda432e4" name="Submit Message eDeliveryAS4Policy_IS 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message eDeliveryAS4Policy_IS 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc7">bdx:noprocess</ns:Service>
               <ns:Action>TC7Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="bcfffa4e-19f8-41c6-b14c-7820b3b9382e" name="Submit Message eDeliveryAS4Policy_BST 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message eDeliveryAS4Policy_BST 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc8">bdx:noprocess</ns:Service>
               <ns:Action>TC8Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7eaaa1ac-1e9a-4c58-9375-4cf57a243824" name="Submit Message eDeliveryAS4Policy_BST_PKIP 3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message eDeliveryAS4Policy_BST_PKIP 3" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc9">bdx:noprocess</ns:Service>
               <ns:Action>TC9Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="50f63af0-e56c-4c9d-9002-84cb7c7fcc6b"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="e8c6217d-4095-426d-ac63-4c3ba8eb6a18"/><con:assertion type="XPath Match" name="XPath Match" id="d344c8d0-3697-48ce-8268-0bd1e9a8a4d5"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0493d300-22c2-4832-9e48-ed876f6db659"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="68f4cf8a-3a2d-42f2-bbf2-c12c4c300e6a" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restore domibus.property" id="8d61d3f7-5ade-4b74-af66-bff909bfd9fb" disabled="true"><con:settings/><con:config><script>Domibus.restoreDomibusPropertiesFromBackup("RED",  log, context, testRunner)

</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="64aa5195-12a2-4d2f-a48a-345da53028fb" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom476-Push-UseEdeliveryCertificates" searchProperties="true" id="d3d02fa2-920f-4a38-8176-bef07151bf51">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="5b9e78d9-26ce-44b6-affa-7fca8a88c311"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """
Enable certificate validation domibus.sender.certificate.validation.onsending and domibus.receiver.certificate.validation.onsending in
domibus.properties file for Sender and Receiver . 
It is also needed to set logging level to DEBUG at least for CRLUtil class."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files" id="0f6a1bb9-c24a-4942-a04b-3abc124dd2d3"><con:settings/><con:config><script>// Copy keystore blue
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\NOBLE\\sender\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\certificates\\NOBLE\\receiver\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 1" id="5ff43275-afa6-488f-9c7e-2e5b3d5e4395"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="b4a62021-8741-467c-9a62-e9d9d03cd2a8"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red" id="66fae20e-be59-4020-a8f5-b4e70f9aeb56"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\certificates\\NOBLE\\sender\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\certificates\\NOBLE\\receiver\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="778fb465-3101-44a0-b2f0-1a1439d97a39" name="Submit Message blue to red"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message blue to red" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom476-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d39c2574-b2b3-486b-944c-151ea3993a74"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="0648432e-c3df-4f36-8cf8-275782ed7221"/><con:assertion type="XPath Match" name="XPath Match" id="bf6c9808-69af-4ec9-8471-bb97517959bb"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="3ffb9db4-5a23-44e4-a271-311394d57d90"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="25d46e75-3208-4676-b6b7-c082d2563eeb" name="Submit Message Red to Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Red to Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom476-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="dd132898-7a1a-4188-8368-871efa076fd5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="2b042f82-133e-4158-8bfe-f1cdeaed165f"/><con:assertion type="XPath Match" name="XPath Match" id="6126c08e-54c5-406c-8bc3-1e54d6c9d7f7"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="88bc400c-0162-4e7c-8688-3be840e355f9"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check" id="8355ec77-53b9-4046-8039-7fb6d160d015"><con:settings/><con:config><script>
 
def result=javax.swing.JOptionPane.showConfirmDialog(null, """Checks in the logs that "Downloading CRL from url" is present only once for each url."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="57c4572d-d596-4977-8ed0-f3f37c2ff41b" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="f7d5503c-6f31-4cb0-bd11-10d192eef79d" disabled="true"><con:settings/><con:config><script>// Stop sender and receiver
Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="b274bb44-f9f7-468d-bb0b-226d73ea13d7" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);

def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith('-Dom476-');
test.finalize();	


</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09fda003-aac4-4441-a79c-634d215e7e74</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c8f949d9-b820-463a-a6c3-48ed058c78ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7193cd40-c61f-4280-8130-d3e07792edec</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06cbdd6a-cc2d-4182-a0fb-08deecd6b606</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61d28264-b2b5-4079-b982-5f17aaba6579</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68aebfbf-18d6-4d28-bae3-fa24d80d8707</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee85d2b8-508a-4944-a49b-c1dd2cce6c97</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e2adb68-c93d-4f56-b400-5e88fed72da3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6f2f591b-d1f8-44d0-baf1-0f0dd2a1327f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d116d1f6-ae2c-4e1b-8cc6-95fec04bac6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>18f2d17e-3617-4603-920e-ed8b33001a77</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>12473f18-9361-41d6-aa07-504435a32428</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d882aceb-1ed4-4a30-b70c-454a9da17d8f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ca3cb6b-550a-4ec2-8c65-3ff867961900</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46b7eca8-beb4-4947-8383-fe45a6bf41d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1451eb6a-6c9d-4e5f-9339-9e7e2f9fd6c5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6d39462-ee71-4b33-8db8-ba32b50c8829</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9f15a21c-a801-4426-bdf8-f6d9860a6f58" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom477-EDELIVERY-4238-Push-Payload inside body" searchProperties="true"><con:settings/><con:testStep type="request" id="25449a58-1c2f-4a8c-a1f5-6e69744c0f50" name="Submit Message text xml"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message text xml" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>         
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc24">bdx:noprocess</ns:Service>
               <ns:Action>TC24Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo>
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <bodyload>\r
            <value>cid:4321</value>\r
         </bodyload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>Domibus-123</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:attachment><con:name>payload.xml</con:name><con:contentType>text/xml</con:contentType><con:size>60</con:size><con:contentId>4321</con:contentId><con:part>4321</con:part><con:data>UEsDBBQACAgIAGZ9Lk4AAAAAAAAAAAAAAAALAAAAcGF5bG9hZC54bWyzsa/IzVEoSy0qzszPs1Uy1DNQUkjNS85PycxLt1UKDXHTtVCyt+PlsslIzcnJtyvPL8pJsdGHcABQSwcIww5U8jkAAAA8AAAAUEsBAhQAFAAICAgAZn0uTsMOVPI5AAAAPAAAAAsAAAAAAAAAAAAAAAAAAAAAAHBheWxvYWQueG1sUEsFBgAAAAABAAEAOQAAAHIAAAAAAA==</con:data><con:id>ada309bf-e077-4eb3-8e29-efd18d60da50</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f08ba59e-3ecb-4041-a696-c07acbeb67fc" name="retrieveMessage text xml"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage text xml" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message text xml#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="af751d40-68f2-47cf-96da-8f72f65122c6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="0b801f93-67d2-4e69-a4b9-27b76d01eaea"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="61243724-3f4e-4e7f-a7c9-d78938c61c13"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check 1" id="573efeba-677c-48a5-bd6e-a8458f9ce605"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """ Check in the logs that the xml payload is sent in the message body and not as a seperate mime part."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="request" id="70035b3b-180d-4f39-a5bf-cf0322e62105" name="Submit Message application xml"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message application xml" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>        
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc25">bdx:noprocess</ns:Service>
               <ns:Action>TC25Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo>
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <bodyload>\r
            <value>cid:4321</value>\r
         </bodyload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:attachment><con:name>payload.xml</con:name><con:contentType>text/xml</con:contentType><con:size>60</con:size><con:contentId>4321</con:contentId><con:part>4321</con:part><con:data>UEsDBBQACAgIAGZ9Lk4AAAAAAAAAAAAAAAALAAAAcGF5bG9hZC54bWyzsa/IzVEoSy0qzszPs1Uy1DNQUkjNS85PycxLt1UKDXHTtVCyt+PlsslIzcnJtyvPL8pJsdGHcABQSwcIww5U8jkAAAA8AAAAUEsBAhQAFAAICAgAZn0uTsMOVPI5AAAAPAAAAAsAAAAAAAAAAAAAAAAAAAAAAHBheWxvYWQueG1sUEsFBgAAAAABAAEAOQAAAHIAAAAAAA==</con:data><con:id>ada309bf-e077-4eb3-8e29-efd18d60da50</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="0aee8a1f-2966-4365-8e56-9a226ad4e0ac" name="retrieveMessage application xml"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage application xml" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message application xml#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="af751d40-68f2-47cf-96da-8f72f65122c6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="0b801f93-67d2-4e69-a4b9-27b76d01eaea"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="61243724-3f4e-4e7f-a7c9-d78938c61c13"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check 2" id="6e691939-0316-4a88-ab4a-875e5ba2f1fa"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """ Check in the logs that the xml payload is sent in the message body and not as a seperate mime part."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="request" id="d9825340-93fb-4f24-acea-90b518cdd6eb" name="Submit Message Body Payload Not Encrypted"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Body Payload Not Encrypted" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>        
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc26">bdx:noprocess</ns:Service>
               <ns:Action>TC26Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo>
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
                <ns:PartInfo href="cid:attachment">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">application/pdf</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <bodyload>\r
            <value>cid:4321</value>\r
         </bodyload>\r
         <payload payloadId="cid:attachment">
            <value>cid:1234</value>
         </payload>
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a26922f0-3110-428c-912e-7b15450917d8"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="5043f043-cf9c-4be9-828e-3cf709e47ab1"/><con:assertion type="XPath Match" name="XPath Match" id="9c22be8a-eb69-4da4-854e-e961401250f8"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad39eec6-e815-4571-b28e-2da9a0bcd605"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>${#Project#pdfAttachment}</con:name><con:contentType>application/pdf</con:contentType><con:contentId>1234</con:contentId><con:part>1234</con:part><con:url>${#Project#pdfAttachment}</con:url><con:id>b03835f2-1d73-40a8-a6ed-411176a861fb</con:id></con:attachment><con:attachment><con:name>payload.xml</con:name><con:contentType>text/xml</con:contentType><con:size>60</con:size><con:contentId>4321</con:contentId><con:part>4321</con:part><con:data>UEsDBBQACAgIAGZ9Lk4AAAAAAAAAAAAAAAALAAAAcGF5bG9hZC54bWyzsa/IzVEoSy0qzszPs1Uy1DNQUkjNS85PycxLt1UKDXHTtVCyt+PlsslIzcnJtyvPL8pJsdGHcABQSwcIww5U8jkAAAA8AAAAUEsBAhQAFAAICAgAZn0uTsMOVPI5AAAAPAAAAAsAAAAAAAAAAAAAAAAAAAAAAHBheWxvYWQueG1sUEsFBgAAAAABAAEAOQAAAHIAAAAAAA==</con:data><con:id>ada309bf-e077-4eb3-8e29-efd18d60da50</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter to Jms for Blue and Red" id="61c3072a-a851-4f80-8641-e3309ac3d7b3"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","Jms",context,log);
Domibus.setMessageFilters("receiver","Jms",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit message Jms" id="5744ca04-3f08-41b9-b7d9-4fd8e227e651"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
try {
	connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
	Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
	Destination destination = session.createQueue("domibus.backend.jms.inQueue");
	producer = session.createProducer(destination);
	producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

	MapMessage messageMap = session.createMapMessage();

	// Declare message as submit
	messageMap.setStringProperty("messageType", "submitMessage");
	
	// Set Plugin username and password in case security is enable
	 
	//Domibus.addPluginCredentialsIfNeeded(context, log, messageMap)
	// messageMap.setStringProperty("username", "plugin_admin");
	// messageMap.setStringProperty("password", "Domibus-123");

	// Set up the Communication properties for the message
	messageMap.setStringProperty("service", "bdx:noprocess");
     messageMap.setStringProperty("serviceType", "tc24");
	messageMap.setStringProperty("action", "TC24Leg1");
     messageMap.setStringProperty("conversationId", "123");
     messageMap.setStringProperty("fromPartyId", "domibus-blue");
     messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered"); 
     messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
     messageMap.setStringProperty("toPartyId", "domibus-red");
     messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");             
	messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
	messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");            
	messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
	messageMap.setStringProperty("protocol", "AS4");

	// Optional 
	// Set specific MessageId
	// messageMap.setStringProperty("messageId","SomeID");
	// Set JMSCorrelationID
	messageMap.setJMSCorrelationID("12345");
	    	    
	//Set up the payload properties
     messageMap.setStringProperty("totalNumberOfPayloads", "1");
	messageMap.setStringProperty("payload_1_mimeType", "text/xml");
	messageMap.setStringProperty("payload_1_description", "message");
	messageMap.setStringProperty("p1InBody", "true"); 

	//send the payload in the JMS message as byte array
	//String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
	String pay1 = "&lt;hello>word test&lt;/hello>";
	byte[] payload = pay1.getBytes();
	messageMap.setBytes("payload_1", payload);

     producer.send(messageMap);
	log.info "message sent"

	connection.close();
        } catch (JMSException e) {
            e.printStackTrace();
        }
</script></con:config></con:testStep><con:testStep type="groovy" name="Check 3" id="2f75b60e-db69-49d6-88ab-3244c88a148d"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog(null, """ Check in the logs that the xml payload is sent in the message body and not as a seperate mime part.
Check also that payloads in receiver side arrived in correct order."""); 

if(result == javax.swing.JOptionPane.YES_OPTION)
	{
		log.info "PASS: Result as expected, continuing the test";
	}
else if(result == javax.swing.JOptionPane.NO_OPTION)
	{
		log.info "FAIL: Manual check unsuccessful";
		testRunner.fail("Manual check indicated as unsuccessful by user");
	}
else if (result == javax.swing.JOptionPane.CANCEL_OPTION) 
	{
		log.info "SKIP: Check skipped bu user";
	}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter to WS for Red" id="ede15bde-0a14-4254-8bfb-c24bceb35057" disabled="true"><con:settings/><con:config><script>Domibus.setMessageFilters("receiver","backendWebservice",context,log)

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit message Jms - two messages" id="b16aba7f-65f3-4d44-aaff-0b410c1d2266"><con:settings/><con:config><script>import org.apache.activemq.ActiveMQConnectionFactory;
import javax.jms.*;
import javax.naming.NamingException;

ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
Connection connection = null;
MessageProducer producer = null;
try {
	connection = connectionFactory.createConnection("domibus", "changeit"); //username and password of the default JMS broker
	Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
	Destination destination = session.createQueue("domibus.backend.jms.inQueue");
	producer = session.createProducer(destination);
	producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

	MapMessage messageMap = session.createMapMessage();

	// Declare message as submit
	messageMap.setStringProperty("messageType", "submitMessage");
	
	// Set Plugin username and password in case security is enable
	 Domibus.addPluginCredentialsIfNeeded(context, log, messageMap)
	// messageMap.setStringProperty("username", "plugin_admin");
	// messageMap.setStringProperty("password", "Domibus-123");

	// Set up the Communication properties for the message
	messageMap.setStringProperty("service", "bdx:noprocess");
     messageMap.setStringProperty("serviceType", "tc26");
	messageMap.setStringProperty("action", "TC26Leg1");
     messageMap.setStringProperty("conversationId", "123");
     messageMap.setStringProperty("fromPartyId", "domibus-blue");
     messageMap.setStringProperty("fromPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered"); 
     messageMap.setStringProperty("fromRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator");
     messageMap.setStringProperty("toPartyId", "domibus-red");
     messageMap.setStringProperty("toPartyType", "urn:oasis:names:tc:ebcore:partyid-type:unregistered");             
	messageMap.setStringProperty("toRole", "http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder");
	messageMap.setStringProperty("originalSender", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");            
	messageMap.setStringProperty("finalRecipient", "urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
	messageMap.setStringProperty("protocol", "AS4");

	// Optional 
	// Set specific MessageId
	//messageMap.setStringProperty("messageId", "-Dom477-");
	// Set JMSCorrelationID
	//messageMap.setJMSCorrelationID("12345");
	    	    
	//Set up the payload properties
     messageMap.setStringProperty("totalNumberOfPayloads", "2");
	messageMap.setStringProperty("payload_1_mimeType", "text/xml");
	messageMap.setStringProperty("payload_1_description", "message");
	messageMap.setStringProperty("p1InBody", "true"); 

	//send the payload in the JMS message as byte array
	//String pay1 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
	String pay1 = "&lt;test>hello world&lt;/test>";
	byte[] payload = pay1.getBytes();
	messageMap.setBytes("payload_1", payload);


messageMap.setStringProperty("payload_2_mimeContentId", "cid:attachment");
messageMap.setStringProperty("payload_2_mimeType", "application/pdf");
messageMap.setStringProperty("payload_2_description", "message");
String pay2 = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=";
byte[] payload2 = pay2.getBytes();
messageMap.setBytes("payload_2", payload2);


     producer.send(messageMap);
	log.info "message sent"

	connection.close();
        } catch (JMSException e) {
            e.printStackTrace();
        }
</script></con:config></con:testStep><con:testStep type="request" id="e9209965-3f55-432a-80d8-217bd068356f" name="retrieveMessage text xml - from jms"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage text xml - from jms" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-Dom477-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="af751d40-68f2-47cf-96da-8f72f65122c6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="0b801f93-67d2-4e69-a4b9-27b76d01eaea"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="61243724-3f4e-4e7f-a7c9-d78938c61c13"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter to WS for Blue" id="ef3d55e4-e6fd-4db5-88b9-e2ea0a03994f" disabled="true"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log)</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>32187c3e-10a4-4f74-bb76-0024b1cf6dc0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6b86c8f4-bd8b-4515-b573-923ba52ecd63" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom478-EDELIVERY-4354 and EDELIVERY-4385 - Single Domain" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="55f0f710-0bba-4a2b-9ea9-0ec549efdeb7"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Multitenancy is not configured (No general schema specified). 
- Set properties (multitenancyModeC2,multitenancyModeC3) to (0,0).
- Plugin security is disabled.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="f5ee9b14-a518-49d0-8264-6e616105b4aa" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Disable plugin security" id="a47de433-e62c-475c-a696-1c2e2fe0c14d" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Disable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="41212312-91f6-4455-a1a4-b5d449cde2cb" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"default","ROLE_USER","userC1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="5287f0d2-1616-4c16-b74f-346a743baea1" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
log.info "================================================";
log.info "================ Upload PModes for C2 ================";
log.info "================================================";
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);

log.info "================================================";
log.info "================ Upload PModes for C3 ================";
log.info "================================================";
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="73df1bed-04b9-4ce0-953f-e0c041b1b16d" disabled="true"><con:settings/><con:config><script>// Upload truststore for C2
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);

// Upload truststore for C3
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="48a3fe32-0c08-4d9b-a9e5-1e03f09ab15d" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log);

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message - Default cid" id="f03ddada-8057-4755-83c1-a7f11bafa999"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test - Default cid" id="8cc1aebd-571e-4038-801e-d742ffeafb5d"><con:settings/><con:config><script>// TODO: automate
def result=javax.swing.JOptionPane.showConfirmDialog( null,"""Check in the logs, in the AS4 message, that the element "PartInfo" has attribute "href" value equal to "cid:message"."""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="f1044d44-8703-4520-812f-6c7915af500e"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Submit Message - cid from metadata file 1" id="1cfeb226-043e-4e61-ac2d-13eb10ae917e"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test - cid from metadata file 1" id="de071342-51ee-4154-b146-0c41a78bf228"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""Check in the logs, in the AS4 message, that: \n- the element "PartInfo" has attribute "href" value equal to "cid:messagefrompp".\n- the property called "MimeType" from the element "PartProperties" has value "text/xml"."""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="48151140-5bf7-46f7-84d1-a89bb8881009"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configure new cid in the fs plugin properties file" id="800be4e4-cad6-480b-934a-ddf8b08003d4"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Set fs plugin property "fsplugin.messages.payload.id" to "cid:messageNew".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message - new cid" id="ace23705-d1d4-4ab4-82dc-7d920705fd3b"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test - new cid" id="bad18192-ab56-4073-a4ac-2b1af71a549a"><con:settings/><con:config><script>// TODO: automate
def result=javax.swing.JOptionPane.showConfirmDialog( null,"""Check in the logs, in the AS4 message, that the element "PartInfo" has attribute "href" value equal to "cid:messageNew"."""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="4c44f9a9-bbfc-43f9-aa49-ad2350925358"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Submit Message - cid from metadata file 2" id="b3c7533b-a963-4190-b850-21f874768127"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\MAIN\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test - cid from metadata file 2" id="d00cda9a-416a-408c-a8fe-1daf7b0373a5"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""Check in the logs, in the AS4 message, that: \n- the element "PartInfo" has attribute "href" value equal to "cid:messagefrompp".\n- the property called "MimeType" from the element "PartProperties" has value "text/xml"."""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="74ab0669-1286-48d7-bdf1-48b8cb24243a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom479-EDELIVERY-4354 and EDELIVERY-4385 - Multitenancy" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="3fbd6dec-0906-4805-aacd-800c4dead77c"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Configure Multitenancy for C2 and C3 (enable plugin security, create domain properties file, create domain schema ...)
- Domains "domibus_C2Dom1" and "domibus_C2Dom2" are configured for C2.
- Domains "domibus_C3Dom1" and "domibus_C3Dom2" are configured for C3.
- Create plugin users on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1", "userC1C2Dom2" linked to "originalSender" and domain "domibus_C2Dom2". 
- Create plugin users on C3: "userC4C3Dom1" linked to "originalSender" and domain "domibus_C3Dom1", "userC4C3Dom2" linked to "originalSender" and domain "domibus_C3Dom2".
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,2).
- Certificate configured on domain "domibus_C2Dom1" is only present in the truststore of domain "domibus_C3Dom2".
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="ad92e381-42eb-4120-af28-b8fc992f26bc" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="5c5527a7-c6d0-440c-8bca-3486bc528fa1" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for both C2 and C3.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="2da52a56-2359-498e-8e51-c5d897ca0291" disabled="true"><con:settings/><con:config><script>// Create users in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom2","ROLE_USER","userC1C2Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create users in C3 
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom1","ROLE_USER","userC4C3Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
Domibus.addPluginUser("C3",context,log,"domibus_C3Dom2","ROLE_USER","userC4C3Dom2","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="e0d6c14b-7298-4661-9669-7f42fbc327f0" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log,"domibus_C3Dom1");
Domibus.uploadPmode("C3","default","\\red\\domibus_C2Dom1ToC3Dom2\\domibus-pmode-red.xml",context,log,"domibus_C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="f5d93e3e-0184-44d3-b420-e5310779ca3d" disabled="true"><con:settings/><con:config><script>// Upload truststores

// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom2");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","special","\\Threegateways\\blue\\gateway_truststore.jks",context,log,"domibus_C3Dom1");
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to FS" id="856f2f03-2725-439e-94ac-eb0d49c2aeda" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendFSPlugin",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message - Default cid" id="388c6cdb-20b2-4594-8905-d6382b51c810"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test - Default cid" id="170637b9-c2f4-4cd9-a92e-dc2bf971edbc"><con:settings/><con:config><script>// TODO: automate
def result=javax.swing.JOptionPane.showConfirmDialog( null,"""Check in the logs, in the AS4 message, that the element "PartInfo" has attribute "href" value equal to "cid:message"."""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="e211d7b8-ef7e-49d3-bd35-d8ba34617573"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Submit Message - cid from metadata file 1" id="9dbfcdef-0e32-4df8-821d-7e4e180c69fc"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test - cid from metadata file 1" id="40c7b5e4-fccd-4afc-b20e-7b8756a50726"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""Check in the logs, in the AS4 message, that: \n- the element "PartInfo" has attribute "href" value equal to "cid:messagefrompp".\n- the property called "MimeType" from the element "PartProperties" has value "text/xml"."""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D2" id="d0c1db56-dffd-4f37-86fc-a5f2b576e3d1"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configure new cid" id="413c0736-142d-428e-ac44-e60107e3654d"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Set fs plugin properties: \n- "fsplugin.messages.payload.id" to "cid:message". \n- "fsplugin.domains.domibus_C2Dom1.messages.payload.id" to "cid:messageDom1".  \n- "fsplugin.domains.domibus_C2Dom2.messages.payload.id" to "cid:messageDom2".
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message - Dom1 cid" id="753d510a-db95-4b79-91ff-0c41373ebbeb"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test - Dom1 cid" id="f9d0fbb5-8d0d-4eee-b04a-e85fc885bb10"><con:settings/><con:config><script>// TODO: automate
def result=javax.swing.JOptionPane.showConfirmDialog( null,"""Check in the logs, in the AS4 message, that the element "PartInfo" has attribute "href" value equal to "cid:messageDom1"."""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="d38e317a-ee87-4dc6-b01a-3602c4d20004"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Submit Message - cid from metadata file 2" id="0d9da0dd-1178-4a65-b1ab-99557eea487d"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\Test_file.xml";
def dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\fileSmall.pdf";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\withPartProperties\\metadata.xml";
dest = context.expand('${#Project#pathBlue}')+"\\..\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test - cid from metadata file 2" id="4efb9d52-6752-4f3f-b39e-541f08b44c76"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"""Check in the logs, in the AS4 message, that: \n- the element "PartInfo" has attribute "href" value equal to "cid:messagefrompp".\n- the property called "MimeType" from the element "PartProperties" has value "text/xml"."""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="313ec610-4def-4f86-b557-08c578865bdc" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom2");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom1");
Domibus.setMessageFilters("C3","backendWebservice",context,log,"domibus_C3Dom2");

</script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="ab03308f-47a9-40c3-a7d6-6eebc076b378" disabled="true"><con:settings/><con:config><script>// Remove users in C2
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom1","userC1C2Dom1");
Domibus.removePluginUser("C2",context,log,"domibus_C2Dom2","userC1C2Dom2");

// Remove users in C3
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom1","userC4C3Dom1");
Domibus.removePluginUser("C3",context,log,"domibus_C3Dom2","userC4C3Dom2");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="72bcc23a-b2e4-4477-bea2-a6c2676d9e7f" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX41-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom480-EDELIVERY-3191-When C3 receives a message, check that the sender certificate used for the signature belongs to the party present in the from field" searchProperties="true" id="31f00dfe-61a6-438f-a549-098f9169a626" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration-Enable all checks-Success" id="36b4e0df-8fe1-4560-946b-124bf3488e63"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties (on C3): \n- \"domibus.sender.trust.validation.onreceiving\" to \"true\".\n- \"domibus.sender.certificate.subject.check\" to \"true\".\n- \"domibus.sender.trust.validation.truststore_alias\" to \"true\".\n- \"domibus.sender.trust.validation.expression\" to \".*gw.*\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="a018c32f-c7c5-4ba0-bbdc-e120b52eaaa4"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendWebservice",context,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-Blue Red-All checks-Success" id="9b96e98d-ab76-49d7-ae7a-c868ddbe8c1d"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\senderTrustValidation\\allchecksSuccess\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\senderTrustValidation\\allchecksSuccess\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores-Blue Red-All checks-Success" id="de2a36d7-4306-494e-aabc-057c50d6aff0"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\senderTrustValidation\\allchecksSuccess\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\senderTrustValidation\\allchecksSuccess\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="3ccdb4e1-217b-43a7-b470-23352ed75c62" name="Push Bind Message-Enable all checks-Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Push Bind Message-Enable all checks-Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4b800b21-ff3e-44e2-b9ec-23c3c859179a" name="Pull Bind Message-Enable all checks-Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Pull Bind Message-Enable all checks-Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc2">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="e878309d-95bb-48f1-bd3b-7970cc5aef92"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Enable Subject check-Failure" id="bf00dcf6-ce07-48e0-bf9a-7ba699152af4"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties: \n- \"domibus.security.key.private.alias\" to \"flue_gw\" (C2).\n- \"domibus.sender.trust.validation.onreceiving\" to \"true\".\n- \"domibus.sender.certificate.subject.check\" to \"true\".\n- \"domibus.sender.trust.validation.truststore_alias\" to \"false\".\n Disable property \"domibus.sender.trust.validation.expression\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore with fake alias" id="a5fa60bf-a4a0-4e8e-b0a4-425a1e407683"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\senderTrustValidation\\checkSubject\\C2\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-Blue Red-Subject check-Failure" id="915b2e22-de8a-4503-85d3-439f5bb56080"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\senderTrustValidation\\checkSubject\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\senderTrustValidation\\checkSubject\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores-Blue Red-Subject check-Failure" id="56ee393b-864d-4426-ad85-ade1a6640449"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\senderTrustValidation\\checkSubject\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\senderTrustValidation\\checkSubject\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="a6d15f38-bf3c-4375-af1a-2b867642fe76" name="Push Bind Message-Subject check-Failure"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Push Bind Message-Subject check-Failure" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-flue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="f9a167e8-6ab6-4e2e-927d-8cc026e54eb4" name="Pull Bind Message-Subject check-Failure"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Pull Bind Message-Subject check-Failure" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-flue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc3">bdx:noprocess</ns:Service>\r
               <ns:Action>TC3Leg3</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("READY_TO_PULL","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Disable Subject check" id="47996c1d-6558-4480-9194-554c7200ebbb"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties: \n- \"domibus.sender.trust.validation.onreceiving\" to \"true\".\n- \"domibus.sender.certificate.subject.check\" to \"false\".\n- \"domibus.sender.trust.validation.truststore_alias\" to \"false\".\n Disable property \"domibus.sender.trust.validation.expression\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="94cd4c22-0fe2-4dc3-afef-e1d63eb6998b" name="Push Bind Message-Disable Subject check-Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Push Bind Message-Disable Subject check-Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-flue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a50a6e4f-9dd8-485f-b8a5-4d5ebaffda61" name="Pull Bind Message-Disable Subject check-Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Pull Bind Message-Disable Subject check-Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-flue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc3">bdx:noprocess</ns:Service>\r
               <ns:Action>TC3Leg3</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Ignore Subject check" id="39064894-3ba0-4939-a303-70d32ff68cf8"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties: \n- \"domibus.security.key.private.alias\" to \"flue_gw\" (C2).\n- \"domibus.sender.trust.validation.onreceiving\" to \"false\".\n- \"domibus.sender.certificate.subject.check\" to \"true\".\n- \"domibus.sender.trust.validation.truststore_alias\" to \"false\".\n Disable property \"domibus.sender.trust.validation.expression\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="c3d5e681-e72e-45f8-b30f-084a828fec83" name="Push Bind Message-Ignore Subject check-Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Push Bind Message-Ignore Subject check-Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-flue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="df662365-7f00-4796-9d44-56a82cb52208" name="Pull Bind Message-Ignore Subject check-Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Pull Bind Message-Ignore Subject check-Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-flue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc3">bdx:noprocess</ns:Service>\r
               <ns:Action>TC3Leg3</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="02f2c164-9abe-43aa-99aa-104e9ff49943"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Enable truststore_alias check-Failure" id="467c7ef9-aeae-4a6a-b437-527006b7ec27"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties: \n- \"domibus.security.key.private.alias\" to \"flue_gw\" (C2).\n- \"domibus.sender.trust.validation.onreceiving\" to \"true\".\n- \"domibus.sender.certificate.subject.check\" to \"false\".\n- \"domibus.sender.trust.validation.truststore_alias\" to \"true\".\n Disable property \"domibus.sender.trust.validation.expression\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="39e30464-e44f-435c-b7f4-ad7fab9b39a9" name="Push Bind Message-Enable truststore_alias check-Failure"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Push Bind Message-Enable truststore_alias check-Failure" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-flue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Ignore truststore_alias check-Success" id="c1c8eadc-21cb-4473-b775-1cda7d6d36b9"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties: \n- \"domibus.security.key.private.alias\" to \"flue_gw\" (C2).\n- \"domibus.sender.trust.validation.onreceiving\" to \"true\".\n- \"domibus.sender.certificate.subject.check\" to \"false\".\n- \"domibus.sender.trust.validation.truststore_alias\" to \"true\".\n Disable property \"domibus.sender.trust.validation.expression\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="0fbe250b-763d-4f41-975d-90ec4e844ddf" name="Push Bind Message-Ignore truststore_alias check-Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Push Bind Message-Ignore truststore_alias check-Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-flue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Wrong regular expression-Failure" id="44bd091f-efc1-44b8-91f9-5df37aff130a"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties (on C3): \n- \"domibus.sender.trust.validation.onreceiving\" to \"true\".\n- \"domibus.sender.certificate.subject.check\" to \"true\".\n- \"domibus.sender.trust.validation.truststore_alias\" to \"true\".\n- \"domibus.sender.trust.validation.expression\" to \".*ww.*\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-Blue Red-All checks-2" id="36abe248-4424-419f-b774-200121eb7f42"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\senderTrustValidation\\allchecksSuccess\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\senderTrustValidation\\allchecksSuccess\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores-Blue Red-All checks-2" id="b1221aba-26e8-4002-a76b-96e8ea583563"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\senderTrustValidation\\allchecksSuccess\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\senderTrustValidation\\allchecksSuccess\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="f33bbda4-c5a9-4c90-a448-e49f11a682b1" name="Push Bind Message-Wrong regular expression-Failure"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Push Bind Message-Wrong regular expression-Failure" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Configuration-Ignore-Wrong regular expression-Success" id="02ed5540-b758-4a64-b58e-802b40b0f860"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties (on C3): \n- \"domibus.sender.trust.validation.onreceiving\" to \"true\".\n- \"domibus.sender.certificate.subject.check\" to \"true\".\n- \"domibus.sender.trust.validation.truststore_alias\" to \"true\".\n- \"domibus.sender.trust.validation.expression\" to \".*ww.*\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="0c7cb4d7-718c-4dfe-868f-183079534a53" name="Push Bind Message-Ignore wrong regular expression-Success"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Push Bind Message-Ignore wrong regular expression-Success" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>
def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore default keystore" id="a2df35fe-3779-47d6-a02d-7c741d30cefc" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom481-EDELIVERY-4331-Integrate DSS library" searchProperties="true" id="a0749ea2-e0fb-4802-8205-f9b4c50c92d9" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration-DSS-Authentication-ValidationOnReceivingOff" id="f1fed285-5632-471d-95b0-03f9fd659f02"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties (on C3): \n- \"domibus.extension.iam.authentication.identifier\" to \"DSS_AUTHENTICATION_SPI\".\n- \"domibus.sender.trust.validation.onreceiving\" to \"false\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set new Domibus paths (if needed)" id="303ec3b5-319e-449b-9647-ad130944c276"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/tpap/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/tapas/domibus/");

log.info "UPDATE DONE.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set new DB config (if needed)" id="5902215f-8840-4dc6-a985-236254d3e8d3"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-localhost-tomcat-tomcat"].testSteps['Set custom properties-Default-Default-taxud-Main Branch'].run( testRunner, context );</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystores files" id="0eaabc62-ed0e-48de-bb59-31bd8b78e580"><con:settings/><con:config><script>// Copy keystore blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\taxud\\dss\\standard\\C2\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\taxud\\dss\\standard\\C3\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="b1c2cbf4-b986-44d6-9976-24a52bc65e70"><con:settings/><con:config><script>// Stop sender and receiver
//Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
//Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="1763e5a1-6cae-464c-a1eb-b70332151cc0"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendWebservice",context,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS" id="07199cc9-0a02-4931-af72-64cfbccd13c2"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\dss\\standard\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\dss\\standard\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores-TPAP-TAPAS" id="7866af27-07a1-49e2-87b1-0d19834d6e56"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\taxud\\dss\\standard\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\taxud\\dss\\standard\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="2f91bd0a-e29e-4fe8-96c6-61a07328ae02" name="Standard push"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard push" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE1234567890</ns:PartyId>
                  <ns:Role>Trader</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_t2c</ns:Service>\r
               <ns:Action>IE3F10</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="954a3235-7c33-45b0-a40a-c22bb0b23a5d" name="mpc attribute not present-push-1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="mpc attribute not present-push-1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE1234567890</ns:PartyId>\r
                  <ns:Role>Trader</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_c2t</ns:Service>\r
               <ns:Action>IE3R01</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="115946d2-4630-4d75-ba8f-be589da41405" name="mpc attribute present-pull-1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="mpc attribute present-pull-1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage  mpc="urn:fdc:ec.europa.eu:2019:eu_ics2_c2t/EORI/BE1234567890">\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE1234567890</ns:PartyId>\r
                  <ns:Role>Trader</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_c2t</ns:Service>\r
               <ns:Action>IE3R01</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS-KnownInitiator" id="8062d11a-3c85-43b3-a2b8-2357901f6556"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\dss\\knownInitiator\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\taxud\\dss\\knownInitiator\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="bd59113f-dbcb-46f3-91ea-dbbe1578314f" name="mpc attribute not present-push-2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="mpc attribute not present-push-2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE1234567890</ns:PartyId>\r
                  <ns:Role>Trader</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_c2t</ns:Service>\r
               <ns:Action>IE3R01</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="90cf87ac-b161-4876-8eb9-52f91a1f1000" name="mpc attribute present-pull-2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="mpc attribute present-pull-2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage  mpc="urn:fdc:ec.europa.eu:2019:eu_ics2_c2t/EORI/BE1234567890">\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE1234567890</ns:PartyId>\r
                  <ns:Role>Trader</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_c2t</ns:Service>\r
               <ns:Action>IE3R01</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="7e62a370-b6d4-4561-894b-e61c9dab6ae5" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restore Domibus paths (if needed)" id="c32bbe2e-8b83-44a6-9d33-0f703443824a" disabled="true"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/sender/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/receiver/domibus/");

log.info "UPDATE DONE.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Restore DB config (if needed)" id="de876ced-e5ef-4b23-9835-8a6480f61d2d" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-localhost-tomcat-tomcat"].testSteps['Set custom properties-Default-Default-Main Branch'].run( testRunner, context );</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom482-Submit Message-HTTPS Endpoints" searchProperties="true" id="ac44f3b2-0b14-446f-ba3f-027c057c6c60" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="fba65a86-777d-463b-bf9d-c28ec5c1a343"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the following connectors configuration: \n- On C2: 2-way ssl connector on port 8580.\n- On C3: 2-way ssl connector on port 8680."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set new Domibus paths (if needed)" id="62087002-8f1d-45a1-b278-acb0dcae0a6c"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/httpsC2/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/httpsC3/domibus/");

log.info "UPDATE DONE.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set new DB config (if needed)" id="97907fa7-5340-4ac4-a997-5aad79555280"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-localhost-tomcat-tomcat"].testSteps['Set custom properties-Default-Default-https-Main Branch'].run( testRunner, context );</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystores files" id="11641448-7ef2-4c34-9ee0-f7527dc2f45f"><con:settings/><con:config><script>// Copy keystore blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\https\\C2\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\https\\C3\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Copy SSL files" id="efbd6bed-6418-4359-b536-17c87d4a57e7"><con:settings/><con:config><script>// Copy clientauthentication.xml blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\https\\C2\\clientauthentication.xml";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\clientauthentication.xml"; 
Domibus.copyFile(source,dest,log);

// Copy clientauthentication.xml red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\https\\C3\\clientauthentication.xml";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\clientauthentication.xml"; 
Domibus.copyFile(source,dest,log);


// Copy server.xml blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\https\\C2\\server.xml";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\server.xml"; 
Domibus.copyFile(source,dest,log);

// Copy server.xml red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\https\\C3\\server.xml";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\server.xml"; 
Domibus.copyFile(source,dest,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="d9644a75-b3c4-4b4c-8660-7651aa8ed51d"><con:settings/><con:config><script>// Stop sender and receiver
//Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
//Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores Blue-Red" id="cb2c90ae-9300-418c-8a73-bbe77ddbe8f2"><con:settings/><con:config><script>// Upload truststores: blue for sender and red for receiver.  
Domibus.uploadTruststore("sender","special","\\https\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\https\\C3\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes Blue-Red" id="dacea43f-5ad1-4223-ab8f-0b8ae8f12df3"><con:settings/><con:config><script>// Upload PModes: blue for sender, red for receiver
Domibus.uploadPmode("sender","special","\\https\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\https\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="4fca59f6-84e8-4b88-9140-8517e0fe59d3" name="Submit Message-Push"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Push" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="09d242c8-3a7d-4176-b9b1-a29043c1439b" name="Submit Message in revers direction-Push"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message in revers direction-Push" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="bcf0453d-23fc-41b2-9b69-6175f1c72f87" name="Submit Message-Pull"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message-Pull" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-BLue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-rED</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc13">bdx:noprocess</ns:Service>
               <ns:Action>TC13Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6da50573-4c2a-47d0-8b0c-88b66cbc5d87"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="65832da5-4cef-4fe9-a371-56d4b43c98ac"/><con:assertion type="XPath Match" name="XPath Match" id="903a69d6-fbf8-4154-8f78-eb72374621aa"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="327fcd66-8d38-459f-b8b6-f7b50830fe27"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore files default" id="6506355c-28fb-44b6-9924-d57f8afe1a83" disabled="true"><con:settings/><con:config><script>// Copy keystore blue default
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red default
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\red\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default truststores Blue-Red" id="df9d894c-ff74-4b46-8394-bfd13d65558c" disabled="true"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","default","\\blue\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","default","\\red\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload default PModes Blue-Red" id="506a9a57-c973-4f4f-a3c5-7c3c7414a7bd" disabled="true"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","default","\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restore Domibus paths (if needed)" id="c32e0301-f9d5-4b97-aed4-bf2c2586741a" disabled="true"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/sender/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/receiver/domibus/");

log.info "UPDATE DONE.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Restore DB config (if needed)" id="a6a299cb-c93b-424d-a9ce-147cb43fbfbc" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-localhost-tomcat-tomcat"].testSteps['Set custom properties-Default-Default-Main Branch'].run( testRunner, context );</script></con:config></con:testStep><con:setupScript>Domibus.checkIfAnySmokeTestsFailed(testRunner, testCase, log)</con:setupScript><con:tearDownScript>Domibus.checkSmokeTestsResult(testRunner, testCase, log)

//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="cea23b4d-003f-4066-86a7-be622257fed4" name="WS-Load-Tests"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom099-Security ON-oposite-direction-short-check" searchProperties="true" id="0f584a25-0d4f-4704-be10-b7913c2d216a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="dfa860eb-0313-40cd-9293-ef41a9b347e3" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-TomToWeblogic002-1-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="1a1efeb1-4699-4bda-b6e0-d593fa7c45c4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="3e26926e-5e33-48c6-8758-f3bd7636a215"/><con:assertion type="XPath Match" name="XPath Match" id="f05e8d1c-fe96-4401-998c-3b991845b83b"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="916c345f-ecc1-4d4a-a271-7324425176c4" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="list Pending Messages" id="3a28a8d1-c763-4523-971e-01005f1b4ca1" disabled="true">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="list Pending Messages" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="a20eeb7f-3a3b-4e56-b3d8-6f5fb1d15477" name="Not SOAP Fault"/><con:assertion type="Valid HTTP Status Codes" id="03455c1a-846c-470b-a7c0-ff3ba8b172da" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f00dd9b9-248b-4d14-9049-1af7b3a9839e" name="Contains" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 1#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3102ee9e-eeef-4dc7-b902-c97f3de3c6a9" name="Contains 1" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 3#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b7d8791c-44f8-488a-ae0f-0768d50df7b1" name="Contains 2" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 4#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="9b94f17f-e1a2-4075-b5a0-e1bb7838a082" name="Not Contains" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 2#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="941dc22f-9ef8-4de1-98e3-739f979b2647" name="Not Contains 1" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 5#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>${#Project#adminC1Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:loadTest id="85e9bca0-4451-4359-b5f8-2891818c2079" name="LoadTest 1"><con:settings/><con:threadCount>3</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>3500</con:testLimit><con:limitType>COUNT</con:limitType><con:loadStrategy><con:type>Simple</con:type></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval></con:loadTest><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be22362a-0714-4a70-94d2-d92c2adf582d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f361f65d-cafe-4252-a9fe-c91c7b39169a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9a4ce72f-d362-40be-b476-bb41677b06b3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>22d1bcab-bbda-47a3-93cf-67b83d609181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2bff8a53-0189-4c9d-a8bc-ce677f14b8bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cde68343-52c3-4c12-92f3-74fd3450ccb2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3337d4db-2b12-4a07-93f3-29782377d40b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom099-Security ON-oposite-direction-for load test" searchProperties="true" id="fec10376-8770-4b98-9b8d-b5d347aeb2f0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="cfde8afd-054a-499d-9fd6-27cd475ff0a7" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Weblogic099-1-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="1a1efeb1-4699-4bda-b6e0-d593fa7c45c4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="3e26926e-5e33-48c6-8758-f3bd7636a215"/><con:assertion type="XPath Match" name="XPath Match" id="f05e8d1c-fe96-4401-998c-3b991845b83b"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="916c345f-ecc1-4d4a-a271-7324425176c4"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="3223acd8-ed16-409c-8731-2680e79d197a"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5a9dc0b3-ad37-4ba6-8146-89901a790c8c" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Weblogic099-2-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="1a1efeb1-4699-4bda-b6e0-d593fa7c45c4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="3e26926e-5e33-48c6-8758-f3bd7636a215"/><con:assertion type="XPath Match" name="XPath Match" id="f05e8d1c-fe96-4401-998c-3b991845b83b"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="916c345f-ecc1-4d4a-a271-7324425176c4"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="5480b101-084e-4b6b-82fd-5f0b4917cd0a"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="334d8e2c-efcb-44bb-98b0-aa13e9bf7714" name="Submit Message 3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 3" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Weblogic099-3-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="1a1efeb1-4699-4bda-b6e0-d593fa7c45c4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="3e26926e-5e33-48c6-8758-f3bd7636a215"/><con:assertion type="XPath Match" name="XPath Match" id="f05e8d1c-fe96-4401-998c-3b991845b83b"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="916c345f-ecc1-4d4a-a271-7324425176c4"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="547fec2d-b842-42ba-ac7b-0792759d0375"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="09ef4118-5ed6-4bfe-a697-06805c318557" name="Submit Message 4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 4" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Weblogic099-4-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="1a1efeb1-4699-4bda-b6e0-d593fa7c45c4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="3e26926e-5e33-48c6-8758-f3bd7636a215"/><con:assertion type="XPath Match" name="XPath Match" id="f05e8d1c-fe96-4401-998c-3b991845b83b"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="916c345f-ecc1-4d4a-a271-7324425176c4"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="18c53ed6-d281-4f4a-befe-eba4243ade1f"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="87fc8933-d57e-4d61-ba06-da869ec73374" name="Submit Message 5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 5" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Weblogic099-5-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="1a1efeb1-4699-4bda-b6e0-d593fa7c45c4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="3e26926e-5e33-48c6-8758-f3bd7636a215"/><con:assertion type="XPath Match" name="XPath Match" id="f05e8d1c-fe96-4401-998c-3b991845b83b"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="916c345f-ecc1-4d4a-a271-7324425176c4"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D5" id="24ee2aec-f3f7-4640-8af3-4353aa90805f"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="fcf63c48-0c0e-48b6-a5a9-5ce1aee7ee04" name="retrieveMessage 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message 2#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c37fa014-3de6-4584-a7a1-0fbf872c2a1d"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="b885691e-947b-4e85-b9dc-26ba67c96608"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="b813a9d9-0ffc-4731-bb46-df1059a42905"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom099-2-");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D6" id="b194bb7e-72ba-42c4-895a-f1aeb9c796e1"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="ac928cf8-594b-42b7-8b35-09c0f424162f" name="retrieveMessage 5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage 5" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message 5#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="e9645532-f924-49e1-aae7-88ea37bd7549"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="b2294c37-8ba9-4117-ab39-9df71a17ed58"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="ebc8b871-2295-49c5-8b6f-ff0da8f2d33f"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom099-5-");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D7" id="193a397f-8558-4073-9e4d-a05b0b9541bd"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" name="list Pending Messages" id="1971156e-bedd-4e0f-b68d-e061847ab009">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="list Pending Messages" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="a20eeb7f-3a3b-4e56-b3d8-6f5fb1d15477" name="Not SOAP Fault"/><con:assertion type="Valid HTTP Status Codes" id="03455c1a-846c-470b-a7c0-ff3ba8b172da" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f00dd9b9-248b-4d14-9049-1af7b3a9839e" name="Contains" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 1#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3102ee9e-eeef-4dc7-b902-c97f3de3c6a9" name="Contains 1" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 3#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b7d8791c-44f8-488a-ae0f-0768d50df7b1" name="Contains 2" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 4#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="9b94f17f-e1a2-4075-b5a0-e1bb7838a082" name="Not Contains" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 2#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="941dc22f-9ef8-4de1-98e3-739f979b2647" name="Not Contains 1" disabled="true"><con:configuration><token>&lt;messageID>${Submit Message 5#Response#//messageID}&lt;/messageID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>${#Project#adminC1Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:loadTest id="0cdbac95-638e-4cf6-a798-fab4ba874bb7" name="LoadTest 1"><con:settings/><con:threadCount>5</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>333</con:testLimit><con:limitType>COUNT_PER_THREAD</con:limitType><con:loadStrategy><con:type>Simple</con:type></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval></con:loadTest><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be22362a-0714-4a70-94d2-d92c2adf582d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f361f65d-cafe-4252-a9fe-c91c7b39169a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9a4ce72f-d362-40be-b476-bb41677b06b3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>22d1bcab-bbda-47a3-93cf-67b83d609181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2bff8a53-0189-4c9d-a8bc-ce677f14b8bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cde68343-52c3-4c12-92f3-74fd3450ccb2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3337d4db-2b12-4a07-93f3-29782377d40b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom105-Push-Test Experience-Heavy Logs" searchProperties="true" id="ca342bf2-e353-4fcd-8924-762344423273">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="e8b74588-9b2e-4d8f-b7e9-6700f089c733" disabled="true"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Exchange several messages simultaneously between C1 and C4 (around 500 messages).\nVerify that the log file domibus.log doesn't increase GB wise."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="965c6885-f466-4ead-afcf-9c0bc04f6b5f" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc7">bdx:noprocess</ns:Service>
               <ns:Action>TC7Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2316951c-1fc3-45a0-87f8-c5e3711aa367"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="83bab5a4-190e-407b-8241-c7cbfe12deb9"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bd5ddcd7-0e1c-4429-9c84-ebe98542eac8" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:loadTest id="961d4f40-92d6-48bc-ab4d-b8e8b2bfc195" name="LoadTest 1"><con:settings/><con:threadCount>5</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>400</con:testLimit><con:limitType>COUNT</con:limitType><con:loadStrategy><con:type>Simple</con:type></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>906220c2-8277-4fcb-a3bd-f15306888b25</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53c0a958-b619-493b-b45b-7b9d7ecf4e43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e138bc36-5999-4555-b848-c445b16888f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e463ae55-976e-4821-ba44-7ac3ab41c5e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>72a27452-cd8c-4971-8adc-00af35c941f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>af041385-12f1-4709-a09d-189cb32e5fbd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b4dd5a76-3e3a-4c77-812b-72385f03e7d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c900b357-a318-4d50-af49-a18a044c70e6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom122-LoadTest-Manual-Too many messages to delete at once" searchProperties="true" id="7b81417e-c68f-484a-9b58-0c8c2f91652b">
            <con:description>This test needs execution manual checks for errors in log files. 

Steps
1. Add two new parameters to domibus-configuration.xml file for Receiver
message.retention.downloaded.max.delete=1000
message.retention.not_downloaded.max.delete=1000

2. Run load tests defined in this test step. 

3. Turn off Receiver for X minutes (when X is more than retentions time) and after restart observe "Messages" page of Admin Panel  to see how messages are being deleted (check number of deleted messages, deleting should stop after some time)

4. Search in domibus.log file of Receiver for errors like in example string:
DEFAULT.retentionWorkerJob threw an exception.
org.quartz.SchedulerException: Job threw an unhandled exception. 
[See nested exception: org.springframework.transaction.UnexpectedRollbackException: JTA transaction unexpectedly rolled back 
(maybe due to a timeout); nested exception is javax.transaction.RollbackException: Prepare: NO vote]

5. Shutdown Receiver 

6. Change parameters defined in step 1, for example set values to: 
&lt;prop key="message.retention.downloaded.max.delete">3&lt;/prop>
&lt;prop key="message.retention.not_downloaded.max.delete">5&lt;/prop>

7. Start Receiver again

8. Observe "Domibus - Messages Log:" to see if correct number of messages are being deleted (3 downloaded + 5 undownloaded each minute)

9. Shutdown Receiver 

10. Comment parameters defined in step 1. 

11. Start Receiver again

12. Observe "Domibus - Messages Log:" to see if correct number of messages are being deleted (default 50 downloaded + default 50 undownloaded each minute)
</con:description><con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="28121afd-5dce-4b37-9326-de9650490b37" name="Submit Message 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom122-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc12">bdx:noprocess</ns:Service>
               <ns:Action>TC12Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4fe1c1b6-97d1-4a00-b093-771ccf4f2384"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="910b614e-8446-4f18-a085-6a85f7532c5a"/><con:assertion type="XPath Match" name="XPath Match" id="255865d2-03ce-41c7-8538-acfb1963c9d1"><con:configuration><path>declare namespace xmime='http://www.w3.org/2005/05/xmlmime';
declare namespace ns6='http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/';
declare namespace ns5='http://org.ecodex.backend/1_1/';
declare namespace soap='http://www.w3.org/2003/05/soap-envelope';
//messageID</path><content>${Submit Message 1#Response#//messageID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>true</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7d4624f2-6c84-4967-b6eb-0b357249ad7d" name="Submit Message 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom122-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc12">bdx:noprocess</ns:Service>
               <ns:Action>TC12Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a31ed16f-0f9c-4c3d-8911-c0e1be605c6c"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="3ec933db-1cc5-45c5-b190-b3164db29f2f"/><con:assertion type="XPath Match" name="XPath Match" id="7f8e42e7-5b53-4b93-bd83-b4921ad67b8f"><con:configuration><path>declare namespace xmime='http://www.w3.org/2005/05/xmlmime';
declare namespace ns6='http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/';
declare namespace ns5='http://org.ecodex.backend/1_1/';
declare namespace soap='http://www.w3.org/2003/05/soap-envelope';
//messageID</path><content>${Submit Message 2#Response#//messageID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="1da064aa-d47e-48b3-b545-f8c1e3adaa3c" name="Submit Message 3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 3" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom122-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc12">bdx:noprocess</ns:Service>
               <ns:Action>TC12Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="bcfd747b-c04e-4eb4-9894-f1096b07c241"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="213bc8c8-528b-47fd-adbd-4aeac4513a81"/><con:assertion type="XPath Match" name="XPath Match" id="6eb6e591-9255-4b49-bf45-190aa03e2017"><con:configuration><path>declare namespace xmime='http://www.w3.org/2005/05/xmlmime';
declare namespace ns6='http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/';
declare namespace ns5='http://org.ecodex.backend/1_1/';
declare namespace soap='http://www.w3.org/2003/05/soap-envelope';
//messageID</path><content>${Submit Message 3#Response#//messageID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="c64e1a25-2185-4f30-9bf8-a7da16f9d0d0" name="Submit Message 4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message 4" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom122-${=new Date().format("yyMMdd-HHmmss.SSS")}-T${ThreadIndex}-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc12">bdx:noprocess</ns:Service>
               <ns:Action>TC12Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="57976873-9d9d-4e52-9cca-a5f1df6e0a95"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="57a918d9-1d0a-4d41-a600-0964fe09e6c4"/><con:assertion type="XPath Match" name="XPath Match" id="165d9103-6eb0-4f05-b003-654e455c42c1"><con:configuration><path>declare namespace xmime='http://www.w3.org/2005/05/xmlmime';
declare namespace ns6='http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/';
declare namespace ns5='http://org.ecodex.backend/1_1/';
declare namespace soap='http://www.w3.org/2003/05/soap-envelope';
//messageID</path><content>${Submit Message 4#Response#//messageID}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="Delay" id="8b1cd4cb-e035-4b82-986b-3d028312dedd"><con:settings/><con:config><delay>6000</delay></con:config></con:testStep><con:testStep type="request" id="cb99f83d-ed22-43ec-8877-e550352d66ef" name="retrieveMessage 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message 1#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="7507d87e-0b5e-49e2-ae78-a69d70a5749a"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="6e2d30b5-28b8-46d9-b0c6-1917b9758ce3"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="cdd8de11-4c9f-4921-88ba-e3567e26fabe"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom099-2-");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="500bea89-63a4-4a7c-83e7-dc760832f38c" name="retrieveMessage 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message 2#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="7507d87e-0b5e-49e2-ae78-a69d70a5749a"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="6e2d30b5-28b8-46d9-b0c6-1917b9758ce3"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="cdd8de11-4c9f-4921-88ba-e3567e26fabe"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom099-2-");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:loadTest id="b216b9c6-5807-4771-8ac8-2c062c58003e" name="LoadTest 1"><con:settings/><con:threadCount>8</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>50</con:testLimit><con:limitType>COUNT_PER_THREAD</con:limitType><con:loadStrategy><con:type>Simple</con:type><con:config><testDelay>1000</testDelay><randomFactor>0.5</randomFactor></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:tearDownScript>//def test = new Domibus(log,null,context);
//test.cleanDBMessageIDStartsWith("-Dom122-");
//test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46a821e6-6caf-43f3-8f1e-fc16fd2acf61</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90414ed1-d501-45a8-86b6-466a1352735c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cd8b9098-8fbd-42a9-8eb7-67404b5f59dd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3839a52-98bf-4836-bfd0-d66c9077dc86</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3318170e-b4a8-43f8-8457-75f41adba601</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9da29dce-7530-4cec-86c6-f10f5b4bb758</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6b2488cf-b394-4769-a149-5bc2e72bc226</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2987b39e-862d-45cb-b23c-07d4db1cc051</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>780d2ff4-02ae-48ce-ae2d-44dcf54546da</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6db6d48d-73f3-4086-a5a0-5698d77bbf76</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2e72cfb0-7d4e-4c1b-9072-d81d426753d6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="01996781-9813-4efd-96a7-82a6ffd00edb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom160-LoadTest-EDELIVERY-1240-DB deadlocks and QueryTimeoutExceptions" searchProperties="true"><con:description>Run the load test and check the logs after it is finished: DB deadlocks and QueryTimeoutExceptions must not be present.
Please modify the total number of the message to be sent if needed: currently, it is set to 20000.</con:description><con:settings/><con:testStep type="request" name="Submit Message" id="0fff49da-3655-4bae-8aef-d8cb4823d807"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" id="99ae0da5-ecd2-4b00-aedc-bd1a0cd0666b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
         <ns:MessageInfo>
               <ns:MessageId>MS-${=Math.random()}-${=new Date().format("yyMMdd-HHmmss")}</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="570cface-98dd-4abf-976e-fceeb2a5ef2b"/><con:assertion type="SOAP Fault Assertion" id="97693181-cfc2-4ef8-b6ea-bbe14f988f76"/><con:assertion type="XPath Match" id="cbd78353-64f8-4036-9c8b-09d2e216af01" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="7bde0389-3756-4e26-8523-726666c4a3ac" name="RetrieveMessage" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="RetrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:loadTest id="62cf0d8e-ab0a-4a63-99ca-17ff4d3f2566" name="PrepareDB"><con:settings><con:setting id="FlowLayout">true</con:setting><con:setting id="ErrorDetails">true</con:setting></con:settings><con:threadCount>10</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>20000</con:testLimit><con:limitType>COUNT</con:limitType><con:loadStrategy><con:type>Simple</con:type><con:config><testDelay>100</testDelay><randomFactor>0.0</randomFactor></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ef8af694-c60c-4e10-9928-4c8b30756af7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="be2cba49-b40e-40f0-88fe-7cd3b6279bc9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom162-LoadTest-EDELIVERY-2536-Null pointer when SOAP fault does not include a Signal Message" searchProperties="true"><con:description>Run the load test and check the logs after it is finished: 
- nullPointer exceptions must not be present.
- Soap fault response with error message "Max number of active transactions reached:20" is present.  </con:description><con:settings/><con:testStep type="groovy" name="Set transactions properties" id="e6f93b93-10f3-4299-83c5-e9ef4cea2ae4" disabled="true"><con:settings/><con:config><script>def propValueDict = ["com.atomikos.icatch.max_actives" : "20"]
Domibus.changeDomibusProperties("BLUE", propValueDict,  log, context, testRunner);
Domibus.changeDomibusProperties("RED", propValueDict,  log, context, testRunner);
log.info "-DONE-"</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Domibus Sender and Receiver" id="5b4ccc7a-1c36-4180-8334-8db4796a3b7f" disabled="true"><con:settings/><con:config><script>// Stop
Domibus.stopSetMSHs(1,1,0,context,log);

// Start
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--DONE--";</script></con:config></con:testStep><con:testStep type="request" name="Submit Message" id="9c8948ff-552a-4972-8b94-dba98381f439"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" id="95659e44-de7c-41bb-b86e-c7659a62a180"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
         <ns:MessageInfo>
               <ns:MessageId>MS-${=Math.random()}-${=new Date().format("yyMMdd-HHmmss")}</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="08979339-76d5-432b-9dea-d1f28289e9cf"/><con:assertion type="SOAP Fault Assertion" id="94950c63-1d37-46af-aacc-3f609583b511"/><con:assertion type="XPath Match" id="e4157243-80e3-4042-912f-91134291c4d9" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore transactions properties" id="246f5af0-2e9c-4855-9efc-53611e281c3d" disabled="true"><con:settings/><con:config><script>Domibus.restoreDomibusPropertiesFromBackup("BLUE",  log, context, testRunner)
Domibus.restoreDomibusPropertiesFromBackup("RED",  log, context, testRunner)
</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Domibus Sender - Receiver" id="d2f30ba1-06de-4294-80eb-6bb188fd6913" disabled="true"><con:settings/><con:config><script>// Stop
Domibus.stopSetMSHs(1,1,0,context,log);

// Start
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--DONE--";</script></con:config></con:testStep><con:loadTest id="bb9c1998-c7b3-41d3-8359-b3bb9614054f" name="PrepareDB"><con:settings><con:setting id="FlowLayout">true</con:setting><con:setting id="ErrorDetails">true</con:setting></con:settings><con:threadCount>20</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>200</con:testLimit><con:limitType>COUNT</con:limitType><con:loadStrategy><con:type>Simple</con:type><con:config><testDelay>100</testDelay><randomFactor>0.0</randomFactor></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:setupScript>//def testCase = loadTestRunner.loadTest.testCase;
//def testStep = testCase.getTestStepByName( "Set transactions properties" );
//testRunner = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner(testCase, null);
//testStepContext = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext(testStep);
//testStep.run(testRunner, testStepContext);</con:setupScript><con:tearDownScript>//def testCase = loadTestRunner.loadTest.testCase;
//def testStep = testCase.getTestStepByName( "Restore transactions properties" );
//testRunner = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner(testCase, null);
//testStepContext = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext(testStep);
//testStep.run(testRunner, testStepContext);</con:tearDownScript><con:reportParameters/></con:loadTest><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ef8af694-c60c-4e10-9928-4c8b30756af7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="bb516a1a-5a3a-40d1-ac6f-01a434cc0a44" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom175-LoadTest-EDELIVERY-3089-After 400+ message sent next message can't be retrieved" searchProperties="true"><con:description>Run the load test and after it finishes sending messages (more than 400), try to send then retrieve another message.</con:description><con:settings/><con:testStep type="request" name="Submit Message" id="afd00e56-0a1e-498a-9533-8ffebbc6fa5d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" id="99ae0da5-ecd2-4b00-aedc-bd1a0cd0666b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
         <ns:MessageInfo>
               <ns:MessageId>MS-${=Math.random()}-${=new Date().format("yyMMdd-HHmmss")}</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="570cface-98dd-4abf-976e-fceeb2a5ef2b"/><con:assertion type="SOAP Fault Assertion" id="97693181-cfc2-4ef8-b6ea-bbe14f988f76"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Submit Message extra" id="f577bd71-1033-4b9f-81a2-cb0eee62fe95" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message extra" id="99ae0da5-ecd2-4b00-aedc-bd1a0cd0666b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
         <ns:MessageInfo>
               <ns:MessageId>MS-${=Math.random()}-${=new Date().format("yyMMdd-HHmmss")}</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="570cface-98dd-4abf-976e-fceeb2a5ef2b"/><con:assertion type="SOAP Fault Assertion" id="97693181-cfc2-4ef8-b6ea-bbe14f988f76"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4fb71747-0925-4a6b-8915-2621f532ca9d" name="RetrieveMessage extra" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="RetrieveMessage extra" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message extra#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="60dc63fb-b93a-40b5-a73a-51314448ca7d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="63864051-789d-41e0-b685-aff8b726b22a"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:loadTest id="3ff06743-bbf7-4edb-9663-75140b4e72d9" name="PrepareDB"><con:settings><con:setting id="FlowLayout">true</con:setting><con:setting id="ErrorDetails">true</con:setting></con:settings><con:threadCount>10</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>20000</con:testLimit><con:limitType>COUNT</con:limitType><con:loadStrategy><con:type>Simple</con:type><con:config><testDelay>100</testDelay><randomFactor>0.0</randomFactor></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ef8af694-c60c-4e10-9928-4c8b30756af7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a25a5d7e-78fe-41e1-9e6c-32ef9ed6f7bf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom176-LoadTest-EDELIVERY-3161-Load test: few message are not sent-Push" searchProperties="true"><con:description/><con:settings/><con:testStep type="request" name="Submit Message" id="17c0fd35-fa7d-4e28-bcb6-a74b0c855ceb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" id="95659e44-de7c-41bb-b86e-c7659a62a180"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
         <ns:MessageInfo>
               <ns:MessageId>MS-${=Math.random()}-${=new Date().format("yyMMdd-HHmmss")}</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="08979339-76d5-432b-9dea-d1f28289e9cf"/><con:assertion type="SOAP Fault Assertion" id="94950c63-1d37-46af-aacc-3f609583b511"/><con:assertion type="XPath Match" id="e4157243-80e3-4042-912f-91134291c4d9" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:loadTest id="4aeb4dd5-713f-4231-a506-71d3890a441f" name="PrepareDB"><con:settings><con:setting id="FlowLayout">true</con:setting><con:setting id="ErrorDetails">true</con:setting></con:settings><con:threadCount>20</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>1000</con:testLimit><con:limitType>COUNT</con:limitType><con:loadStrategy><con:type>Simple</con:type><con:config><testDelay>100</testDelay><randomFactor>0.0</randomFactor></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:setupScript>//def testCase = loadTestRunner.loadTest.testCase;
//def testStep = testCase.getTestStepByName( "Set transactions properties" );
//testRunner = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner(testCase, null);
//testStepContext = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext(testStep);
//testStep.run(testRunner, testStepContext);</con:setupScript><con:tearDownScript>//def testCase = loadTestRunner.loadTest.testCase;
//def testStep = testCase.getTestStepByName( "Restore transactions properties" );
//testRunner = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner(testCase, null);
//testStepContext = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext(testStep);
//testStep.run(testRunner, testStepContext);</con:tearDownScript><con:reportParameters/></con:loadTest><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ef8af694-c60c-4e10-9928-4c8b30756af7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="bf7286ba-75e3-4506-af9e-97bf66e6a14f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom177-LoadTest-EDELIVERY-3161-Load test: few message are not sent-Pull" searchProperties="true"><con:description/><con:settings/><con:testStep type="request" name="Submit Message" id="5f8dd649-0569-4a82-a393-aa11f899200a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" id="95659e44-de7c-41bb-b86e-c7659a62a180"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
         <ns:MessageInfo>
               <ns:MessageId>MS-${=Math.random()}-${=new Date().format("yyMMdd-HHmmss")}</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="08979339-76d5-432b-9dea-d1f28289e9cf"/><con:assertion type="SOAP Fault Assertion" id="94950c63-1d37-46af-aacc-3f609583b511"/><con:assertion type="XPath Match" id="e4157243-80e3-4042-912f-91134291c4d9" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:loadTest id="31fe8ae1-09a2-449d-9f75-71d35906443a" name="PrepareDB"><con:settings><con:setting id="FlowLayout">true</con:setting><con:setting id="ErrorDetails">true</con:setting></con:settings><con:threadCount>20</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>1000</con:testLimit><con:limitType>COUNT</con:limitType><con:loadStrategy><con:type>Simple</con:type><con:config><testDelay>100</testDelay><randomFactor>0.0</randomFactor></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:setupScript>//def testCase = loadTestRunner.loadTest.testCase;
//def testStep = testCase.getTestStepByName( "Set transactions properties" );
//testRunner = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner(testCase, null);
//testStepContext = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext(testStep);
//testStep.run(testRunner, testStepContext);</con:setupScript><con:tearDownScript>//def testCase = loadTestRunner.loadTest.testCase;
//def testStep = testCase.getTestStepByName( "Restore transactions properties" );
//testRunner = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestCaseRunner(testCase, null);
//testStepContext = new com.eviware.soapui.impl.wsdl.testcase.WsdlTestRunContext(testStep);
//testStep.run(testRunner, testStepContext);</con:tearDownScript><con:reportParameters/></con:loadTest><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ef8af694-c60c-4e10-9928-4c8b30756af7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="1bb6ab40-710f-4a30-82c5-f699c3ca5873" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom183-LoadTest-EDELIVERY-3285-Default WS Plugin: listPendingMessages does not always retrieve all the pending messages" searchProperties="true"><con:description>Scenario to reproduce this issue(only on Tomcat):
- Send around 800 messages from C3 to C2; in the BackendWebServiceNotiifcationQueue there should be as many MESSAGE_SEND_SUCESS messages
- Send around 30 messages from C2 to C3.
- Call listPendingMessages operation of the Default WS Plugin but not all 30 messages are returned.
</con:description><con:settings/><con:testStep type="request" name="Submit Message Blue to Red" id="8fa385b1-8da1-43cf-aa9c-3f55dce797e0" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Blue to Red" id="99ae0da5-ecd2-4b00-aedc-bd1a0cd0666b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
         <ns:MessageInfo>
               <ns:MessageId>MS-${=Math.random()}-${=new Date().format("yyMMdd-HHmmss")}</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="570cface-98dd-4abf-976e-fceeb2a5ef2b"/><con:assertion type="SOAP Fault Assertion" id="97693181-cfc2-4ef8-b6ea-bbe14f988f76"/><con:assertion type="XPath Match" id="cbd78353-64f8-4036-9c8b-09d2e216af01" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Submit Message Red to Blue" id="78898823-9b82-4c00-8687-a5035fa733f3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message Red to Blue" id="99ae0da5-ecd2-4b00-aedc-bd1a0cd0666b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
         <ns:MessageInfo>
               <ns:MessageId>MS-${=Math.random()}-${=new Date().format("yyMMdd-HHmmss")}</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="570cface-98dd-4abf-976e-fceeb2a5ef2b"/><con:assertion type="SOAP Fault Assertion" id="97693181-cfc2-4ef8-b6ea-bbe14f988f76"/><con:assertion type="XPath Match" id="cbd78353-64f8-4036-9c8b-09d2e216af01" name="XPath Match"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="list Pending Messages" id="c7bcbe2b-e336-4f40-8dd6-704bf003daf5" disabled="true">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="list Pending Messages" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#localUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="a20eeb7f-3a3b-4e56-b3d8-6f5fb1d15477" name="Not SOAP Fault"/><con:credentials>
                            <con:authType>No Authorization</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:loadTest id="eb691b94-240a-4d7e-8034-15da88f88a47" name="PrepareDB"><con:settings><con:setting id="FlowLayout">true</con:setting><con:setting id="ErrorDetails">true</con:setting></con:settings><con:threadCount>5</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>30</con:testLimit><con:limitType>COUNT</con:limitType><con:loadStrategy><con:type>Simple</con:type><con:config><testDelay>100</testDelay><randomFactor>0.0</randomFactor></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:tearDownScript>ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>ef8af694-c60c-4e10-9928-4c8b30756af7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/></con:testSuite><con:testSuite id="05c49622-06ab-4d9b-b1ea-13e9dfa6f36a" name="WS-External-Tests"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom126-Push-Test-Guide-Project" searchProperties="true" id="07592b75-4af3-4eae-bbcf-1aab13e80f23">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Run sample test guide project" id="3f017416-8a80-4dda-bd68-f4b5fda8c54b"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Run sample test guide project."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom129-Push-Backwards compatibility" searchProperties="true" id="24e661b7-1423-470f-acab-1902706de4ea">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Run Old client VS new plugin" id="9e03ac39-f857-4797-a1d2-6aa6175093e4"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Run the new java client against the old plugin."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="d17d18f5-8b96-4401-825c-91d44b787893"><con:settings/><con:config><script>Domibus.uploadPmode("sender","special","\\clientPlugin\\blue\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\clientPlugin\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log);</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/></con:testSuite><con:testSuite id="6304c7a1-704a-4b9b-b1b8-b345c418b21b" name="WS-Dynamic-Discovery"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom133-Push-Dynamic Discovery-PEPPOL-Basic Flow" searchProperties="true" id="8c7833a0-ca7d-42ce-bf97-2d2e221ca362">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="e03297fd-83fb-470e-855c-c0f533a258ec"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the PEPPOL client for dynamic discovery. In the file domibus-configuration file add/replace properties:\ndomibus.dynamicdiscovery.client.specification=PEPPOL\ndomibus.dynamicdiscovery.peppolclient.mode=TEST\ndomibus.domibus.dynamicdiscovery.partyid.type=urn:fdc:peppol.eu:2017:identifiers:ap\ndomibus.smlzone=acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache" id="9d4eb27e-5d61-495e-9dd8-4e461c1e1f21"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Clean domibus caches."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="8ee858c7-3352-46b1-a0b6-36caeafedc76"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Start 2 domibus C2-C3" id="c73fc519-1786-4cf8-9e91-10c25c39fe6f"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Start 2 domibus: \"C2DynPeppol\" and \"C3DynPeppol\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="af40b013-29ce-47eb-b977-c76b9c64cf19"><con:settings/><con:config><script>// Upload PModes
//Domibus.uploadPmode("C2","special","\\DynamicDiscovery\\C2\\peppol\\PMode-domibus-C2DYN.xml",context,log);
//Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DYN.xml",context,log,"domain2");

// Those are not usefull for the tests but only to avoid untimely logs
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DummyDom1.xml",context,log,"domain1");
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DummyDef.xml",context,log,"default");
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="26c16233-674f-4be7-9a09-56867ee1b37d"><con:settings/><con:config><script>// Upload truststores
Domibus.uploadTruststore("C2","special","\\DynamicDiscovery\\C2\\peppol\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("C3","special","\\DynamicDiscovery\\C3\\peppol\\gateway_truststore.jks",context,log,"domain2");
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="4169b729-56a5-4c7d-b229-99f04d251454"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="e95ec0ff-d0fc-47af-9811-0cb2adbbd983" name="Dynamic PEPPOL"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic PEPPOL" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:fdc:peppol.eu:2017:identifiers:ap">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef>urn:fdc:peppol.eu:2017:agreements:tia:ap_provider</ns:AgreementRef>
               <ns:Service type="urn:fdc:peppol.eu:2017:identifiers:proc-id">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0088:112244</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="545e5136-c266-4d47-bf67-c4de01fbc4b4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="1367d063-18bb-42ab-b548-5b17c7e67f12"/><con:assertion type="XPath Match" name="XPath Match" id="3cca8a62-7c81-421a-86ca-3f41187ebc48" disabled="true"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7ba7b60a-4127-417e-9e1a-6c2f255f67db" disabled="true"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Reset multitenancy mode" id="6ee108ca-b3b1-48cc-b243-9836a281556a" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore path'].run(testRunner, context);
ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c8289fa-683a-4ce9-be18-d347f1f2aa73</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e26e8c17-3a46-466f-9256-3bdb1b815b09</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>181dc2f6-579e-409c-90ca-d919f207ed8a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ad461d5d-6662-4627-a844-ac38e1324650</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b6b02b0a-2913-4a1c-a422-e70c97306b4a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09acf100-b143-4079-8b84-07521ee8f639</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom134-Push-Dynamic Discovery-PEPPOL-FinalRecipient-Not registered" searchProperties="true" id="556885ae-a5c4-4e47-a7c8-b60919917310">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="01d23d9c-3ad0-45ff-ab2c-ce590c104c0e"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the PEPPOL client for dynamic discovery. In the file domibus-configuration file add/replace properties:\ndomibus.dynamicdiscovery.client.specification=PEPPOL\ndomibus.dynamicdiscovery.peppolclient.mode=TEST\n#domibus.dynamicdiscovery.partyid.responder.role=...\n#domibus.dynamicdiscovery.partyid.type=...\ndomibus.smlzone=acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache" id="f0d6d9aa-36ca-406a-aab7-e5cfd55100de"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Clean domibus caches."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="f637bf4c-5bed-4c33-a034-bc7b0ddc4621"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Start 2 domibus C2-C3" id="5405f84e-fd89-4ad7-8f3e-ce57885bffcc"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Start 2 domibus: \"C2DynPeppol\" and \"C3DynPeppol\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="1f516c24-0152-4352-b66a-8e77a9cb134d"><con:settings/><con:config><script>// Upload PModes
Domibus.uploadPmode("C2","special","\\DynamicDiscovery\\C2\\peppol\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DYN.xml",context,log,"domain2");

// Those are not usefull for the tests but only to avoid untimely logs
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DummyDom1.xml",context,log,"domain1");
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DummyDef.xml",context,log,"default");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="b9d4e7dd-ee95-4d18-89e4-a20f1de7c471"><con:settings/><con:config><script>// Upload truststores
Domibus.uploadTruststore("C2","special","\\DynamicDiscovery\\C2\\peppol\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("C3","special","\\DynamicDiscovery\\C3\\peppol\\gateway_truststore.jks",context,log,"domain2");</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="c0f0952f-f7d0-4256-b8d1-cab8d1b520eb"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="b40c9317-7eaa-4c71-93f1-743c76fceeef" name="Dynamic PEPPOL"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic PEPPOL" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:fdc:peppol.eu:2017:identifiers:ap">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef>urn:fdc:peppol.eu:2017:agreements:tia:ap_provider</ns:AgreementRef>
               <ns:Service type="urn:fdc:peppol.eu:2017:identifiers:proc-id">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0088:112244wrong</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6ac1a11f-9bcb-4a3f-bf57-8093458dee92"/><con:assertion type="Not SOAP Fault Assertion" id="40dd2d03-2d90-417e-945e-aeab90d42389" name="SOAP Fault"/><con:assertion type="Simple Contains" id="159cb918-c811-43ed-8359-f341d95c9f85" name="Contains"><con:configuration><token>Could not fetch metadata from SMP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Reset multitenancy mode" id="6ba674ee-c299-46aa-84d7-3704a072e858" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom126-");
test.finalize();
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c8289fa-683a-4ce9-be18-d347f1f2aa73</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e26e8c17-3a46-466f-9256-3bdb1b815b09</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>181dc2f6-579e-409c-90ca-d919f207ed8a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ad461d5d-6662-4627-a844-ac38e1324650</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b6b02b0a-2913-4a1c-a422-e70c97306b4a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09acf100-b143-4079-8b84-07521ee8f639</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom135-Push-Dynamic Discovery-PEPPOL-Wrong configuration" searchProperties="true" id="b326a14d-91e2-47e5-a49d-2139f436ebc3">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configure multitenancy mode" id="ba6c580a-9766-4e75-b584-af1632080251"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration 1" id="ebc4ad01-ad3f-401c-ba1a-d07de2425116"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the PEPPOL client for dynamic discovery. In the file domibus-configuration file add/replace properties:\ndomibus.dynamicdiscovery.client.specification=PEPPOL\ndomibus.dynamicdiscovery.peppolclient.mode=TEST\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache 1" id="a01f4417-94c3-40d7-95e7-a17fd0e84f97"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Clean domibus caches."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Start 2 domibus C2-C3" id="1bb804ba-9638-4b1a-b0bb-a3f5ed2d8f7d"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Start 2 domibus: \"C2DynPeppol\" and \"C3DynPeppol\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="c87afd1a-2330-4a35-b98a-fd2b63635c42"><con:settings/><con:config><script>// Upload PModes
Domibus.uploadPmode("C2","special","\\DynamicDiscovery\\C2\\peppol\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DYN.xml",context,log,"domain2");

// Those are not usefull for the tests but only to avoid untimely logs
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DummyDom1.xml",context,log,"domain1");
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DummyDef.xml",context,log,"default");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="b4097225-5e17-459a-b2d8-a6f1f6844875"><con:settings/><con:config><script>// Upload truststores
Domibus.uploadTruststore("C2","special","\\DynamicDiscovery\\C2\\peppol\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("C3","special","\\DynamicDiscovery\\C3\\peppol\\gateway_truststore.jks",context,log,"domain2");</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="25a823b5-2870-4732-bd42-9290375d19ee"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="6579222f-7554-405c-84bd-19b7296b9300" name="Dynamic PEPPOL 1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic PEPPOL 1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:fdc:peppol.eu:2017:identifiers:ap">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef>urn:fdc:peppol.eu:2017:agreements:tia:ap_provider</ns:AgreementRef>
               <ns:Service type="urn:fdc:peppol.eu:2017:identifiers:proc-id">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0088:112244</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="0b78a91c-2d32-4a25-b4b2-6405b49a6f75"/><con:assertion type="Simple Contains" id="98e3ac09-e3ec-4cc4-9056-349735a251bc" name="Contains"><con:configuration><token>Could not fetch metadata from SMP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" id="c9cfa458-87d8-413d-99bb-29a582871cc2" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="75e3a974-9a60-40dd-91af-f862c4100620"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configuration 2" id="c4a45e1b-0c8a-4f8f-b188-e068b28633c0"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the PEPPOL client for dynamic discovery. In the file domibus-configuration file add/replace properties:\ndomibus.dynamicdiscovery.client.specification=PEPPOL\ndomibus.dynamicdiscovery.peppolclient.mode=UNK\ndomibus.smlzone=acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache 2" id="820d9c8f-9ca1-42f6-b17d-9ebb08e9380e"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Clean domibus caches."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Restart 2 domibus C2-C3" id="e7904368-feba-47a7-9ccf-3db0462a8ac7"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Start 2 domibus: \"C2DynPeppol\" and \"C3DynPeppol\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="17dc3be8-347c-4197-b089-05e8fcd956e2"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="8769ff95-eb7e-4077-adb0-520ed4f8760a" name="Dynamic PEPPOL 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic PEPPOL 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:fdc:peppol.eu:2017:identifiers:ap">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef>urn:fdc:peppol.eu:2017:agreements:tia:ap_provider</ns:AgreementRef>
               <ns:Service type="urn:fdc:peppol.eu:2017:identifiers:proc-id">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0088:112244</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2b2b86c8-b90b-4316-a92e-2f82699c0556"/><con:assertion type="Not SOAP Fault Assertion" id="e62b4440-6606-4c3b-93b0-22b378a5c08f" name="SOAP Fault"/><con:assertion type="Simple Contains" id="59a756b2-370a-473f-9d17-3142e98068b5" name="Contains"><con:configuration><token>Could not fetch metadata from SMP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore default configuration" id="94f59317-af54-475c-b556-39724c03dd76" disabled="true"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Restore default configuration."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Reset multitenancy mode" id="2b880ad7-0ccb-4536-97a5-342fda5283fc" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore path'].run(testRunner, context);

ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c8289fa-683a-4ce9-be18-d347f1f2aa73</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e26e8c17-3a46-466f-9256-3bdb1b815b09</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>181dc2f6-579e-409c-90ca-d919f207ed8a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ad461d5d-6662-4627-a844-ac38e1324650</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b6b02b0a-2913-4a1c-a422-e70c97306b4a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09acf100-b143-4079-8b84-07521ee8f639</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1505934-02f4-464c-b55d-7322af1d2209</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>443c6ef8-8296-4d9b-bd09-aa7511b93248</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom136-Push-Dynamic Discovery-PEPPOL-EDELIVERY-2204-Expired-Revoked" searchProperties="true" id="af469d1d-d46c-41d8-9e74-8270116b8ef0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configure multitenancy mode" id="c2b4e289-3335-4fc2-9a16-b3cb44111e3f"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "2");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 2.";</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="1b6f01b3-95d8-4da9-ab97-49746b7aa535"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the PEPPOL client for dynamic discovery. In the file domibus-configuration file add/replace properties:\ndomibus.dynamicdiscovery.client.specification=PEPPOL\ndomibus.dynamicdiscovery.peppolclient.mode=TEST\ndomibus.smlzone=acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy crl file" id="4fedc4a9-9ed1-49aa-9626-4604e290bd92"><con:settings/><con:config><script>def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\peppol\\revoked\\edeliveryDyn.crl";
def dest = "C:\\ec\\domibus\\revoked\\edeliveryDyn.crl"; 
if(!new File("C:\\ec\\domibus\\revoked\\edeliveryDyn.crl").exists()){
	Domibus.copyFile(source,dest,log);
}
else{
	log.info "File already exists."
}


</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore file expired" id="ef18c291-a008-48cb-bc14-c0bdcc8a0886"><con:settings/><con:config><script>// Copy keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\peppol\\expired\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache 1" id="a311e771-c544-46f5-9f95-d424fd030958"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Clean domibus caches."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Start 2 domibus C2-C3" id="5cff1332-e7a4-4067-8e80-4fd3389e0292"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Start 2 domibus: \"C2DynPeppol\" and \"C3DynPeppol\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="b0be148e-c8f2-431b-aefb-00062e4a5d91"><con:settings/><con:config><script>// Upload PModes
Domibus.uploadPmode("C2","special","\\DynamicDiscovery\\C2\\peppol\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DYN.xml",context,log,"domain2");

// Those are not usefull for the tests but only to avoid untimely logs
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DummyDom1.xml",context,log,"domain1");
Domibus.uploadPmode("C3","special","\\DynamicDiscovery\\C3\\peppol\\PMode-domibus-C3DummyDef.xml",context,log,"default");</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="6b0603a5-225a-4ccb-ad2a-9b81708f62fe"><con:settings/><con:config><script>// Upload truststores
Domibus.uploadTruststore("C2","special","\\DynamicDiscovery\\C2\\peppol\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("C3","special","\\DynamicDiscovery\\C3\\peppol\\gateway_truststore.jks",context,log,"domain2");</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="2782058e-6cea-4e7c-a504-f58b7d116c73"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="41e4020e-b24d-4fe2-af72-223c2a991333" name="Submit Message - Expired"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message - Expired" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:fdc:peppol.eu:2017:identifiers:ap">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef>urn:fdc:peppol.eu:2017:agreements:tia:ap_provider</ns:AgreementRef>
               <ns:Service type="urn:fdc:peppol.eu:2017:identifiers:proc-id">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0088:112244</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="545e5136-c266-4d47-bf67-c4de01fbc4b4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="1367d063-18bb-42ab-b548-5b17c7e67f12"/><con:assertion type="XPath Match" name="XPath Match" id="3cca8a62-7c81-421a-86ca-3f41187ebc48"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7ba7b60a-4127-417e-9e1a-6c2f255f67db"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore file revoked" id="623d93b3-fbc7-42af-8e1b-294deda5ee45"><con:settings/><con:config><script>// Copy keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\peppol\\revoked\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks";  
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache 2" id="f375c733-7d56-4301-a0ba-ec7b9debe99c"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Clean domibus caches."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Restart 2 domibus C2-C3" id="158a5556-9494-4c17-bb31-a66abd3fe684"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Start 2 domibus: \"C2DynPeppol\" and \"C3DynPeppol\""); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="request" id="13ff8409-c703-4d70-a31f-6a76f04937e7" name="Submit Message - Revoked"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message - Revoked" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:fdc:peppol.eu:2017:identifiers:ap">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef>urn:fdc:peppol.eu:2017:agreements:tia:ap_provider</ns:AgreementRef>
               <ns:Service type="urn:fdc:peppol.eu:2017:identifiers:proc-id">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0088:112244</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="545e5136-c266-4d47-bf67-c4de01fbc4b4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="1367d063-18bb-42ab-b548-5b17c7e67f12"/><con:assertion type="XPath Match" name="XPath Match" id="3cca8a62-7c81-421a-86ca-3f41187ebc48"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7ba7b60a-4127-417e-9e1a-6c2f255f67db"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore keystore file" id="a672567b-a0fa-4d41-a625-d2bcef9784b9" disabled="true"><con:settings/><con:config><script>// Copy keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresDefault\\blue\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks";  
Domibus.copyFile(source,dest,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Reset multitenancy mode" id="7b1e65a1-9e08-45b1-8184-2bb2ff25dc98" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "0");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 0.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore keystore file'].run(testRunner, context);
ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c8289fa-683a-4ce9-be18-d347f1f2aa73</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e26e8c17-3a46-466f-9256-3bdb1b815b09</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>181dc2f6-579e-409c-90ca-d919f207ed8a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ad461d5d-6662-4627-a844-ac38e1324650</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b6b02b0a-2913-4a1c-a422-e70c97306b4a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09acf100-b143-4079-8b84-07521ee8f639</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom137-Push-Dynamic Discovery-OASIS-Basic Flow" searchProperties="true" id="b1e1bd11-e275-4b61-b9d9-735229bc0b91">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Configuration" id="ff251f81-ffb4-4956-81d9-4483dccd5e28"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the OASIS client for dynamic discovery. In the file domibus.properties file add/replace property:\ndomibus.dynamic.discovery.client.specification=OASIS\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway property to true" id="a29d636f-ff80-4e2f-809a-ec6126a8d086"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "true");
log.info "thirdGateway custom property set to true."</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache" id="faa93d4f-439b-47f2-ba48-b8bea5f0bcd1"><con:settings/><con:config><script>// Set correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set Dynamic Discovery path OASIS'].run( testRunner, context );

// Clean the domibus cache
Domibus.clearCache("sender", context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue-Green" id="c5bc1f94-2935-4cfb-bde1-a93ee0b81e8e"><con:settings/><con:config><script>// Start blue and green 
Domibus.stopSetMSHs(1,0,1,context,log);
sleep(2000);
// Start blue and green 
Domibus.startSetMSHs(1,0,1,context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3-Green" id="ce872726-caac-449b-b946-40af3ecbc065"><con:settings/><con:config><script>// Upload PModes: blue and green.  
Domibus.uploadPmode("sender","special","\\DynamicDiscovery\\C2\\oasis\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("receiver","special","\\DynamicDiscovery\\C3\\oasis\\PMode-domibus-C3DYN.xml",context,log);
Domibus.uploadPmode("receivergreen","special","\\Threegateways\\green\\domibus-pmode-green.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3-Green" id="cb9d5623-a624-4c09-820b-09744ea22773"><con:settings/><con:config><script>// Upload truststores: blue for sender, red for receiver and green for the third Domibus.  
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\DynamicDiscovery\\C3\\oasis\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receivergreen","special","\\Threegateways\\green\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="b10b916d-83e3-4ea0-ae4a-f212ce42a154"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="632962d4-5b23-486f-9f13-cd93cef7b8a1" name="Dynamic OASIS"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic OASIS" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6faa3bcb-86e2-48f4-9b6b-4864aa18291e"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="38c27b97-a076-4cb7-91a6-a68ad470230a"/><con:assertion type="XPath Match" name="XPath Match" id="0f5620ca-b9c0-47b1-98ed-59dcf6b0cf67"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="44992428-0607-4393-a34c-5d2aef51169d"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="b573b75f-22dd-4e12-99c2-57e72a7824ff"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="71611da7-5a74-4d1b-b9b7-25cf52ef90f1" name="Blue to green"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Blue to green" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc2">bdx:noprocess</ns:Service>
               <ns:Action>TC2Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="dcebb68b-d1bb-43dd-b758-34d7b0e04e5e"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="b604003e-2de7-4a60-b482-bfeadd6a6405"/><con:assertion type="XPath Match" name="XPath Match" id="77414fd9-45bb-413a-9566-66fee69245cd"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="bc623402-b1ff-480d-949d-6f364c6f348b"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="d52bb098-2bf5-4c69-a49d-ff92c5afd799"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="fafe51e3-2b39-48ec-9c13-e4290e9b8951" name="green To Blue"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="green To Blue" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#greenUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-green</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc2">bdx:noprocess</ns:Service>
               <ns:Action>TC2Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="b46eaf4d-7657-4267-8aec-d5b672bea962"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d4fb2438-e5a2-4326-875a-32dab97a7e98"/><con:assertion type="XPath Match" name="XPath Match" id="5ce7dd33-c67a-4137-a89a-93700aafa091"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="29d1feb1-110d-47e3-85f1-59888bd899d3"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Set third gateway property to false" id="b7a9e308-3d9d-4cae-993a-c01b072dfaaa" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("thirdGateway", "false");
log.info "thirdGateway custom property set to false."</script></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore path'].run(testRunner, context);</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4154f327-2bd7-40d0-ac23-a0f7faec814a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f74ad04a-7fc3-45a8-916d-55962c96274b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0fd2fe-9c7a-409f-b236-ddd15cfea5f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>432fbf8a-a023-4499-8e67-9869a593390f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a804deb-fe6b-4f01-bd2c-57e0767c9f2e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2a4989a-9aa7-4326-8abb-f739a200a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9951b4cc-a77e-4fcd-8369-9330fe8bf6de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom138-Push-Dynamic Discovery-OASIS-FinalRecipient-Not registered" searchProperties="true" id="13ebf533-d915-4e8f-9f6e-ae6cb804e86c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Connect to the open internet" id="4101bf04-52d6-4b9c-a81a-c20e448fce03"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Connect to the open internet."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="b1a8ae6b-1635-410b-9711-74d34af3c81d"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the OASIS client for dynamic discovery. In the file domibus.properties file add/replace property:\ndomibus.dynamic.discovery.client.specification=OASIS\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Start Blue" id="6eaa4e10-9f3e-4703-bfa7-fc16dd3446dc"><con:settings/><con:config><script>// Start blue
Domibus.startSetMSHs(1,0,0,context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="c767ffdb-8139-4255-bc22-9da71ac1a702"><con:settings/><con:config><script>// Upload PMode blue  
Domibus.uploadPmode("sender","special","\\DynamicDiscovery\\C2\\oasis\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("receiver","special","\\DynamicDiscovery\\C3\\oasis\\PMode-domibus-C3DYN.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="1def6a3c-8715-47ba-86ab-a4abab043c18"><con:settings/><con:config><script>// Upload truststore blue and red 
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\DynamicDiscovery\\C3\\oasis\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="890a6c96-a730-4472-89b4-1d997fa93e97"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="f2aa4eea-735f-4992-9c62-400a5ccd4d7e" name="Dynamic OASIS"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic OASIS" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasiswrong</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3d536f56-5277-4a62-b547-8e599df5d6e9"/><con:assertion type="Not SOAP Fault Assertion" id="5e40e6ec-8180-4722-8acf-7d1c393ea46f" name="SOAP Fault"/><con:assertion type="Simple Contains" id="e6bfe831-308a-443c-826e-87f7f8766334" name="Contains"><con:configuration><token>Could not fetch metadata from SMP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom126-");
test.finalize();
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4154f327-2bd7-40d0-ac23-a0f7faec814a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f74ad04a-7fc3-45a8-916d-55962c96274b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0fd2fe-9c7a-409f-b236-ddd15cfea5f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>432fbf8a-a023-4499-8e67-9869a593390f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a804deb-fe6b-4f01-bd2c-57e0767c9f2e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2a4989a-9aa7-4326-8abb-f739a200a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9951b4cc-a77e-4fcd-8369-9330fe8bf6de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom139-Push-Dynamic Discovery-OASIS-Wrong configuration" searchProperties="true" id="efde18e2-df8a-425e-8c43-a35dd7dae62a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Connect to the open internet" id="4d60c9dc-802e-49aa-a040-8d8321dae94a"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Connect to the open internet."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="34da6685-b85a-4f91-a21d-31c2d233da57"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the OASIS client for dynamic discovery. In the file domibus.properties file add/replace property:\ndomibus.dynamic.discovery.client.specification=PEPPOL\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache" id="d8f51762-e80b-4fe1-a34f-8fcd7d506bbf"><con:settings/><con:config><script>// Set correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set Dynamic Discovery path OASIS'].run( testRunner, context );

// Clean the domibus cache
Domibus.clearCache("sender", context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue" id="dca4e495-0144-48c2-acea-505b84d1b554"><con:settings/><con:config><script>// Start blue and green 
Domibus.stopSetMSHs(1,0,0,context,log);
sleep(2000);
// Start blue and green 
Domibus.startSetMSHs(1,0,0,context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="12c689b3-bb43-4aea-bf0c-413d841cd0e3"><con:settings/><con:config><script>// Upload PMode blue and red 
Domibus.uploadPmode("sender","special","\\DynamicDiscovery\\C2\\oasis\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("receiver","special","\\DynamicDiscovery\\C3\\oasis\\PMode-domibus-C3DYN.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="0d220605-a3bf-468e-80c7-5fe0ce00e698"><con:settings/><con:config><script>// Upload truststore blue and red 
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\DynamicDiscovery\\C3\\oasis\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="4cf34b6e-11b3-4bbe-bbec-cd5840fd3165"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="29708a21-cce0-4f12-a56a-c34c4c53c75a" name="Dynamic OASIS"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic OASIS" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="f925c743-af1a-46f6-b977-30631dff298c"/><con:assertion type="Not SOAP Fault Assertion" id="f5ffb62c-e293-42b9-ae97-f172192536c8" name="SOAP Fault"/><con:assertion type="Simple Contains" id="5af54d17-ac88-4630-8a8e-0ebfc9667e36" name="Contains"><con:configuration><token>Could not fetch metadata from SMP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore path" id="9f2d8c4a-4872-4a4c-82dd-2b9c7863fd66" disabled="true"><con:settings/><con:config><script>// Restore correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set domibus path'].run( testRunner, context );</script></con:config></con:testStep><con:testStep type="groovy" name="Restore default configuration" id="1d0c19fb-8100-4a95-bc49-0e67681e2683" disabled="true"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Restore default configuration."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore path'].run(testRunner, context);</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4154f327-2bd7-40d0-ac23-a0f7faec814a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f74ad04a-7fc3-45a8-916d-55962c96274b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0fd2fe-9c7a-409f-b236-ddd15cfea5f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>432fbf8a-a023-4499-8e67-9869a593390f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a804deb-fe6b-4f01-bd2c-57e0767c9f2e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2a4989a-9aa7-4326-8abb-f739a200a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9951b4cc-a77e-4fcd-8369-9330fe8bf6de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom140-Push-Dynamic Discovery-OASIS-SMP-Not trusted" searchProperties="true" id="a0f780a1-263c-4484-a5ec-3e41f0ec006d">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Connect to the open internet" id="d3ede653-7509-4307-a323-ff7ffa5cbfb5"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Connect to the open internet."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="46f00a82-d430-44b9-9206-59e5fc28b575"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the OASIS client for dynamic discovery. In the file domibus.properties file add/replace property:\ndomibus.dynamic.discovery.client.specification=OASIS\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu\n\nRemove the trusted certificate of the SMP from the sender's truststore (upload a truststore without it)."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache" id="61c520e1-45ad-40c7-94c5-437fd33d9ae1"><con:settings/><con:config><script>// Set correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set Dynamic Discovery path OASIS'].run( testRunner, context );

// Clean the domibus cache
Domibus.clearCache("sender", context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue" id="2658343b-dae5-4dfe-a46a-86f644d9ffe4"><con:settings/><con:config><script>// Start blue and green 
Domibus.stopSetMSHs(1,0,0,context,log);
sleep(2000);
// Start blue and green 
Domibus.startSetMSHs(1,0,0,context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="12a7e69f-8bca-4680-a03e-2da94ef4fecf"><con:settings/><con:config><script>// Upload PMode blue and red 
Domibus.uploadPmode("sender","special","\\DynamicDiscovery\\C2\\oasis\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("receiver","special","\\DynamicDiscovery\\C3\\oasis\\PMode-domibus-C3DYN.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="da440400-c6cc-4b5a-b7cf-8aeb1b4f04d4"><con:settings/><con:config><script>// Upload truststore for blue and red  
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore_without_SMP.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\DynamicDiscovery\\C3\\oasis\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="3a06f22a-c66a-44f9-bf2c-0a6d479b4505"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="59cf85f5-7996-4a54-bd89-df960a0b0709" name="Dynamic OASIS"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic OASIS" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="b697a19c-916c-42c2-a27b-82e7da4d3a44"/><con:assertion type="Simple Contains" id="313d6d51-76f3-47f7-8ba9-06289641711a" name="Contains"><con:configuration><token>Could not fetch metadata from SMP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" id="0a0c4fa2-1cb3-4d4e-84ed-bfc98453808a" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore path'].run(testRunner, context);
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4154f327-2bd7-40d0-ac23-a0f7faec814a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f74ad04a-7fc3-45a8-916d-55962c96274b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0fd2fe-9c7a-409f-b236-ddd15cfea5f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>432fbf8a-a023-4499-8e67-9869a593390f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a804deb-fe6b-4f01-bd2c-57e0767c9f2e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2a4989a-9aa7-4326-8abb-f739a200a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9951b4cc-a77e-4fcd-8369-9330fe8bf6de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom141-Push-Dynamic Discovery-OASIS-Empty Certificate" searchProperties="true" id="07ff1543-e5c6-4200-bfc4-10442de4e02a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Connect to the open internet" id="569151f3-c8bf-4b4d-a678-cb4f26fc2a33"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Connect to the open internet."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="083da289-684b-4b8e-84ab-a91f289ec4c4"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the OASIS client for dynamic discovery. In the file domibus.properties file add/replace property:\ndomibus.dynamic.discovery.client.specification=OASIS\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu\n\nModify the metadata for participant iso6523-actorid-upis::0777:tt001:oasis: set certificate to empty."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache" id="f04ee9d5-7923-4ab2-b019-e92c95a42759"><con:settings/><con:config><script>// Set correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set Dynamic Discovery path OASIS'].run( testRunner, context );

// Clean the domibus cache
Domibus.clearCache("sender", context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue" id="5931bf8e-6493-4905-8651-663c235bb69d"><con:settings/><con:config><script>// Start blue and green 
Domibus.stopSetMSHs(1,0,0,context,log);
sleep(2000);
// Start blue and green 
Domibus.startSetMSHs(1,0,0,context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="1ee8941a-e8c9-4ee5-8e47-1c0b1b64131a"><con:settings/><con:config><script>// Upload PMode blue and red
Domibus.uploadPmode("sender","special","\\DynamicDiscovery\\C2\\oasis\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("receiver","special","\\DynamicDiscovery\\C3\\oasis\\PMode-domibus-C3DYN.xml",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="29ca7edc-c35e-498e-bdff-3d57d02ea65f"><con:settings/><con:config><script>// Upload truststore for blue and red  
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\DynamicDiscovery\\C3\\oasis\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="cddde57a-182d-49c4-b426-d57389d8cec8"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="400ed5a2-11e4-4297-b38d-3cd47c13ed35" name="Dynamic OASIS"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic OASIS" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6faa3bcb-86e2-48f4-9b6b-4864aa18291e"/><con:assertion type="Not SOAP Fault Assertion" id="8025cbc4-5cb5-4110-9699-cba263f5acc7" name="SOAP Fault"/><con:assertion type="Simple Contains" id="1038c2cb-86e9-4d77-b376-f0298c9f6f7e" name="Contains"><con:configuration><token>Invalid endpoint metadata</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore Metadata" id="0c8760bf-2306-4055-b29d-2397d0f3b38f" disabled="true"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Restore the correct certificate value for participant 0007:9340033829test2."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript/><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4154f327-2bd7-40d0-ac23-a0f7faec814a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f74ad04a-7fc3-45a8-916d-55962c96274b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0fd2fe-9c7a-409f-b236-ddd15cfea5f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>432fbf8a-a023-4499-8e67-9869a593390f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a804deb-fe6b-4f01-bd2c-57e0767c9f2e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2a4989a-9aa7-4326-8abb-f739a200a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9951b4cc-a77e-4fcd-8369-9330fe8bf6de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom142-Push-Dynamic Discovery-OASIS-Certificate-RegularExpression" searchProperties="true" id="b9c25a44-4163-450f-bc69-58b86f55e9cc">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Connect to the open internet" id="2e607c98-334a-46e9-8e64-162f23be527c"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Connect to the open internet."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="f4568832-d03a-461e-b78d-99fca1106e7c"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the OASIS client for dynamic discovery. In the file domibus.properties file add/replace property:\ndomibus.dynamic.discovery.client.specification=OASIS\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu\n\nSet \"domibus.dynamic.discovery.oasisclient.regexCertificateSubjectValidation\" property to ^.*EHEALTH_Wrong_SMP.*\$."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache" id="3e3e541a-ee54-4a7d-9b9f-25fb47b1ca80"><con:settings/><con:config><script>// Set correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set Dynamic Discovery path OASIS'].run( testRunner, context );

// Clean the domibus cache
Domibus.clearCache("sender", context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue" id="1f162023-6668-4ed6-a5b1-2a3f4c06c175"><con:settings/><con:config><script>// Start blue and green 
Domibus.stopSetMSHs(1,0,0,context,log);
sleep(2000);
// Start blue and green 
Domibus.startSetMSHs(1,0,0,context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="df679587-160b-4b43-af01-16d456a5024e"><con:settings/><con:config><script>// Upload PMode blue and red
Domibus.uploadPmode("sender","special","\\DynamicDiscovery\\C2\\oasis\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("receiver","special","\\DynamicDiscovery\\C3\\oasis\\PMode-domibus-C3DYN.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="83bacdce-8108-4887-adde-c2847716893a"><con:settings/><con:config><script>// Upload truststore for blue and red  
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\DynamicDiscovery\\C3\\oasis\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="ecb799be-5b69-4434-ad03-2fc434f0e7b8"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="2c0f575d-b3bf-4704-a9e2-5af558bab053" name="Dynamic OASIS Wrong regular expression"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic OASIS Wrong regular expression" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6faa3bcb-86e2-48f4-9b6b-4864aa18291e"/><con:assertion type="Not SOAP Fault Assertion" id="ada9c3af-c48d-4d4c-9ed7-3bce91d19d83" name="SOAP Fault"/><con:assertion type="Simple Contains" id="cf4d8dbb-c10c-49bf-9840-5d825a6c1420" name="Contains"><con:configuration><token>Could not fetch metadata from SMP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="76117e12-981c-4b76-8cb4-a5d8ec460184"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Modify configuration" id="850d2a88-6a96-474c-b874-eb5ea21eddaf"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set \"domibus.dynamic.discovery.oasisclient.regexCertificateSubjectValidation\" property to ^.*EHEALTH_SMP.*\$."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="delay" name="D3" id="86909ca9-1e95-465b-96b8-0ecf6115d5a5"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="087e98d0-39ce-4031-835a-31a9ffd08322" name="Dynamic OASIS correct regular expression"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic OASIS correct regular expression" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6faa3bcb-86e2-48f4-9b6b-4864aa18291e"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="38c27b97-a076-4cb7-91a6-a68ad470230a"/><con:assertion type="XPath Match" name="XPath Match" id="0f5620ca-b9c0-47b1-98ed-59dcf6b0cf67"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="44992428-0607-4393-a34c-5d2aef51169d"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore path'].run(testRunner, context);</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4154f327-2bd7-40d0-ac23-a0f7faec814a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f74ad04a-7fc3-45a8-916d-55962c96274b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0fd2fe-9c7a-409f-b236-ddd15cfea5f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>432fbf8a-a023-4499-8e67-9869a593390f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a804deb-fe6b-4f01-bd2c-57e0767c9f2e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2a4989a-9aa7-4326-8abb-f739a200a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9951b4cc-a77e-4fcd-8369-9330fe8bf6de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b01a31a1-84d2-4341-933e-4496d3852bee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>caa2183c-0ed7-4ce1-bc74-aeba49c9023e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom143-Push-Dynamic Discovery-OASIS-SMP-TrustByIssuer" searchProperties="true" id="1d75c476-2698-4ed0-9128-b75d12a8edad">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Connect to the open internet" id="73ce5aa4-09c2-4339-b5a6-69c8d5021a11"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Connect to the open internet."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="268ba9a2-7939-4b34-bf85-406244ef69e9"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the OASIS client for dynamic discovery. In the file domibus.properties file add/replace property:\ndomibus.dynamic.discovery.client.specification=OASIS\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu\n\nRemove the trusted certificate of the SMP from the sender's truststore and put its\nissuer certificate."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache" id="7cbd3c36-f293-4430-bdde-2c317eeb40e9"><con:settings/><con:config><script>// Set correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set Dynamic Discovery path OASIS'].run( testRunner, context );

// Clean the domibus cache
Domibus.clearCache("sender", context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue" id="a0aa9e1c-6aee-49f5-b9d3-956f641f9c8c"><con:settings/><con:config><script>// Start blue and green 
Domibus.stopSetMSHs(1,0,0,context,log);
sleep(2000);
// Start blue and green 
Domibus.startSetMSHs(1,0,0,context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="ba6da923-87b9-4123-94f1-4ff8c7cb1a1b"><con:settings/><con:config><script>// Upload PMode blue and red
Domibus.uploadPmode("sender","special","\\DynamicDiscovery\\C2\\oasis\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("receiver","special","\\DynamicDiscovery\\C3\\oasis\\PMode-domibus-C3DYN.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="63cb821b-c6f7-41c1-bb7b-22bdd2313b6b"><con:settings/><con:config><script>// Upload truststore for blue and red  
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore_SMP_Issuer.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\DynamicDiscovery\\C3\\oasis\\gateway_truststore.jks",context,log);
</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="d14ba03d-cf2a-406a-89b4-520442bd1ab5"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="cc288b75-7ae4-4b02-90d6-7ed69df61ef1" name="Dynamic OASIS"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Dynamic OASIS" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="b697a19c-916c-42c2-a27b-82e7da4d3a44"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="ac465df1-a2d7-4d89-aa94-ad09e64ab84d"/><con:assertion type="XPath Match" name="XPath Match" id="3c827bb2-0021-41ef-81f4-1913ea7f2ea2"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b2cdd883-143a-4388-b41c-d80b45045d7f"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore path'].run(testRunner, context);</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4154f327-2bd7-40d0-ac23-a0f7faec814a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f74ad04a-7fc3-45a8-916d-55962c96274b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0fd2fe-9c7a-409f-b236-ddd15cfea5f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>432fbf8a-a023-4499-8e67-9869a593390f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a804deb-fe6b-4f01-bd2c-57e0767c9f2e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2a4989a-9aa7-4326-8abb-f739a200a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9951b4cc-a77e-4fcd-8369-9330fe8bf6de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom144-Push-Dynamic Discovery-OASIS-EDELIVERY-2204-Expired-Revoked" searchProperties="true" id="be880d8c-b4cb-4aed-8559-3eb5770a3532">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Connect to the open internet" id="f1d595dc-0062-45d1-9412-01a6b6fa4a66"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Connect to the open internet."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="99da96fc-5b90-40c8-8a53-e2734c2c5b76"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Apply the configuration to trigger the OASIS client for dynamic discovery. In the file domibus.properties file add/replace property:\ndomibus.dynamic.discovery.client.specification=OASIS\ndomibus.smlzone=ehealth.acc.edelivery.tech.ec.europa.eu"); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Copy crl file" id="710e7002-b0df-4f5d-a549-b07668781750"><con:settings/><con:config><script>def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\oasis\\revoked\\edeliveryDyn.crl";
def dest = "C:\\ec\\domibus\\revoked\\edeliveryDyn.crl"; 
if(!new File("C:\\ec\\domibus\\revoked\\edeliveryDyn.crl").exists()){
	Domibus.copyFile(source,dest,log);
}
else{
	log.info "File already exists."
}



</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore file expired" id="5d533826-bd01-4542-95a2-3a5fac63c091"><con:settings/><con:config><script>// Copy keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\oasis\\expired\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache 1" id="2615cc5e-4647-4082-a304-728c64a8c922"><con:settings/><con:config><script>// Set correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set Dynamic Discovery path OASIS'].run( testRunner, context );

// Clean the domibus cache
Domibus.clearCache("sender", context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue 1" id="34706dab-6e3c-43f1-a2ff-549944a581b9"><con:settings/><con:config><script>// Start blue and green 
Domibus.stopSetMSHs(1,0,0,context,log);
sleep(2000);
// Start blue and green 
Domibus.startSetMSHs(1,0,0,context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes C2-C3" id="0fa668b8-4e29-4f73-a682-67789f47201c"><con:settings/><con:config><script>// Upload PMode blue and red
Domibus.uploadPmode("sender","special","\\DynamicDiscovery\\C2\\oasis\\PMode-domibus-C2DYN.xml",context,log);
Domibus.uploadPmode("receiver","special","\\DynamicDiscovery\\C3\\oasis\\PMode-domibus-C3DYN.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores C2-C3" id="a6df9cc4-7d9f-40e0-aca8-0a0af77f137f"><con:settings/><con:config><script>// Upload truststore blue and red  
Domibus.uploadTruststore("sender","special","\\DynamicDiscovery\\C2\\oasis\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\DynamicDiscovery\\C3\\oasis\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="delay" name="D1" id="7869ec8f-97e4-465d-bed0-a538d60a9c1b"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="d6a8c367-c1cb-474b-87b8-d4227ac31224" name="Submit Message - Expired"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message - Expired" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6faa3bcb-86e2-48f4-9b6b-4864aa18291e"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="38c27b97-a076-4cb7-91a6-a68ad470230a"/><con:assertion type="XPath Match" name="XPath Match" id="0f5620ca-b9c0-47b1-98ed-59dcf6b0cf67"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="44992428-0607-4393-a34c-5d2aef51169d"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy keystore file revoked" id="4732b256-ae21-42df-a905-4cc758f3befc"><con:settings/><con:config><script>// Copy keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\oasis\\revoked\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks";  
Domibus.copyFile(source,dest,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Clean cache 2" id="78038ce0-1d31-477e-9b13-41075134ae69"><con:settings/><con:config><script>// Set correct path
testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-setLocalInstallationsPaths"].testSteps['Set Dynamic Discovery path OASIS'].run( testRunner, context );

// Clean the domibus cache
Domibus.clearCache("sender", context, log);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Blue 2" id="7507332c-b2bb-42a0-95e3-59e2cc9f9fa2"><con:settings/><con:config><script>// Start blue and green 
Domibus.stopSetMSHs(1,0,0,context,log);
sleep(2000);
// Start blue and green 
Domibus.startSetMSHs(1,0,0,context,log);</script></con:config></con:testStep><con:testStep type="request" id="f4414436-9d7b-4571-9a29-d7751618112c" name="Submit Message - Revoked"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message - Revoked" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">senderalias</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="cenbii-procid-ubl">urn:www.cenbii.eu:profile:bii04:ver1.0</ns:Service>
			<ns:Action>busdox-docid-qns::urn:oasis:names:specification:ubl:schema:xsd:Invoice-12::Invoice##urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:#urn:www.peppol.eu:bis:peppol4a:ver1.0::2.0</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient" type="iso6523-actorid-upis">0777:tt001:oasis</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="545e5136-c266-4d47-bf67-c4de01fbc4b4"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="1367d063-18bb-42ab-b548-5b17c7e67f12"/><con:assertion type="XPath Match" name="XPath Match" id="3cca8a62-7c81-421a-86ca-3f41187ebc48"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7ba7b60a-4127-417e-9e1a-6c2f255f67db"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("SEND_FAILURE",null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore keystore file" id="cc02eb7b-8475-4923-ae0a-2f3d8cd2d876" disabled="true"><con:settings/><con:config><script>// Copy keystore 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\DynamicDiscovery\\C2\\oasis\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks";  
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:tearDownScript>testRunner.testCase.testSteps['Restore keystore file'].run(testRunner, context);</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfce5373-6318-43c6-8aab-2792786af2cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>907b56bd-bff4-449d-b84c-8ed82b332327</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fcf1617-5e90-450e-bc0e-c7cd7840450c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cb253836-9800-4570-99b9-82d1d6e205c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29296f70-95d5-4801-afcb-02cc210759bd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0de97f3-e5ea-49e6-aa49-428b5af762d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b00c2e52-9cd7-4178-b65b-c16eac472360</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaa94670-f16f-4478-9858-ac876d84d50f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>176fd0a4-f682-442c-8e8b-d2262abb2b7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bac416f9-9709-43d2-aed3-31c6fcff7d80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4b16c89-b64f-40c2-8ea4-22d9d2f0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbc83d61-ebfe-41ce-8695-aaf17c12ee2a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4154f327-2bd7-40d0-ac23-a0f7faec814a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f74ad04a-7fc3-45a8-916d-55962c96274b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be0fd2fe-9c7a-409f-b236-ddd15cfea5f9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>432fbf8a-a023-4499-8e67-9869a593390f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a804deb-fe6b-4f01-bd2c-57e0767c9f2e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2a4989a-9aa7-4326-8abb-f739a200a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9951b4cc-a77e-4fcd-8369-9330fe8bf6de</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom161-Push-Dynamic Discovery-EDELIVERY-2610- JTA transaction unexpectedly rolled back" searchProperties="true" id="50dad465-bac3-43a3-b502-4d852bdc4bc1" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Set PMode provider" id="a65082f7-a6f3-4386-82de-fb2a984e634a"><con:settings/><con:config><script>def propValueDict = ["domibus.dynamicdiscovery.useDynamicDiscovery" : "true"];
Domibus.changeDomibusProperties("BLUE", propValueDict,  log, context, testRunner);</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Domibus Sender" id="358741a5-001b-4179-8566-2343f40f5195"><con:settings/><con:config><script>// Stop
Domibus.stopSetMSHs(1,0,0,context,log);

// Start
Domibus.startSetMSHs(1,0,0,context,log);

log.info "--DONE--";</script></con:config></con:testStep><con:testStep type="request" id="fe6e8684-bb0c-49ac-ad40-7abbd2066e9b" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="Not SOAP Fault Assertion" id="6837e90b-ba69-48d9-9a70-4df797cf4c21" name="SOAP Fault"/><con:assertion type="Simple NotContains" id="7ec04256-88b2-4c36-a75e-da1957492954" name="Not Contains"><con:configuration><token>JTA transaction</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8cd9f8e8-f3a9-420c-a4df-d6158c042ee4" name="Contains"><con:configuration><token>No matching dynamic discovery processes found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore PMode Provider" id="b4d0df89-6aaf-4518-92f4-b945b4ab91e8"><con:settings/><con:config><script>Domibus.restoreDomibusPropertiesFromBackup("BLUE",  log, context, testRunner);
</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/></con:testSuite><con:testSuite id="ebd59a76-882d-4f22-ba5c-fcadbf2faf3a" name="TAXUD"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="821da328-65b7-4c0c-baec-e1a71b2b5635" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Main Configuration" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="60a5a87e-0c44-40e1-bbe0-20d2425108c3"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Set the properties (on C3): \n- \"domibus.extension.iam.authentication.identifier\" to \"DSS_AUTHENTICATION_SPI\".\n- \"domibus.extension.iam.authorization.identifier\" to \"UUMDS_AUTHORIZATION_SPI\".\n- \"domibus.sender.trust.validation.onreceiving\" to \"false\"."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Set new Domibus paths (if needed)" id="31466a21-b02d-4212-9e34-9b4a1c4a37ce"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/tpap/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/tapas/domibus/");

log.info "UPDATE DONE.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set new DB config" id="c66af1f5-44a6-46ce-ab2b-204dae9f56f4"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-localhost-tomcat-tomcat"].testSteps['Set custom properties-Default-Default-taxud-Main Branch'].run( testRunner, context );</script></con:config></con:testStep><con:testStep type="groovy" name="Copy keystores files" id="b415e099-4a9d-4e44-9d3f-9383cfa688b6"><con:settings/><con:config><script>// Copy keystore blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\taxud\\standard\\C2\\gateway_keystore.jks";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);

// Copy keystore red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\taxud\\standard\\C3\\gateway_keystore.jks";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\keystores\\gateway_keystore.jks"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Copy Policy files" id="375ed4fa-9ad8-4a03-b6e8-a37a0c86ce0f"><con:settings/><con:config><script>// Copy policy blue 
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\taxud\\standard\\C2\\eDeliveryAS4Policy_BST_PKIP_signOnly.xml";
def dest = context.expand('${#Project#pathBlue}') +"conf\\domibus\\policies\\eDeliveryAS4Policy_BST_PKIP_signOnly.xml"; 
Domibus.copyFile(source,dest,log);

// Copy policy red 
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\taxud\\standard\\C3\\eDeliveryAS4Policy_BST_PKIP_signOnly.xml";
dest = context.expand('${#Project#pathRed}') +"conf\\domibus\\policies\\eDeliveryAS4Policy_BST_PKIP_signOnly.xml"; 
Domibus.copyFile(source,dest,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="fa659057-433b-4e55-85e7-6537a51a85a8"><con:settings/><con:config><script>// Stop sender and receiver
//Domibus.stopSetMSHs(1,1,0,context,log);
// Start sender and receiver
//Domibus.startSetMSHs(1,1,0,context,log);

log.info "--SENDER AND RECEIVER RESTART DONE--";
</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filters to WS" id="7e5c453d-29d0-4432-9e36-f8b9354328e6"><con:settings/><con:config><script>Domibus.setMessageFilters("sender","backendWebservice",context,log);
Domibus.setMessageFilters("receiver","backendWebservice",context,log);


</script></con:config></con:testStep><con:testStep type="groovy" name="Restore Domibus paths (if needed)" id="e0c59644-59a3-43d4-96ca-40728a1da584" disabled="true"><con:settings/><con:config><script>
testRunner.testCase.testSuite.project.setPropertyValue("pathBlue", "C:/domibus/sender/domibus/");
testRunner.testCase.testSuite.project.setPropertyValue("pathRed", "C:/domibus/receiver/domibus/");

log.info "UPDATE DONE.";
</script></con:config></con:testStep><con:testStep type="groovy" name="Restore DB config" id="b73241a9-989a-483b-8a4c-b3cf4406673a" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.getTestSuiteByName("Administration").testCases["Configuration-localhost-tomcat-tomcat"].testSteps['Set custom properties-Default-Default-Main Branch'].run( testRunner, context );</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TAXUD_TC01-Basic Flow-Push" searchProperties="true" id="9064e7ea-56b1-4dc5-9740-289921e15b2f" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS" id="5604d893-389f-410e-93cd-dfcab790bb2a"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\standard\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\standard\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores-TPAP-TAPAS" id="2810bca8-8518-421c-89b5-0513d840357f"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\taxud\\standard\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\taxud\\standard\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="2d13ae4d-e67b-45ee-b1f5-8b3175b89203" name="Standard push"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard push" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE1234567890</ns:PartyId>
                  <ns:Role>Trader</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_t2c</ns:Service>\r
               <ns:Action>IE3F10</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" id="a21e1a62-218f-44e3-9c5b-e37733ad4f58" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TAXUD_TC02-Basic Flow-Pull" searchProperties="true" id="3bce0803-516f-420a-bda4-8b913b6e0c2b" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS" id="61762eff-e0e8-4f19-ad21-71f7df231194"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\standard\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\standard\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload truststores-TPAP-TAPAS" id="b627d62b-d3de-4373-90fb-5c0900f6a26e"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\taxud\\standard\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\taxud\\standard\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="request" id="30fc343e-96e7-4443-a3aa-e44a4b935765" name="Standard pull"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard pull" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage  mpc="urn:fdc:ec.europa.eu:2019:eu_ics2_c2t/EORI/BE1234567890">
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>
                  <ns:Role>Customs</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE1234567890</ns:PartyId>
                  <ns:Role>Trader</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service>eu_ics2_c2t</ns:Service>
               <ns:Action>IE3R01</ns:Action>
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" id="26f7f649-ad79-417a-80e8-94dcdf33a1f1" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TAXUD_TC14-Authorization request timeout-Push" searchProperties="true" id="c034f142-6869-4215-9419-1d4ed67e3138" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload truststores-TPAP-TAPAS" id="a22b23fd-01e1-42e0-88d5-138d75cc7fb0"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\taxud\\unreachable\\http404\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\taxud\\unreachable\\http404\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS-404" id="46c1a1a6-2810-459d-a067-00c619fe8a07"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\unreachable\\http404\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\unreachable\\http404\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="8de6df8b-b185-4542-9423-7f9cbbdd8d5b" name="Standard push - 404"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard push - 404" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE404_NOT_FOUND</ns:PartyId>
                  <ns:Role>Trader</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_t2c</ns:Service>\r
               <ns:Action>IE3F10</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" id="0b5ca103-45c7-483d-8a6d-eeac53cfad52" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the logs 404" id="e763ca11-d80f-4ae2-b362-6bc426f5692a"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check in C3 logs that exception \"eu.domibus.common.exception.EbMS3Exception: A0003:Technical issue\" is present."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS-403" id="558d23fc-b9e1-4618-ac94-3fc294ae1a75"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\unreachable\\http403\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\unreachable\\http403\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="f718df76-5202-4189-994f-655427faf741" name="Standard push - 403"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard push - 403" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE403</ns:PartyId>
                  <ns:Role>Trader</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_t2c</ns:Service>\r
               <ns:Action>IE3F10</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" id="0471339c-60f3-4508-81f7-2e262e622aff" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the logs 403" id="2501770d-6e29-463e-96b2-63b8d7a71807"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check in C3 logs that exception \"eu.domibus.common.exception.EbMS3Exception: A0002:Technical issue\" is present."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TAXUD_TC15-Authorization request timeout-Pull" searchProperties="true" id="03ce8af0-e915-43f9-bbaf-bfd37b082953" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload truststores-TPAP-TAPAS" id="ac07ff83-80cd-456c-9060-f069cb759de5"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\taxud\\unreachable\\http404\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\taxud\\unreachable\\http404\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS-404" id="b354f721-3069-423e-96f4-7f677bc4d82d"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\unreachable\\http404\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\unreachable\\http404\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="e0dd8530-2f55-462d-a637-e52d4e83d22e" name="Standard pull - 404"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard pull - 404" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage  mpc="urn:fdc:ec.europa.eu:2019:eu_ics2_c2t/EORI/BE404_NOT_FOUND">
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>
                  <ns:Role>Customs</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE404_NOT_FOUND</ns:PartyId>
                  <ns:Role>Trader</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service>eu_ics2_c2t</ns:Service>
               <ns:Action>IE3R01</ns:Action>
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Checks 404" id="47a6b800-1b8e-4b02-9fcc-39e6c559498a"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"- Check in C3 logs that exception \"eu.domibus.common.exception.EbMS3Exception: A0003:Technical issue\" is present.\n- Check that the messge is not pulled."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS-403" id="6433c68e-a43a-4717-a490-5322c1d0474f"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\unreachable\\http403\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\unreachable\\http403\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="97bb6bf1-47a0-477e-bc65-5b4f31ea687c" name="Standard pull - 403"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard pull - 403" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage  mpc="urn:fdc:ec.europa.eu:2019:eu_ics2_c2t/EORI/BE1234567890">
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>
                  <ns:Role>Customs</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE1234567890</ns:PartyId>
                  <ns:Role>Trader</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service>eu_ics2_c2t</ns:Service>
               <ns:Action>IE3R01</ns:Action>
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Checks 403" id="71d8e93b-3e3d-4adb-86d0-3c307d08768e"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"- Check in C3 logs that exception \"eu.domibus.common.exception.EbMS3Exception: A0002:Technical issue\" is present.\n- Check that the messge is not pulled."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TAXUD_TC16Authorization request declined-Push" searchProperties="true" id="85981f01-5964-4d49-8103-8d4542684ccb" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload truststores-TPAP-TAPAS" id="153ee71f-7704-4cdf-9a31-a5b6723a95fa"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\taxud\\unauthorized\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\taxud\\unauthorized\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS-404" id="a0f687f7-e433-419f-97ea-36216a181d21"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\unauthorized\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\unauthorized\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="efbae23a-20a3-4e24-9b9c-d4fff9600e56" name="Standard push - 404"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard push - 404" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE404_NOT_AUTHORIZED</ns:PartyId>
                  <ns:Role>Trader</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>\r
                  <ns:Role>Customs</ns:Role>
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service>eu_ics2_t2c</ns:Service>\r
               <ns:Action>IE3F10</ns:Action>\r
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="GroovyScriptAssertion" id="0b5ca103-45c7-483d-8a6d-eeac53cfad52" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("WAITING_FOR_RETRY","");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Check the logs 404" id="40a338f1-6dbb-4130-ab0b-398c97f817d3"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"Check in C3 logs that exception \"eu.domibus.common.exception.EbMS3Exception: A0001:Authorization to access the targeted application refused to sender\" is present."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TAXUD_TC17Authorization request declined-Pull" searchProperties="true" id="5f92872e-46f0-44c9-9d13-dbf2a27a49c3" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Upload truststores-TPAP-TAPAS" id="c18eb54f-5ce3-47b1-94ac-afa4d8d61a7a"><con:settings/><con:config><script>// Upload truststores: default truststores (blue for sender and red for receiver)  
Domibus.uploadTruststore("sender","special","\\taxud\\unauthorized\\C2\\gateway_truststore.jks",context,log);
Domibus.uploadTruststore("receiver","special","\\taxud\\unauthorized\\C3\\gateway_truststore.jks",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes-TPAP-TAPAS-404" id="7074d2f8-77bd-4b29-8ce9-f7e9ad3691be"><con:settings/><con:config><script>// Upload PModes: default Pmodes (blue for sender and red for receiver)  
Domibus.uploadPmode("sender","special","\\taxud\\unauthorized\\C2\\domibus-pmode-blue.xml",context,log);
Domibus.uploadPmode("receiver","special","\\taxud\\unauthorized\\C3\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="request" id="cf0b24f8-971d-49b8-a8b0-677708daff30" name="Standard pull - 404"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Standard pull - 404" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage  mpc="urn:fdc:ec.europa.eu:2019:eu_ics2_c2t/EORI/BE404_NOT_AUTHORIZED">
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:authority">sti-taxud</ns:PartyId>
                  <ns:Role>Customs</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered:eu-customs:EORI">BE404_NOT_AUTHORIZED</ns:PartyId>
                  <ns:Role>Trader</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service>eu_ics2_c2t</ns:Service>
               <ns:Action>IE3R01</ns:Action>
               <ns:AgreementRef>EU-ICS2-TI-V1.0</ns:AgreementRef>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Checks 404" id="be1ef42c-b024-4e2b-9aa0-179d3fb3b52b"><con:settings/><con:config><script>def result=javax.swing.JOptionPane.showConfirmDialog( null,"- Check in C3 logs that exception \"eu.domibus.common.exception.EbMS3Exception: A0001:Authorization to access the targeted application refused to sender\" is present.\n- Check that the messge is not pulled."); 
if(result == javax.swing.JOptionPane.YES_OPTION)
{
	log.info "continuing the test";
}
else if(result == javax.swing.JOptionPane.NO_OPTION)
{
	log.info "script aborted";
	testRunner.fail("Test aborted by user");
}</script></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/></con:testSuite><con:testSuite id="a57251f7-c5b7-43e7-939f-97c42e6b34d8" name="ToBeAdded"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomYYY-PushAndPull-Submit Message-Basic Flow" searchProperties="true" id="b01ee3e5-fa53-4b83-8893-9ddd3ea03b0a" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="e7b231b7-84f1-4d6e-b6b6-77af92b7c0a1" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>adminC2Default</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="662e77d7-40d1-4dbc-9cc3-9695bc8ee6c2" name="Copy of Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Copy of Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="tc1">bdx:noprocess</ns:Service>\r
               <ns:Action>TC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC1Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e552def6-8421-4f5c-8bec-fdf930597592" name="Pull Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Pull Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="pullTc1">bdx:noprocess</ns:Service>\r
               <ns:Action>pullTC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="a60249ca-68fd-471c-9cf8-3c5388c5b8b3" name="Copy of Pull Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Copy of Pull Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>\r
      <ns:Messaging>\r
         <ns:UserMessage>\r
             <ns:MessageInfo>
            	<ns:MessageId>-Dom014-</ns:MessageId>
            	<ns:RefToMessageId>-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>\r
               <ns:From>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>\r
               </ns:From>\r
               <ns:To>\r
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>\r
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>\r
               </ns:To>\r
            </ns:PartyInfo>\r
            <ns:CollaborationInfo>\r
               <ns:Service type="pullTc1">bdx:noprocess</ns:Service>\r
               <ns:Action>pullTC1Leg1</ns:Action>\r
            </ns:CollaborationInfo>\r
            <ns:MessageProperties>\r
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>\r
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>\r
            </ns:MessageProperties>\r
            <ns:PayloadInfo>\r
               <ns:PartInfo href="cid:message">\r
                  <ns:PartProperties>\r
                     <ns:Property name="MimeType">text/xml</ns:Property>\r
                  </ns:PartProperties>\r
               </ns:PartInfo>\r
            </ns:PayloadInfo>\r
         </ns:UserMessage>\r
      </ns:Messaging>\r
   </soap:Header>\r
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("RECEIVED","ACKNOWLEDGED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>${#Project#adminC4Default}</con:username><con:password>${#Project#adminDefaultPassword}</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/></con:testSuite><con:testSuite id="b335aff6-a14a-4a2a-b032-32595e816fb1" name="EDELIVERY-1383 - Param not exist in PMode" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom021-Push-Submit message-Exceptional flow-Data-From/Role-Existence" searchProperties="true" id="e25394f4-fd28-47dc-88ed-2fc734b7f789">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="01f72d7c-d841-4997-a7da-feae24efa7eb" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom021-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/watcher</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="9287fe4c-8a74-4f71-8224-76fa787fd4ba"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="87947c2c-1c4e-40b6-bb6f-f5b865074f8c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom021-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="281bc8d9-8e6f-48a8-8d66-348db0573163"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="b7ee092d-1969-4f92-b966-0369946dc348"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom021-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom036-Push-Submit message-Exceptional flow-Data-To/Role-Existence" searchProperties="true" id="5ec3a141-5465-4527-901b-c19917c9efe4">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="712ba19e-c71d-4879-91d0-968c43f7fce7" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom036-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/watcher</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c357bb77-aa55-4e88-8f90-e5c93f42cc2e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="83303a66-a4ae-4949-9d44-589ba3d7437d"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom036-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="2ac01a2c-89ac-44db-938e-33a3202bdb42"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="b42fa0af-87a9-40fe-b357-d4e2a885127a"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom036-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom321-Pull-Submit message-Exceptional flow-Data-From/Role-Existence" searchProperties="true" id="b504f395-b2bc-4bd3-a49e-9cf6be113683">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="7c8e2c13-57a2-42df-b1d7-6cbd210b138d" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom321-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/watcher</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3f6de33d-0d95-4583-80c8-84e31f9b88b9"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ddbfa979-4764-4700-b11f-839e1f9a255a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom321-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="72f350d3-29e0-4f8b-a10e-5652efa9240f"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="23ff2981-02de-4a40-99a6-1c5c09383eeb"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom336-Pull-Submit message-Exceptional flow-Data-To/Role-Existence" searchProperties="true" id="b068e0cd-70ad-41fd-87ac-516f2984ee34">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="d59090ac-e832-46e7-937f-62481048f5c5" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom336-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/watcher</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3f6de33d-0d95-4583-80c8-84e31f9b88b9"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ddbfa979-4764-4700-b11f-839e1f9a255a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom336-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="72f350d3-29e0-4f8b-a10e-5652efa9240f"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="23ff2981-02de-4a40-99a6-1c5c09383eeb"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom336-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="93eef7e0-8a0a-4bba-90d6-4c98771adb3c" name="EDELIVERY-1357 - Orignal Sender occurence" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom063-Push-Submit message-Exceptional flow-Data-Original Sender-Occurrence" searchProperties="true" id="8a5c03eb-080e-46dd-b6d0-c4651f2fcd3f">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="3ff0929f-9b0e-4d30-adbe-dea8fff56c29" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom063-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="5feefecb-7820-4993-bccc-2e823bf6f228"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="8aeb0f54-226a-42ce-a7f9-c4f2b24ff51e"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom063-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="f83dbdfb-c051-41f1-85e7-61138e78f223"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4ac74b8a-aa3d-4d8a-b7c0-06e2fd65e349"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom063-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom363-Pull-Submit message-Exceptional flow-Data-Original Sender-Occurrence" searchProperties="true" id="ee9f9a3f-ae18-42cc-8d71-964a5347ba5b">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="4e8941d9-6338-4caf-812e-e096f2141537" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom363-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="634877ef-70a5-40ee-a056-9bd408787af8"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="003d308f-aad3-48ae-bf4d-338e1428bb3e"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom363-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="ed040132-8064-4e1a-b165-63da17b77c93"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0758e3c3-c27c-4b19-b562-fde72436a727"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="34a2889d-67cc-4d18-8368-302ca7cc5485" name="EDELIVERY-1523 - Occurence Issue" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom007-Push-Submit Message-Exceptional flow-Data-TimeStamp-Occurrence" searchProperties="true" id="11a8e685-a2d7-4fb2-aee0-c2a11174e389">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="9f44efb4-e62c-468d-acdb-896006d7e8e5" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom007-</ns:MessageId>
               <ns:Timestamp>2016-03-11</ns:Timestamp>
               <ns:Timestamp>2016-03-11</ns:Timestamp>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4c72567e-770f-48fe-8b57-2f5a1b8a580c"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="8ace43d9-137c-4efc-aa7b-fb6ce7b3464d"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom007-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="7d3bf7aa-e0ed-425f-8f2f-e8288ac160c0"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4942008a-74e3-4c9f-aba5-6edbf072e024"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom007-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom009-Push-Submit Message-Exceptional flow-Data-Message ID-Occurrence" searchProperties="true" id="9ba78578-6b9a-4b4e-903a-7354519c22d3">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="aaceb507-f43e-487c-9061-ebdb00a86010" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom009-</ns:MessageId>
            	<ns:MessageId>-Dom009-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="87e5ff50-c84a-4156-adc1-89b58497a612"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="e44f5e41-58fd-44a4-ba17-a776f0e4d33d"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom009-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="a0bf768a-eb33-4793-ba7b-68ed34ddae0c"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="fd4f75fd-a5a8-4efb-a5c1-55209219658f"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom009-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom013-Push-Submit message-Exceptional flow-Data-RefToMessageId-Occurrence" searchProperties="true" id="cf5fd97a-3fdb-481b-81b9-6ac579d76a5e">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="9a3898d5-4a2b-4ebc-be0b-27163b60935f" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom013-</ns:MessageId>
            	<ns:RefToMessageId>12346789</ns:RefToMessageId>
            	<ns:RefToMessageId>12346789</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="84140656-4d9c-4e3f-b1b7-e9a2922c8ea1"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7d6455ca-6d02-455a-a3a6-760c2d268b9b"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom013-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="e9aa0f9d-c84c-40af-813a-59f8feea0a21"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="2b8debb1-f53f-4389-99bd-690ae3f8b18a"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom013-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom017-Push-Submit message-Exceptional flow-Data-From/PartyId-Occurrence" searchProperties="true" id="951a148b-71e5-4eea-b262-a3028bebac9c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="99e706e9-4f90-4aec-b08f-7f638f6ffea8" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom017-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6e2bcb20-56b4-4572-9fb0-e448702ab59e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1a51b6e6-dc06-40b2-a6b9-92a762690abd"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom017-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="0e7319e2-997b-4c3c-8297-bd661e1d2811"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="e1f61cf9-0680-4829-a8e2-fc18cc929596"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom017-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom022-Push-Submit message-Exceptional flow-Data-From/Role-Occurrence" searchProperties="true" id="4372ce06-f867-4276-91b5-7a5f4f67bda6">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="99a71886-2207-43ed-b5a8-45ab5b084a3e" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom022-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="25f4d299-cb3f-4ab4-b637-17bfd97e200b"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="11b57079-66e8-4478-869e-d9ad6120c46c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom022-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="48ddde5d-9802-4df4-8fea-e1bde742e926"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="108f0e2e-c510-4fcb-80e6-83d282ed1881"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom022-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom032-Push-Submit message-Exceptional flow-Data-To/PartyId-Occurrence" searchProperties="true" id="bba47045-bf14-4bb5-a80e-6d045337f161">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="4ba14edc-74ab-47b5-ae44-b6c8b0f0d0bc" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom032-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="1b6cca38-f161-4518-9d3c-e3846540307b"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f818aac5-cbb0-4b4d-b16c-e09b1ffef158"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom032-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="1a8a50ee-708e-48be-8da9-260f23865643"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0b720317-6f6c-4b22-a43c-59ebae84885d"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom032-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom037-Push-Submit message-Exceptional flow-Data-To/Role-Occurrence" searchProperties="true" id="08286216-bc79-4068-9351-9c0c7529563c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="57fb598d-2a99-4143-a5f7-d1d022c47f73" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom037-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="df2f93b9-0a7c-4bee-be3d-12fa6bef067a"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a7b156ae-fa38-4071-868d-fc215d1efa3f"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom037-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="7ad7d150-5809-44ef-ac78-61957ecaf1e1"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="b0a23610-458e-4842-a4a8-485f6eef3d1e"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom037-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom048-Push-Submit message-Exceptional flow-Data-AgreementRefId-Occurence" searchProperties="true" id="56dd7907-0660-426e-92fa-7e6fb063070c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="74085cb4-7226-49a1-8618-1801b4ce1943" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom048-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef></ns:AgreementRef>
               <ns:AgreementRef></ns:AgreementRef>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4b93dca6-5e7e-4feb-8aa9-026f9ace974e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ddc5510b-9de3-4950-8857-46f4eb6ff7e0"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom048-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="fed853cd-008d-49d9-bace-07df17acbcbf"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="5e520f4c-4b0c-4342-85c3-0be27807886a"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom048-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom050-Push-Submit message-Exceptional flow-Data-Service-Occurrence" searchProperties="true" id="115f16fc-3e7f-4469-a53a-0ed15856023e">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="c3cc0d98-cb08-4604-8b51-4e68f3bbb678" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom050-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6b583a81-1f4b-4c1c-9bcb-392a1db34d47"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b49b409a-73f3-4d2d-a03d-69f8e9239892"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom050-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="f8e4ec66-29d8-44d6-9773-4885d7c1e529"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="b6fe6cbb-5461-4d84-992d-1e94380995d9"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom050-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom055-Push-Submit message-Exceptional flow-Data-Action-Occurrence" searchProperties="true" id="1213b09b-62b0-48ce-b43b-ca26e1710cc1">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="6aaa674a-711f-4eb2-8267-5435ff384a8e" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom055-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="35ae1c28-3154-4361-a41e-c02763dea99f"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6fc73c34-a7e2-485f-af3f-364ff6e95b62"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom055-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="94b24383-4353-4d36-95ef-cd63ad6444ae"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0518c1e8-b20a-421d-a79d-9aeabafa7135"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom055-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom061-Push-Submit message-Exceptional flow-Data-ConversationId-Occurence" searchProperties="true" id="a32db901-0340-4525-8393-75064db1f6a0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="08131e7b-0480-44db-a629-8ac1b8f909ba" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom061-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
               <ns:ConversationId>-ConversationId-Dom061-</ns:ConversationId>
               <ns:ConversationId>-ConversationId-Dom061-</ns:ConversationId>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="9e9c4202-0922-447c-bec2-ea7accbcc204"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="be3c7ee9-b02c-44b4-9451-9f3d495b039b"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom061-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="6001e089-fd1e-438c-a813-ecb9102f46f0"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="7d6093ab-4ade-45a6-ac2e-ae5578118946"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom061-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom069-Push-Submit message-Exceptional flow-Data-Final Receiver-Occurrence" searchProperties="true" id="1ce3c4de-8d49-4561-8e85-22d9828a35ca">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="b6c4c18f-e2c3-4250-b2c8-67d33accf846" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom069-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="a744e744-8dda-44ba-b22a-0d16aa5b3710"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="f8738979-d529-4cd2-99c4-216d2660e796"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom069-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="add5350b-1a3f-4eac-b765-faea41149ab4"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="e6335664-064c-43df-9a97-2a01b2c016df"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom069-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom307-Pull-Submit Message-Exceptional flow-Data-TimeStamp-Occurrence" searchProperties="true" id="9d883b77-237e-4c77-af72-b9630d888a29">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="126b5499-9051-41dc-ba9a-85c99fc3fc8c" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom307-</ns:MessageId>
               <ns:Timestamp>2016-03-11</ns:Timestamp>
               <ns:Timestamp>2016-03-11</ns:Timestamp>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6b7b5f86-452e-4d0c-89bf-c9d07bb0afba"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="1146b7b1-c819-45b0-9c71-eb6c55418679"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom307-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="a870c4d3-1dca-4869-82d5-149c3f2fbb71"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="ab319b92-e6e4-43b1-adb1-991435264d9b"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom309-Pull-Submit Message-Exceptional flow-Data-Message ID-Occurrence" searchProperties="true" id="d8e871c5-6116-4ac4-a935-b9f98d0595ee">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="b967844e-51b9-49ab-82a7-c5e9f850098a" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom309-</ns:MessageId>
            	<ns:MessageId>-Dom309-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="dac9c202-ed7d-4351-8aeb-b9967e2ac6a1"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="d9e11ff7-f6a3-4ea3-8d2a-2544ca719c30"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom309-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="f66aa0c2-49b6-4860-8f23-39d4b1dd5d26"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="2512cfa4-caf7-4dcd-91d9-66e8845a256a"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom313-Pull-Submit message-Exceptional flow-Data-RefToMessageId-Occurrence" searchProperties="true" id="09bcff03-042e-45ed-905d-498e57377156">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="03a7a015-c514-4650-991a-cdea2bf417cd" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom313-</ns:MessageId>
            	<ns:RefToMessageId>12346789</ns:RefToMessageId>
            	<ns:RefToMessageId>12346789</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="593184b5-acfc-45c3-921d-aac3061c0fe2"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="37f68ffc-5eb2-4097-9925-70b66e885944"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom313-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="9c165123-1223-4f91-b4e1-6a140f4616cf"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="e35aa52e-a086-46d8-9d79-90bb267ec5d4"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom317-Pull-Submit message-Exceptional flow-Data-From/PartyId-Occurrence" searchProperties="true" id="a44c6294-f4ff-48cc-828e-490475249ba9">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="100772a3-b7de-496e-b749-b06d4b00b8f6" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom317-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="dd0eb021-d365-44de-b042-1e2999e8a0bc"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="19b4ebb7-41db-41f3-b003-ba13f38bc517"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom317-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="d492adff-bc37-4f04-86eb-cc9915beebdf"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="951355a2-427a-4568-a2e1-d80f3f67d408"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom322-Pull-Submit message-Exceptional flow-Data-From/Role-Occurrence" searchProperties="true" id="b13c7724-5d88-4186-bb30-e74fc6fd3bee">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="0c66535d-0f39-45b5-9eb5-9acfa60c4d7e" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom322-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="392f3c8f-9def-484b-bd43-9ad4f5a13244"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="07f6cb1b-9f14-464d-864b-206f8a406156"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom322-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="8c185e94-7d17-4762-b64b-9d2c7c6df280"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="e6b78e3a-2b52-4722-b823-a5cd26a8f9f4"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom332-Pull-Submit message-Exceptional flow-Data-To/PartyId-Occurrence" searchProperties="true" id="e3308b69-0333-4590-9efa-a6e6fec2c8a6">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="c5e59e87-b054-4871-9850-d6b83957e967" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom332-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ab5618cd-5a85-416b-8677-8e41ecef7350"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="30897d25-4fe7-4084-9bd8-f079f1a59561"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom332-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="eea1ab0a-ea7d-4946-bc51-d6b1ab7dfb09"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0537f1e3-944e-40b1-bfea-8776e88b40ea"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom337-Pull-Submit message-Exceptional flow-Data-To/Role-Occurrence" searchProperties="true" id="8f29fc13-9967-4834-8569-dab521328079">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="eb833a6f-2e09-4894-aec4-67f16b0b4150" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom337-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="09c99b23-e332-4b00-a239-1d9fb9fea50c"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="85fadf4a-7fa8-4804-b641-ac371a08ee30"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom337-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="0f36e907-5a78-44b1-998f-ca6d9ee10b55"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="8feb6659-8232-41c7-866e-5e418cefdbcd"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom348-Pull-Submit message-Exceptional flow-Data-AgreementRefId-Occurence" searchProperties="true" id="99fbac15-a072-422d-b95b-32d14f67f81d">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="4d171c7e-b2af-4561-9d86-0c523996fcb3" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom348-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef></ns:AgreementRef>
               <ns:AgreementRef></ns:AgreementRef>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="9e0e3213-eeda-45bc-a9a2-2a63248624b6"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="c8beb0d3-a7f6-4091-9d7f-0c9ef82df207"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom348-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="9606f87d-4908-4be4-8d69-5002b59b9d37"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="2c22c1a2-a0fb-4463-8a11-45345870d1db"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom350-Pull-Submit message-Exceptional flow-Data-Service-Occurrence" searchProperties="true" id="1c459d0c-a4d7-42e6-9d47-9fe1f61c49d2">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="aa1060fe-b4cc-4d06-91e3-da3b0137edb5" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom350-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="39c75df2-c846-4753-b76d-7e15599e89eb"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="cac27962-d17f-40bf-8dda-ec91562b1463"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom350-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="713c1a7d-18e2-42cd-bdf4-77812fd16ddc"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0cdfbba1-10c8-434f-afeb-7f9635526e19"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom355-Pull-Submit message-Exceptional flow-Data-Action-Occurrence" searchProperties="true" id="b8a36849-1b77-4f17-b2c6-80ee3a5ce971">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="f2588c22-2e6b-4c1a-9be7-0ce90f3db0c3" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom355-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d38ab044-7593-4fb2-977d-01a6795f8c61"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="9529297f-6987-4749-a218-c643465efdad"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom355-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="fd2d8ac0-d682-4883-bf38-02ea7321eb1c"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0febdc9a-1ffc-4e30-b7aa-060e5d101f62"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom361-Pull-Submit message-Exceptional flow-Data-ConversationId-Occurence" searchProperties="true" id="703c6c55-3c21-40cd-825c-d1cbacad7a1a">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="f9e91ece-824b-4248-9f42-23144bedc0a6" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom361-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
               <ns:ConversationId>-ConversationId-Dom061-</ns:ConversationId>
               <ns:ConversationId>-ConversationId-Dom061-</ns:ConversationId>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="73a21b8b-2672-410b-bedb-bcf3597a0bd0"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="4820271a-5e54-41ef-a344-5a2a1d4f82e5"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom361-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="16ac3ff0-67dc-402a-a3c1-6f8d7f32531c"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="1adc55bb-cbc1-4309-a73c-cc8bc3b68477"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom369-Pull-Submit message-Exceptional flow-Data-Final Receiver-Occurrence" searchProperties="true" id="5eea1f40-a5da-40a2-930a-a5ef72f822f2">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="68d696a7-53d5-4982-b83c-227fea24c343" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom369-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="9def17e3-ef33-4a69-97b7-59a19e46207e"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6ada8a6e-0ccc-4c67-a5ea-5ba21d37629b"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom369-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="c6ad49e2-56d2-4ca9-81bb-d55e738f05d7"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="58ccfaa5-a7ec-437b-a4a8-b09f6f259b24"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="6e669474-0436-49ea-a685-c6b3b243fe03" name="EDELIVERY-1525 - Not present PartyId" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom018-Push-Submit message-Exceptional flow-Data-From/PartyId-Not present" searchProperties="true" id="91d9c607-d11e-4ee6-a7d9-3eeca0b0be56">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="009a7adb-fcd5-47ea-a2da-217901e60ca3" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom018-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d27dcc94-1172-4e65-8162-3fa600483e8a"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ad78918a-0189-4f9b-b947-f770636cee48"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom018-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="68a7e487-4f90-4dc8-9fc2-1b3a5aae77db"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="34cb9e2b-332f-43cb-8eb5-a6924ff481f8"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="8d085fef-7185-4222-a66e-ddabc3b4f41c"><con:configuration><token>No matching party found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom018-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom033-Push-Submit message-Exceptional flow-Data-To/PartyId-Not present" searchProperties="true" id="c962723a-f718-4912-9e93-92206e9303b4">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="d4eb6f3b-eaea-45b6-8c81-83a3630047a2" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom033-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="843cb6a0-aca8-4d9e-8889-0bbb68f30061"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7c0abf41-c523-40df-a83d-9d424a252764"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom033-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="018e339c-6b00-425f-ab6f-1e93c0d60149"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="9f7d2a24-11fe-4148-afa6-7bdbd289ff4f"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="b0c1ee7e-dba9-4659-a39f-fd62a1c2ce32"><con:configuration><token>No matching party found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom033-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom318-Pull-Submit message-Exceptional flow-Data-From/PartyId-Not present" searchProperties="true" id="74a44fc5-1a98-45c0-8e65-9b888b298c13">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="d2c0050e-7141-4a0b-93a2-75e985670985" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom318-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="71e7079b-8d8f-441a-b777-62496d190fad"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="74010f53-80a1-46de-9556-1174aa7ada82"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom318-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="ba894472-6414-4121-8f87-8a726328f55c"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="aa574e62-6d7a-4053-b389-7c628411351e"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="5e1ff0e1-65bb-4b49-ac7d-e2a71bd5d794"><con:configuration><token>No matching party found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom333-Pull-Submit message-Exceptional flow-Data-To/PartyId-Not present" searchProperties="true" id="c5cf4300-e966-4420-a436-8c4ef1d0adf2">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="4b271508-09a5-45d1-93b2-6e08baa05477" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom333-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d2041ab1-d35e-40db-bf29-8a061a21823a"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="9d121d92-d34a-4ad5-8262-2a0ff9d4dfe6"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom333-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="377cd4d5-7801-415d-87bd-d641c2bc31d0"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="a2365d75-e07c-45e2-8c01-0d848fadb743"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="99039b1e-b9a2-4779-893a-b7fd63a26c18"><con:configuration><token>No matching party found</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom033-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="28368ff8-9af9-45b9-9d2d-db2f33f29799" name="EDELIVERY-1526 - Role not exist" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom023-Push-Submit message-Exceptional flow-Data-From/Role-Not present" searchProperties="true" id="ae901a04-440b-4475-9af5-99688a77ef88">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="618cc44d-864f-4670-bf60-6fe4c8eaeed6" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom023-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3fa71aef-2aad-41ef-9504-74f62acfce23"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b5eb1e11-7d09-4617-af24-c62e5bae64a5"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom023-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="db627dac-cf5b-4a70-8389-2b918919f757"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="58768ccb-23f2-419d-b289-a088c8f7f99d"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="885055b1-058d-4e9f-9d27-ee77784f478a"><con:configuration><token>from role must not be empty</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom023-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom038-Push-Submit message-Exceptional flow-Data-To/Role-Not present" searchProperties="true" id="19a980a9-e6ba-4859-9cda-db37d3cd191b">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="027b87e7-eba2-4b70-a8f7-a43340c967dd" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom038-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="39767acc-4335-4f79-9af4-0adee161b204"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="86fafea2-c8aa-42aa-8c8b-ed76a74937b5"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom038-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="2d8b1a34-eab7-4121-9904-7163b4c1ed8d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="8c2212aa-c8d0-4098-b2d0-a6662fddc9d0"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="1722ecbe-8579-41e8-8b79-efc82e64f3b8"><con:configuration><token>is not complete</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="6bf2afab-8dfa-4aca-95f3-0503e0b8795b"><con:configuration><token>Role</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 2" id="64980313-9f84-46ed-9d76-3d6e75a3775f"><con:configuration><token>is expected</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom038-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom323-Pull-Submit message-Exceptional flow-Data-From/Role-Not present" searchProperties="true" id="845991a8-5430-4052-9f2e-819a2627fa56">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="524ff522-6461-41c7-bf26-99da041e2906" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom323-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="0c05d07e-ef56-4777-ad8b-e12d23bec4d8"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="c4382dcb-2ce8-473a-a751-a39d4dd939b2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom323-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="9722dcae-d255-4c41-863e-5523defec6a8"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="717573dc-6b28-4cca-8c5a-5dba324e0d68"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="82e6efe8-9fb6-42a0-910f-15dff1292105"><con:configuration><token>from role must not be empty</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom338-Pull-Submit message-Exceptional flow-Data-To/Role-Not present" searchProperties="true" id="dff7d562-1eae-4723-b69f-2868cc347974">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="46b277ba-141c-492f-9abc-2f2cf49c4234" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom338-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="168dc13c-210e-4db9-8d1d-b703b6936dde"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="e1e0d230-9c3c-4be9-b42a-e1e0356cf390"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom338-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="5d9346bb-c3dc-4bcc-a697-e97bf3032382"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="e52dca27-a0ae-471a-b608-8c3f266ac967"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="739175b3-07f1-4e94-b9f9-f52a2b5d1655"><con:configuration><token>is not complete</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="ee0049a9-9a0f-4068-8180-f5797283821e"><con:configuration><token>Role</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 2" id="463de6d9-3256-4c20-ba32-757bbe4de914"><con:configuration><token>is expected</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="e903eecc-2e98-4989-b3c1-066578ea51f9" name="EDELIVERY-1527 - Specific erorrs message need" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom027-Push-Submit message-Exceptional flow-Data-From/PartyId:Type-Not present" searchProperties="true" id="194d8641-f022-4686-9e31-62c007e1cafd">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="691e8264-c315-45f6-8055-3ad2f715ae4d" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom027-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId>domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="773ab0b4-6ed2-456d-acb5-68ede68b6fd2"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6419263c-9bbe-430f-ab15-664c56bb0cf6"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom027-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="0a121064-86e4-4e08-aa70-a9814d32909d"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="ef571ece-a4c9-4a85-95c6-a9e2d77e6a93"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="33c24278-44e0-4775-bc4e-03342608d541"><con:configuration><token>Attribute 'type' must appear on element</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="344ba240-e95b-495a-8a25-1bf78faa4649"><con:configuration><token>PartyId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom027-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom028-Push-Submit message-Exceptional flow-Data-From/PartyId:Type-Empty" searchProperties="true" id="78a2db7f-8be6-48d9-8d52-344a117d0d28">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="ebdd447d-0a48-472f-9d4b-af88f1e8de39" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom028-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="c5ef5e1e-7fc6-4658-9b5d-5e40fec3a8df"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="2acc885a-43fe-4250-ae77-3990d9334f6a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom028-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="4feb9e95-e2bb-4c25-a941-4dc79550086e"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="34f091a3-1286-49da-a830-32f8306caba9"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="b8afd42d-cbb1-4a4f-990e-cf5181fbf63d"><con:configuration><token>length = '0' is not facet-valid with respect to minLength '1'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom028-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom039-Push-Submit message-Exceptional flow-Data-To/Role-Empty" searchProperties="true" id="28d67e01-c79b-4bbe-960d-cfde2c44abcf">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="0558a3c7-7ccb-4a22-96d8-0ed18f473115" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom039-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:Role></ns:Role>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="4bcd9665-a0cc-4d81-9a21-ca7971f00404"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="42106439-496f-4f13-a489-803f37a121cb"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom039-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="0d4decef-7c3b-4d7d-8827-3a660b410a24"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="77632c95-8ce7-446b-80ef-c10ca93154dc"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="949d973f-d33b-4034-9e02-5fafcb111da9"><con:configuration><token>to role must not be empty</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom039-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom042-Push-Submit message-Exceptional flow-Data-To/PartyId:Type-Not present" searchProperties="true" id="835d76c5-234b-49c3-838a-34fc9019e4f5">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="e364e15a-1023-46cb-94ca-29f574f3b065" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom042-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId>domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="39643bef-19f3-42ea-b9c6-a0b5bbc70a22"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="4d26381c-6f2a-4d49-9452-36e40a12bf5b"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom042-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="bcc44db4-c6be-465c-b3bf-1af6d9ddfe9f"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="ead9d5af-0cd2-4a2c-9f85-8b15e9a9c9f4"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="86a3c8e2-e33b-4276-979b-aad18b8308b6"><con:configuration><token>Attribute 'type' must appear on element</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="e9012b25-5e47-4646-8f0f-ba4ff797e41f"><con:configuration><token>PartyId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom042-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom043-Push-Submit message-Exceptional flow-Data-To/PartyId:Type-Empty" searchProperties="true" id="98e79f7a-8ddb-4a77-b8fc-2d0ac991cc47">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="1868238c-8c90-4d2a-93c6-bbe07416f2da" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom043-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ba3c41d4-603d-4d36-80b7-78492045b532"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="996c9d5a-dff5-47c7-93bc-32b1a04f4f2e"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom043-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="97150236-ba32-4451-9926-32d94ed3489a"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="1f73577b-e758-4b0a-b869-838bead75401"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="0a5315b9-548c-4490-a5e6-bb8fc19724ac"><con:configuration><token>empty</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom043-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom051-Push-Submit message-Exceptional flow-Data-Service-Not present" searchProperties="true" id="c0377df4-8040-4ce4-994d-74590313cbc5">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="749a9f87-1967-4c4b-8a4f-3115ffe1daab" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom051-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="41389276-3179-4c88-994b-5969fca4e6d6"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="94b1357f-b37c-4459-b42b-2daaf3b6e656"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom051-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="6b8f3ade-2f34-4300-8063-0b145afc5229"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="b3881461-134e-4cdc-a556-80150c83aa1c"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="a628ccdc-42fe-402a-9d2f-33ee35a343f7"><con:configuration><token>is not complete</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="9ca18076-286a-4296-aeeb-f57d0e31af40"><con:configuration><token>ConversationId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 2" id="fc08a9ae-4b3a-4bab-9466-6cd998d79612"><con:configuration><token>is expected</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom051-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom085-Push-Submit message-Exceptional flow-Data-payload:payloadId-Not present" searchProperties="true" id="4a274f8b-c5d4-4bec-a3af-2680fb45cda9">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="132352fb-6ac3-4206-a022-fc9882a2ab83" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom085-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ab780f33-26dc-4624-b115-645e19b01dc6"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="c97a7c32-f16f-4b9d-9b0a-05e31013b8a8"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom085-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="aa2fe563-9975-4dd2-9280-a69f6da804cd"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="06b56d28-bc8d-484c-81a8-0ab4f67fe495"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="127974ad-a82a-451d-ad4a-49eedb1e1e72"><con:configuration><token>payloadId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom085-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom327-Pull-Submit message-Exceptional flow-Data-From/PartyId:Type-Not present" searchProperties="true" id="9f4b8318-ebd7-4fe4-af20-6217a3e317ba">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="ab91b867-27e0-444c-9895-dfb10d32ad7c" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom327-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId>domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="e89842b3-6fe0-43dd-aa10-149138dbd176"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="44e72e93-388e-4dd2-a438-40d3eec965bc"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom327-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="3eee2c9d-3053-45f1-9196-80f66c9158da"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="611b7e81-b098-4b4d-b6af-6e082aad4db7"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="cf1779ef-6caa-4adc-8569-d2868e75709d"><con:configuration><token>Attribute 'type' must appear on element</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="723e549c-dfce-4e76-b462-822091c1e762"><con:configuration><token>PartyId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom328-Pull-Submit message-Exceptional flow-Data-From/PartyId:Type-Empty" searchProperties="true" id="c580a17d-e370-4f73-8b63-cc2862f7987c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="fda4f7de-b68b-41ed-a53b-3d24b94ffdee" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom328-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="b17fa740-056e-453b-a603-e8d779bd2ed1"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="af05af05-774a-42c9-8743-def16eabd799"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom328-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="041e5ed7-6efd-4409-81a8-3433eebb7aeb"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="5c6983e0-ed89-4e73-a261-3d4dd4df7896"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="db1a4c80-8763-4911-a0d2-28ee054ae21a"><con:configuration><token>length = '0' is not facet-valid with respect to minLength '1'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom339-Pull-Submit message-Exceptional flow-Data-To/Role-Empty" searchProperties="true" id="4771a579-7b10-4935-8bab-a1f7efd939c2">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="dfa57600-9dca-495b-8c71-f2d267205bb8" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom339-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:Role></ns:Role>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="8f01dd16-86d6-4336-8e2a-9ddd3ddd24ee"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="9e2bac56-3647-4e94-a6d3-bc7c3c559584"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom339-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="578af36d-de66-46d1-8acf-51e0ff921a90"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="7453f330-a530-49e9-ac0e-12d50a26d0ce"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="bfbccc93-d1cf-4c0b-9400-9152ea7a4043"><con:configuration><token>to role must not be empty</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom342-Pull-Submit message-Exceptional flow-Data-To/PartyId:Type-Not present" searchProperties="true" id="6548d1ef-59cb-47a2-b4a5-6c87c1d3eac7">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="76e857ab-4703-4f42-8998-aa2ca28c02a9" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom342-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId>domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2a132d0c-89b5-459d-b93c-6e768c40296b"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="b5067809-ce6c-4cfc-a0e5-1dcc88675824"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom342-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="a9dc959e-8660-49ca-9d58-0c5ab012bf11"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="e038ee9f-c4b9-45be-94b5-5c1a8522e1fa"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="eace452b-c061-4d22-8c12-0edfd1c23b0a"><con:configuration><token>Attribute 'type' must appear on element</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="b1de18e0-1905-4873-92ce-fb1d6a7e9e6c"><con:configuration><token>PartyId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom343-Pull-Submit message-Exceptional flow-Data-To/PartyId:Type-Empty" searchProperties="true" id="cf997f09-2190-4dbb-8dac-0bf9e9c646f0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="fd3f4331-7c9a-4caf-b122-4a8b248b9d68" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom343-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="b1e54c46-5cd0-4482-913b-bec3dd958d0b"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="779b572b-712a-41c9-b532-a4ebd974dc6a"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom343-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="273da2c1-8338-4c7c-af20-920d29ede77e"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="1a02ca83-87a9-41f4-8109-971f680b82dc"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="77183ebe-62a0-4fd8-9bbf-8686f51f018e"><con:configuration><token>empty</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom351-Pull-Submit message-Exceptional flow-Data-Service-Not present" searchProperties="true" id="d73aac75-4e64-4b69-97e9-fd936a0ba58d">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="954fbd6d-8e33-44b5-a7f6-4d199d1f63fb" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom351-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="916c487c-7327-4e9f-bfc5-30f4f584ff35"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="ff104eb3-78be-427a-850b-8a785aa51a69"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom351-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="d7b257d4-6303-4739-985c-0f687135a676"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="6c843148-fe53-4c8c-9e22-c902fdca0576"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="d7d02d7a-3b30-49db-94d9-e0481eabb6d6"><con:configuration><token>is not complete</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 1" id="6fd5df23-2186-4a77-9cd7-3354c72a69c4"><con:configuration><token>ConversationId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains 2" id="de84a320-7824-40b1-a31e-8245be27f76b"><con:configuration><token>is expected</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom385-Pull-Submit message-Exceptional flow-Data-payload:payloadId-Not present" searchProperties="true" id="a05558e1-9fba-4941-b34d-face3f0b0fe3">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="60db940f-c9cb-4bde-bbcf-bd1ee4b2b023" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom385-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="d1f30cfb-5adb-4010-b4d3-a97bd3f96570"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="2d34f893-4690-439a-a8e1-eca208ef2dbb"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom385-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="a377dedb-df6a-4ab9-aebb-e5a8a9b776c9"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="fb01ada1-7f33-4adb-9cbb-47f9b86105da"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="3285b726-080a-4a84-9060-55a8ed5db5f8"><con:configuration><token>payloadId</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="40ae6541-9173-492d-9e10-3b8b557e41d2" name="EDELIVERY-1529 - AgreementRef too long" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom047-Push-Submit message-Exceptional flow-Data-AgreementRefId-Maximum Length" searchProperties="true" id="bd7ebd33-2087-4261-b44b-c6c91f1b9621">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="dce1c441-6595-4028-838d-f4871f233daa" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom047-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef>-00001234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:AgreementRef>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2f986264-5e9e-4348-ac04-476b44df0821"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="0757a93b-34ba-47f0-8ff5-eaa69bb445d2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom047-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="be22334a-56f9-4621-b6d8-37dbf5839264"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="6c05bfd6-67ff-4bc7-9352-fb06806f93bf"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="52ebe82d-6048-4d22-9924-54cc1af133c0"><con:configuration><token>is not facet-valid with respect to maxLength '255'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom047-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom347-Pull-Submit message-Exceptional flow-Data-AgreementRefId-Maximum Length" searchProperties="true" id="8189a3b3-d7cf-4fbc-9b81-b4c5a8caa4dc">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="f416ff8d-55de-4c7c-8095-235ff929912a" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom347-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:AgreementRef>-00001234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:AgreementRef>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="e343ce37-65ed-4e46-989f-686bdd2b5419"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="8635cd89-2e95-4266-b556-bfecd4d474e1"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom347-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="b714d26c-21a2-473a-8b94-bf392c909a7f"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="20ce7d1d-4d93-4112-a8f5-1cb0a237b530"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="6526cdfa-ee7b-492f-a3c3-e62f79fb9ff1"><con:configuration><token>is not facet-valid with respect to maxLength '255'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="dd41d216-e8a9-4935-b611-bed07fa6b801" name="EDELIVERY-1530 - CoversatuibUd max length exeeded" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom060-Push-Submit message-Exceptional flow-Data-ConversationId-Maximum Length" searchProperties="true" id="a4614f8a-757a-4342-8d5e-4ca9b924c87f">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom060-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom360-Pull-Submit message-Exceptional flow-Data-ConversationId-Maximum Length" searchProperties="true" id="51974f50-ffef-4800-bb29-8a0c51dccb3c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="ea862d2c-bd39-4803-969c-5a002508a007" name="EDELIVERY-1532 - OrignalSender value too long" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom067-Push-Submit message-Exceptional flow-Data-Original Sender-Maximum length" searchProperties="true" id="608c843c-5bb8-4b3f-b82d-7fdc60ef8170">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="ffc412d5-74d5-429a-81f1-ea1fa5853137" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom067-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="58cd80fc-6cfc-45e2-bf3c-3e6121986b23"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="82a98794-bad4-421b-8772-4c03fde8d11b"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom067-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="f941d20c-eb88-4c21-ae41-dfd4283c58da"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="bae51852-b51d-43ee-b86f-ca278637490f"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="b592dc4f-aea3-4c2b-9052-5a8ed2f7ccb9"><con:configuration><token>message properties</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom067-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom073-Push-Submit message-Exceptional flow-Data-Final Receiver-Maximum length" searchProperties="true" id="628b542c-049c-455d-88d1-e9b825a488d5">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="a74e827e-ab18-434e-bb90-c99f2e457533" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom073-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3fe0b6ac-f4f5-4284-98ae-84237c25dc29"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a8ae8d0e-7802-4df7-b48c-7c36252b25a0"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom073-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="8fa4e835-68c8-4401-ae9f-c293c9dce5f5"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0aad963c-03a8-49b3-86ce-97989d07ee1c"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="306d542a-f39a-4dc4-8ff8-5496866ea7bc"><con:configuration><token>is not facet-valid with respect to maxLength '255'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom073-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom084-Push-Submit message-Exceptional flow-Data-Property(Description)-Maximum length" searchProperties="true" id="4abd045a-c3b2-43c3-aebf-d6e0e8748aae">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="aad31cf1-d417-4379-a177-df60522aea19" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom084-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                     <ns:Property name="description">-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="e35d8353-aa1c-4071-990c-e93c647d168d"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="326e867d-e868-4593-95fe-6fc61d738d23"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom084-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="5496a82d-74db-4ce7-9f2c-937e996b7a5c"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="88ea5bdd-103b-4934-b993-4ab82fca0fec"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="3e476f64-5cee-4fd5-ae97-08cf538fde59"><con:configuration><token>is not facet-valid with respect to maxLength '255'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID("-Dom084-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom367-Pull-Submit message-Exceptional flow-Data-Original Sender-Maximum length" searchProperties="true" id="c24c4cef-bc06-4ce9-857c-e2ba420ee2f0">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="6e7abf59-812d-4928-b621-470f83ee8ee5" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom367-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="6b55c34a-cff4-4603-8e56-89ccf946ddc8"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="97829b4b-97e4-4635-96e5-9950df0839cb"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom367-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="d2b0d390-e38b-4fdb-b74f-98539d5f502f"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="a6a0d8b6-194f-4b33-9eef-d17e2461c028"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="22649e9f-389b-4269-a00f-253847199e44"><con:configuration><token>message properties</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom373-Pull-Submit message-Exceptional flow-Data-Final Receiver-Maximum length" searchProperties="true" id="e50a5dbe-c48c-4192-92ac-2dd162b6449b">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="97016ef8-29ca-4aab-a7e7-02cadcaa1831" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom373-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ce2fe213-5812-45e3-918a-703862cbc20a"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="7de534f4-c0e9-4ddc-bc48-250b1046420b"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom373-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="cf805504-5e2a-4278-8072-fe41914ef4f1"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="1d25f92d-061a-46ea-b797-b2cca5697d39"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="b994de12-b22b-408f-8280-64f3175241ef"><con:configuration><token>is not facet-valid with respect to maxLength '255'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom384-Pull-Submit message-Exceptional flow-Data-Property(Description)-Maximum length" searchProperties="true" id="f12d770f-e247-4909-b7c0-bb0323e44d43">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="ae03fbda-9f45-4770-b093-c01186ba554e" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
            	<ns:MessageId>-Dom384-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                     <ns:Property name="description">-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-01234567890123456789012345678901234567890123456789-</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message" contentType="text/xml">
         	<value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="60d20489-9096-4945-9bd1-75ce08b54e7b"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="c52c6029-4574-45ae-88a7-a856dd53effe"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.verifyMessagePresence(0,0,"-Dom384-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="eba3df69-eeef-42ae-980e-797e00e041cf"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="de2259ff-5008-4a94-b92e-0cee381cd7ba"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contains" id="20d23732-12a7-427e-a2cc-c7c5871f9bb2"><con:configuration><token>is not facet-valid with respect to maxLength '255'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="7b8f7391-8065-4c8b-8e49-240d45fcb3e8" name="EDELIVERY-1548 - Special characters handling" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom114-Push-Special characters" searchProperties="true" id="c08d0a8d-ca68-415f-8f08-a86f1ef2cd08">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="a3ccc6bd-9374-497d-8a6d-54a442637145" name="Submit Message OK"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message OK" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>&#32;&#33;&#34;&#35;&#36;&#37;&#38;&#39;&#40;&#41;&#42;&#43;&#44;&#45;&#46;&#47;&#58;&#59;&#60;&#61;&#62;&#63;&#64;&#91;&#92;&#93;&#94;&#95;&#96;&#123;&#124;&#125;&#126;</ns:MessageId>
               <ns:RefToMessageId>12349999</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="45908866-683c-4c4c-9f1e-0031d61ae6f5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="9cf9a29f-4f69-464b-b76f-55ed7425e192"/><con:assertion type="XPath Match" name="XPath Match" id="db4d8140-fe5c-4e98-b652-3acbc1664003"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a60dce5d-0c7a-496e-9bcd-e1e5db1d1f35"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="14b5467d-b6d2-46f6-8965-34ca91d1b1ff"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="de1e0b56-a34a-40a7-aac9-a7ef1dd25d6e" name="Submit Message KO"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message KO" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>&#09;&#130;&#4;</ns:MessageId>
               <ns:RefToMessageId>12349999</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2968d2d5-94f7-4020-b1cf-75d1d83921ba"/><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="7f3ca2a8-fd08-44df-bb2b-3074d29bbd73"/><con:assertion type="Simple Contains" name="Contains" id="3e52559c-26de-4a45-aa9f-582a27832a0c"><con:configuration><token>Illegal character</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="e85cb4a1-f8e8-4875-b2cf-fa5f54f47b53"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="dedfdc05-cfe2-4a2d-8a56-f0ee7186188e" name="getStatus OK"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus OK" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>&#32;&#33;&#34;&#35;&#36;&#37;&#38;&#39;&#40;&#41;&#42;&#43;&#44;&#45;&#46;&#47;&#58;&#59;&#60;&#61;&#62;&#63;&#64;&#91;&#92;&#93;&#94;&#95;&#96;&#123;&#124;&#125;&#126;</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="643cabf3-c6b8-49cc-8db2-27e00418b006"/><con:assertion type="Simple Contains" id="8a1bb3cd-5945-4809-8404-4557ed55e3d3" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="9a8ccd67-246e-4661-9f51-001905bc5efc" name="Not SOAP Fault"/><con:assertion type="Valid HTTP Status Codes" id="3527a8d4-2876-427b-b7b9-9ba4e172ff93" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="ce08c82f-3d19-4c2d-9678-e8f0f3e2598b"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5ee3097a-1757-4499-b658-d4c0759d5c8f" name="getStatus KO"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus KO" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>&#09;&#130;&#4;</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="11d67fdb-6b88-4a6b-893e-b7ed3a9835a0"/><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="7644dfbd-1eda-4975-938c-afbae3a1f32d"/><con:assertion type="Valid HTTP Status Codes" id="156889ad-4eba-497e-b1d2-6c4b3575efd0" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77316c1a-8337-4234-96c5-440f897f989a" name="Contains"><con:configuration><token>Illegal character</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="447dc08c-1576-4635-afee-7c807a7a44b5"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="delay" name="D5" id="cc52c7b9-77e6-4c89-bd7a-8942f7b31055"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="delay" name="D6" id="173b072c-7fdb-4d6e-8f8c-5750c34d035c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="delay" name="D7" id="6084af2d-88fb-4d79-982e-b548146272af"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="3667b0ee-6a9a-436b-a39e-888b953251c8" name="retrieveMessage OK"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage OK" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>&#32;&#33;&#34;&#35;&#36;&#37;&#38;&#39;&#40;&#41;&#42;&#43;&#44;&#45;&#46;&#47;&#58;&#59;&#60;&#61;&#62;&#63;&#64;&#91;&#92;&#93;&#94;&#95;&#96;&#123;&#124;&#125;&#126;</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2e674531-5ad3-43a6-a41b-57881deae90f"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="2b5a54dc-1dd0-46a1-943a-3f27e21cd1b1"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="64c03a9b-b375-48c0-81fa-d104dcac69a2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED","-Dom089-");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="7845dddf-712f-4e40-8a0f-1e735ee96f77"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D8" id="8f2d6386-5343-4530-8d7d-1443bfe7b453"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="d5f6b47c-857c-451a-82f6-fd564cf5315e" name="retrieveMessage KO"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage KO" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>&#09;&#130;&#4;</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="04853fa6-a5d5-448e-b950-f595c9b17133"/><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="3ed39628-3a27-46bb-81a3-c68d77a5b79e"/><con:assertion type="Simple Contains" id="1d71c912-d8dc-43fe-8c9b-74e454d05b07" name="Contains"><con:configuration><token>Illegal character entity</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a15d0fd6-9a45-4bc0-9cd5-9b917557a40b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>12f097d7-dc49-429b-a62b-85c3a362b975</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ac44f74f-f851-457e-8274-d4946cf538d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a020aad4-67bc-4b2d-be0d-efa8ca0f6fdb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a3ccc6bd-9374-497d-8a6d-54a442637145</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>de1e0b56-a34a-40a7-aac9-a7ef1dd25d6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dedfdc05-cfe2-4a2d-8a56-f0ee7186188e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5ee3097a-1757-4499-b658-d4c0759d5c8f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3667b0ee-6a9a-436b-a39e-888b953251c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom414-Pull-Special characters" searchProperties="true" id="7fe70672-19f7-4465-95ab-e7b0590d7306">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="0d36d95e-ef4e-4f51-b569-a441e5e601ce" name="Submit Message OK"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message OK" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>&#32;&#33;&#34;&#35;&#36;&#37;&#38;&#39;&#40;&#41;&#42;&#43;&#44;&#45;&#46;&#47;&#58;&#59;&#60;&#61;&#62;&#63;&#64;&#91;&#92;&#93;&#94;&#95;&#96;&#123;&#124;&#125;&#126;</ns:MessageId>
               <ns:RefToMessageId>12349999</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="45908866-683c-4c4c-9f1e-0031d61ae6f5"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="9cf9a29f-4f69-464b-b76f-55ed7425e192"/><con:assertion type="XPath Match" name="XPath Match" id="db4d8140-fe5c-4e98-b652-3acbc1664003"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a60dce5d-0c7a-496e-9bcd-e1e5db1d1f35"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="7b4a68da-d96c-4f36-9358-4bbee9bc393b"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="951a5b84-a317-4162-862c-08d47d97f903" name="Submit Message KO"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message KO" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>&#09;&#130;&#4;</ns:MessageId>
               <ns:RefToMessageId>12349999</ns:RefToMessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2968d2d5-94f7-4020-b1cf-75d1d83921ba"/><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="7f3ca2a8-fd08-44df-bb2b-3074d29bbd73"/><con:assertion type="Simple Contains" name="Contains" id="3e52559c-26de-4a45-aa9f-582a27832a0c"><con:configuration><token>Illegal character</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="9f53bd48-079c-4b91-a517-760ce7c7252e"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="95883389-f965-413a-a2f4-c45e598b1bba" name="getStatus OK"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus OK" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>&#32;&#33;&#34;&#35;&#36;&#37;&#38;&#39;&#40;&#41;&#42;&#43;&#44;&#45;&#46;&#47;&#58;&#59;&#60;&#61;&#62;&#63;&#64;&#91;&#92;&#93;&#94;&#95;&#96;&#123;&#124;&#125;&#126;</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="643cabf3-c6b8-49cc-8db2-27e00418b006"/><con:assertion type="Simple Contains" id="8a1bb3cd-5945-4809-8404-4557ed55e3d3" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="9a8ccd67-246e-4661-9f51-001905bc5efc" name="Not SOAP Fault"/><con:assertion type="Valid HTTP Status Codes" id="3527a8d4-2876-427b-b7b9-9ba4e172ff93" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="5d05c6be-8743-42a6-9a0d-a87f89bf49cb"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="958922df-53ba-4297-9403-aaf216901e28" name="getStatus KO"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus KO" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>&#09;&#130;&#4;</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="11d67fdb-6b88-4a6b-893e-b7ed3a9835a0"/><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="7644dfbd-1eda-4975-938c-afbae3a1f32d"/><con:assertion type="Valid HTTP Status Codes" id="156889ad-4eba-497e-b1d2-6c4b3575efd0" name="Valid HTTP Status Codes"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77316c1a-8337-4234-96c5-440f897f989a" name="Contains"><con:configuration><token>Illegal character</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D4" id="64759324-a76c-4e01-822d-6f07a1f03e46"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="delay" name="D5" id="89dfdcc8-c6e2-4f48-8360-fa3a440d4216"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="delay" name="D6" id="dc00fc0a-46d5-4bb6-b4ae-082575cb9c39"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="delay" name="D7" id="857d6cbb-bebc-4a1f-ae5c-a0eca86f66dc"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="8dbcec30-ef82-4500-a071-7f24e7e57ca6" name="retrieveMessage OK"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage OK" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>&#32;&#33;&#34;&#35;&#36;&#37;&#38;&#39;&#40;&#41;&#42;&#43;&#44;&#45;&#46;&#47;&#58;&#59;&#60;&#61;&#62;&#63;&#64;&#91;&#92;&#93;&#94;&#95;&#96;&#123;&#124;&#125;&#126;</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2e674531-5ad3-43a6-a41b-57881deae90f"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="2b5a54dc-1dd0-46a1-943a-3f27e21cd1b1"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="64c03a9b-b375-48c0-81fa-d104dcac69a2"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","DELETED");
test.finalize();</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="7845dddf-712f-4e40-8a0f-1e735ee96f77"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D8" id="c6b58479-7715-41b1-aa9e-9c3c042b1fc1"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="9a93c3ec-78f3-4f25-94bc-d0e4dcf184e1" name="retrieveMessage KO"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage KO" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>&#09;&#130;&#4;</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="04853fa6-a5d5-448e-b950-f595c9b17133"/><con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="3ed39628-3a27-46bb-81a3-c68d77a5b79e"/><con:assertion type="Simple Contains" id="1d71c912-d8dc-43fe-8c9b-74e454d05b07" name="Contains"><con:configuration><token>Illegal character entity</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a15d0fd6-9a45-4bc0-9cd5-9b917557a40b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>12f097d7-dc49-429b-a62b-85c3a362b975</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ac44f74f-f851-457e-8274-d4946cf538d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a020aad4-67bc-4b2d-be0d-efa8ca0f6fdb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a3ccc6bd-9374-497d-8a6d-54a442637145</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>de1e0b56-a34a-40a7-aac9-a7ef1dd25d6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dedfdc05-cfe2-4a2d-8a56-f0ee7186188e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5ee3097a-1757-4499-b658-d4c0759d5c8f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3667b0ee-6a9a-436b-a39e-888b953251c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="35b603b2-9d89-4dc1-8640-f22f07b059bc" name="EDELIVERY-2094 - Message is not immediately deleted after download" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom095-Push-Get Status-Basic flow-DELETED" searchProperties="true" id="e4801e3a-acdd-4253-a200-c1c288a3d42c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="a67ab4d8-44b3-4ba5-9fb3-1329ee87c4c0" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom095-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ef976153-23f6-4c57-9a23-95b3ee728ea7"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="605077dd-11a7-4e02-83bc-c06211fe9bb4"/><con:assertion type="XPath Match" name="XPath Match" id="04393b25-6d0a-4cdc-8774-f711d54f081e"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a44d4670-2cf2-4838-a0fd-a73966bd72e0"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="e87c9c30-6024-402f-8556-9840434883e2"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="77d3e4b2-05f6-43b5-b1e0-e7c1d3fbcc4f" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="8407c292-7b3c-4b22-bbd1-0da470245436"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="80a89ef0-703b-4aab-bad4-16b37e925a89"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="3f7a8437-716e-4e88-90d2-62afdb1e82f1"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6982211a-e4b8-469c-99a9-93f9a0f4d59c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus(null,"DELETED","-Dom095-1-",null,null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="14fe7db5-04b6-407b-b599-cf404a385b3a"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5e1d3049-2401-469f-8ae7-fca8d6783306" name="getStatus"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2dc5b343-6d1d-443a-b08e-6218b68aaae9"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="9c40a22a-5482-4874-8367-d25b0181cefb"><con:configuration><scriptText>def outStatus = Domibus.getStatusRetriveStatus(log, context, messageExchange)
assert (outStatus.equals("DOWNLOADED") || outStatus.equals("DELETED")), "The returned status is neither DELETED nor DOWNLOADED"</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="7fdbccdb-f3a4-4bf8-a8d6-d50feb64d698"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus(null,"DELETED","-Dom095-1-",null,null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="3fc9d203-0800-4477-9ee9-f28a77783f5d"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="e017e345-6865-4b38-a39b-fc26b9382442"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Add the following property in file domibus.properties for both sender and receiver: 
	&lt;prop key="domibus.attachment.storage.location">../payloads&lt;/prop> 
- Create folder "payloads" in under the domibus root folder of both sender and receiver 
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="delay" name="D4" id="458ff071-e5f9-41c5-951a-4f704b523136"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="4269a4d5-5f0a-4d0f-900e-94495f1b0f67"><con:settings/><con:config><script>// Stop
Domibus.stopSetMSHs(1,1,0,context, log);

// Start
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--DONE--";</script></con:config></con:testStep><con:testStep type="delay" name="D5" id="fdc0eb17-fc9a-4047-b86e-ca3c0002a8d8"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="ae04f198-c80d-4a9e-ae0d-6daa5998a284" name="Submit Message2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom095-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ef976153-23f6-4c57-9a23-95b3ee728ea7"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="605077dd-11a7-4e02-83bc-c06211fe9bb4"/><con:assertion type="XPath Match" name="XPath Match" id="04393b25-6d0a-4cdc-8774-f711d54f081e"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a44d4670-2cf2-4838-a0fd-a73966bd72e0"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D6" id="b1e3ab0c-fc8a-4761-9330-51ed77339164"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5767b5b2-8bf2-4bba-917b-a6b5f03f51de" name="retrieveMessage2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message2#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="8407c292-7b3c-4b22-bbd1-0da470245436"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="80a89ef0-703b-4aab-bad4-16b37e925a89"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="3f7a8437-716e-4e88-90d2-62afdb1e82f1"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6982211a-e4b8-469c-99a9-93f9a0f4d59c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus(null,"DELETED","-Dom095-2-",null,null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D7" id="e390163a-2048-4951-8ef8-3c2246dd575d"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="3b3f873a-72cc-4f67-b0ef-286b1718e40e" name="getStatus2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message2#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2dc5b343-6d1d-443a-b08e-6218b68aaae9"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="9c40a22a-5482-4874-8367-d25b0181cefb"><con:configuration><scriptText>def outStatus = Domibus.getStatusRetriveStatus(log, context, messageExchange)
assert (outStatus.equals("DOWNLOADED") || outStatus.equals("DELETED")), "The returned status is neither DELETED nor DOWNLOADED"</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="7fdbccdb-f3a4-4bf8-a8d6-d50feb64d698"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus(null,"DELETED","-Dom095-2-",null,null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore configuration" id="dc32ce12-2292-48b0-98d8-474d1fd068c8" disabled="true"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Remove the property "domibus.attachment.storage.location".  
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 2" id="1a0ab64d-0230-4a23-98cd-ed2a33f90bc1" disabled="true"><con:settings/><con:config><script>// Stop
Domibus.stopSetMSHs(1,1,0,context, log);

// Start
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--DONE--";</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom095-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a67ab4d8-44b3-4ba5-9fb3-1329ee87c4c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77d3e4b2-05f6-43b5-b1e0-e7c1d3fbcc4f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Dom395-Pull-Get Status-Basic flow-DELETED" searchProperties="true" id="d6a59775-9228-4d44-9d37-ca858cfb587c">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="4ce5abca-892a-437c-b637-4f7b0510cc2f" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom395-1-1-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ef976153-23f6-4c57-9a23-95b3ee728ea7"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="605077dd-11a7-4e02-83bc-c06211fe9bb4"/><con:assertion type="XPath Match" name="XPath Match" id="04393b25-6d0a-4cdc-8774-f711d54f081e"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a44d4670-2cf2-4838-a0fd-a73966bd72e0"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D1" id="4471021c-83ab-471e-bff9-4572b55b03ec"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="36cc4a9a-6f1b-4d08-ab01-36dbfca2a032" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="8407c292-7b3c-4b22-bbd1-0da470245436"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="80a89ef0-703b-4aab-bad4-16b37e925a89"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="3f7a8437-716e-4e88-90d2-62afdb1e82f1"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6982211a-e4b8-469c-99a9-93f9a0f4d59c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus(null,"DELETED","-Dom395-1-1-",null,null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D2" id="33e412fd-1f08-4352-9c94-618276f9c691"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="61b0dfcf-f4d6-4adc-8e27-98b5cf76e4ae" name="getStatus"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2dc5b343-6d1d-443a-b08e-6218b68aaae9"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="9c40a22a-5482-4874-8367-d25b0181cefb"><con:configuration><scriptText>def outStatus = Domibus.getStatusRetriveStatus(log, context, messageExchange)
assert (outStatus.equals("DOWNLOADED") || outStatus.equals("DELETED")), "The returned status is neither DELETED nor DOWNLOADED"</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="7fdbccdb-f3a4-4bf8-a8d6-d50feb64d698"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus(null,"DELETED","-Dom395-1-1-",null,null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D3" id="c6366fda-f7fd-4528-8af2-63fa16cb16a5"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Configuration" id="ea4e5b7c-6a30-41fc-8f4c-3bc3d0013a23"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Add the following property in file domibus.properties for both sender and receiver: 
	&lt;prop key="domibus.attachment.storage.location">../payloads&lt;/prop> 
- Create folder "payloads" in under the domibus root folder of both sender and receiver 
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="delay" name="D4" id="9c9ea85b-d1b7-43b9-9dd0-4cf47a1302bb"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver" id="b2dc2e33-e024-4424-8df9-c20885099fc7"><con:settings/><con:config><script>// Stop
Domibus.stopSetMSHs(1,1,0,context, log);

// Start
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--DONE--";</script></con:config></con:testStep><con:testStep type="delay" name="D5" id="19dae9db-46da-4a87-86c9-6e3cee2228fe"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5fe51236-1a6b-4af2-b187-40cc737dddfd" name="Submit Message2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-Dom395-2-2-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc14">bdx:noprocess</ns:Service>
               <ns:Action>TC14Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>\r
      <_1:submitRequest>\r
         <payload payloadId="cid:message">\r
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>\r
         </payload>\r
      </_1:submitRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="ef976153-23f6-4c57-9a23-95b3ee728ea7"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="605077dd-11a7-4e02-83bc-c06211fe9bb4"/><con:assertion type="XPath Match" name="XPath Match" id="04393b25-6d0a-4cdc-8774-f711d54f081e"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="a44d4670-2cf2-4838-a0fd-a73966bd72e0"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D6" id="ab29038b-6856-41d1-b41f-cb447a1fef8f"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="5ffa27c3-7142-4e2f-9a70-02dbac719155" name="retrieveMessage2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>${Submit Message2#Response#//messageID}</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="8407c292-7b3c-4b22-bbd1-0da470245436"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="80a89ef0-703b-4aab-bad4-16b37e925a89"/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="3f7a8437-716e-4e88-90d2-62afdb1e82f1"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="6982211a-e4b8-469c-99a9-93f9a0f4d59c"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus(null,"DELETED","-Dom395-2-2-",null,null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="delay" name="D7" id="ad4d51f0-89ae-4986-8be4-bece090c92d2"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="request" id="c1af4565-5e97-4fc1-9f88-6487a0186433" name="getStatus2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>${Submit Message2#Response#//messageID}</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="2dc5b343-6d1d-443a-b08e-6218b68aaae9"/><con:assertion type="GroovyScriptAssertion" name="Script Assertion" disabled="true" id="9c40a22a-5482-4874-8367-d25b0181cefb"><con:configuration><scriptText>def outStatus = Domibus.getStatusRetriveStatus(log, context, messageExchange)
assert (outStatus.equals("DOWNLOADED") || outStatus.equals("DELETED")), "The returned status is neither DELETED nor DOWNLOADED"</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion 1" id="7fdbccdb-f3a4-4bf8-a8d6-d50feb64d698"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus(null,"DELETED","-Dom395-2-2-",null,null);
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Restore configuration" id="fe257120-8e9e-4895-a9a1-b16345b44f30" disabled="true"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Remove the property "domibus.attachment.storage.location".  
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Restart Sender and Receiver 2" id="5e6555e3-52e5-4485-87a1-e21bfac8422d" disabled="true"><con:settings/><con:config><script>// Stop
Domibus.stopSetMSHs(1,1,0,context, log);

// Start
Domibus.startSetMSHs(1,1,0,context,log);

log.info "--DONE--";</script></con:config></con:testStep><con:tearDownScript>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith("-Dom395-");
test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a67ab4d8-44b3-4ba5-9fb3-1329ee87c4c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77d3e4b2-05f6-43b5-b1e0-e7c1d3fbcc4f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="ccfdb8f8-1408-49e0-872e-cdb54bc8a4d2" name="EDELIVERY-3517 - Domain specific domibus.properties file is case sensitive" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ae7d46c9-601d-43eb-a5e6-736bf740c866" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX11-Multitenancy-Tenant selection-Outgoing message-Case sensitivity-filename-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="722f8919-bad9-4003-8e43-d4cbb37895c1"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain "domibus_C2Dom1" is configured for C2.
- For domain "domibus_C2Dom1", properties file is called "domibus_C2DOM1-domibus.properties"
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner)
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="f010ac00-7f7e-44b7-a2a4-6b1a0037216b" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="7bbb4794-6a2a-44f2-b2cc-1f74b2886b3b" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="5d9f236c-1d87-4d1e-87bf-111d44676bd2" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="bfd984e1-bf65-418d-a791-43b7759573d6" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="d5ca23bf-4282-4c1c-a651-98c665ab04df" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="2043a218-5b42-4bce-834f-dcbe27d8eb50" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="4c7e0e61-ec7a-43c3-a4da-d65c6a4bd646" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX11-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="1fefd194-86a3-4743-b8d1-2d684fc3c31e" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX11-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8be72f82-60e5-44a4-9e57-9d4f4712991e" name="getStatus C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX11-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default" id="754dc47f-1989-4ee0-b313-2bc7ab1d2827">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomX11-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="7e00baac-5f41-4760-a106-a7c1a0a2f6d5" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomX11-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 After Download" id="2018ae66-6acc-4713-8a15-16a28d286f35">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomX11-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="07d5ace2-7906-461b-bbf3-2677492edfc9" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX11-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="abd06645-eeb0-4df9-96b0-e49fc823fdfc" name="getStatus C3 Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX11-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="c30b43c9-0dc6-49a3-b69a-be2b791ea470" name="SOAP Fault"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="25f9d12e-a9ff-4a19-9cb9-240351e70eab" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX11-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="88cf2760-e854-42b3-9e7f-cdfc63dda8d1" name="getMessageErrors C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX11-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="41273a78-c89a-4bbf-bce3-6ebde5801add" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="7bb10587-87cd-48e2-aa72-103fe365bf23" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX11-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="1befa6b0-c837-45ae-9cc6-12ad62e05018" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX12-Multitenancy-Tenant selection-Outgoing message-Case sensitivity-propertyname-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="3c83b880-82eb-4c37-ad18-d88b87ce8a5d"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain "domibus_C2Dom1" is configured for C2.
- For domain "domibus_C2Dom1", inside the domibus.properties file, append the string "DOMibus_C2Dom1" to the properties. 
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner)
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="cd0ee13e-7684-4cb6-8bef-f6327dbbac97" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="8093ecce-4e6f-4ea8-8487-c0da753c45cb" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="c2689449-a6c0-4b93-be6a-bd8da7d6ae7a" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="39c30481-1835-470d-8076-151ef6e8b382" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="da69e1fb-3e87-4f6c-8630-4b10aac0f73a" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="778e2ad7-417b-47ff-84fc-9858e4482762" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="request" id="fcea24ad-97a1-4a4b-b7ee-9e4d14bf5d10" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX12-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="876903c2-0828-4f16-8f06-548c207eff17" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX12-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5e8b2d7e-b426-4f33-865d-3c3e9b379f75" name="getStatus C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX12-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default" id="648f9d0e-8110-4bb0-947f-5921475d6017">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomX12-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="3c6c88c4-8b77-4933-b8a2-0efa3ccbfd9b" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomX12-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 After Download" id="14bf3ac2-0f9d-493f-9146-5b7812370531">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomX12-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="93d2ef0e-8e62-44a9-bc3a-890bd33fdd08" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX12-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="aa7d8c41-bfc8-422d-bfcb-0d363b8ca289" name="getStatus C3 Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX12-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="c30b43c9-0dc6-49a3-b69a-be2b791ea470" name="SOAP Fault"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="8ca972fd-a0d9-48ed-b3f7-e1b55ea818f5" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX12-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="49e7497e-fbda-4c20-8fc8-a8da3b01079e" name="getMessageErrors C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX12-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="83b166eb-6f4c-481c-961f-79c5d41c75ea" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="41fa779a-d330-4446-8d9a-0806fb157a5c" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX12-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="eb09f3bb-0d83-4ee7-86ad-81696aa22b17" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX39-Multitenancy-Tenant selection-Outgoing message-Case sensitivity-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="613b5f2c-10de-451e-9298-c2ced4904119"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schema.
- Plugin security is enabled for C2.
- domain "domibus_C2Dom1" is configured for C2.
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain "domibus_C2Dom1". 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
- Set property fsplugin.domains.domibus_C2DOM1.messages.location=C:/domibus/sender/fs_plugin_data/domibus_C2Dom1
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Set fsplugin property" id="9ea87a55-9b7b-4936-9927-96f66ffc172d" disabled="true"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Set property property name fsplugin.domains.domibus_C2Dom1.messages.location to fsplugin.domains.domibus_C2DOM1.messages.location
- Set property fsplugin.domains.domibus_C2DOM1.messages.location=C:/domibus/sender/fs_plugin_data/domibus_C2Dom1
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="0a71d790-eb2a-47ad-a8d6-53e32df3d9c8" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="95358c6a-a6ba-47c2-bda5-1b42c849d148" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="14b05885-0b6a-476f-92d7-1005aaa847ea" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="914dc3a8-b6d7-478f-989d-99ae141d9b67" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="12f3ae40-f37b-4ffe-bcc1-c245c6c0540b" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter FS" id="6144f37e-4391-45f0-a429-b65e76e10457" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="11aa203f-2e0b-4789-9384-0416ec29bd06"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = "C:\\domibus\\sender\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = "C:\\domibus\\sender\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = "C:\\domibus\\sender\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="73d2d520-5900-4ded-9705-461ba89e42e6"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="00aa9958-d82f-47c5-9fb9-8d97112b9882" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="d3cbe2d4-ca40-4d2e-b7ba-a27059d47415" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX39-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="c867e369-85a2-4a71-9a35-ee69f2714768" name="EDELIVERY-3891 - Domain with name length greater than 50 is accepted by Domibus" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="5b758b34-59af-44e1-88f8-08b2ba1db709" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX10-Multitenancy-Tenant selection-Outgoing message-Domain name length-Max over-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="749ddbce-ad28-4d21-98f2-d02d6469d325"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain with name.length = 51 is configured for C2 (domain_gt_max).
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (3,0).
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="e8732799-ade1-40c0-8114-3e133459d9d4" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "3");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 3.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="0faa1ff7-3abf-467c-bdab-9eb4580d466b"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that domain "domain_gt_max" is not recognized/configured in domibus:
- Domain "domain_gt_max" is not available for selection in the admin console.  
...
""", log, testRunner) 
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="c3088a69-4559-4faf-98f8-c0e8008d1ecb" name="EDELIVERY-3893 - Forbidden characters in domain name are allowed" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ff7b71ba-939a-4f25-bbed-ea5ba044f63c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX13-Multitenancy-Tenant selection-Outgoing message-Allowed Characters-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="0cd2a90d-1e67-4918-ac04-880ac1c96cea"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain with name having allowed special characters is configured for C2: DOMAIN_ALLOWED_CHARS
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain DOMAIN_ALLOWED_CHARS. 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner)
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="a269302a-4dca-438b-a297-e95253e62cc1" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="9498a275-330a-4f37-b8f6-ca1ca2586000" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="b850c4f2-6451-4233-ba59-fb5b7ca9ce2d" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="ceb8fe21-68dc-4876-a6e7-0373f3cf9f4f" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="4e46594f-0434-464f-bc4c-6ce670dc80cc" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter WS" id="b65b9c88-4eee-49e6-9fce-acae90c6dc19" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendWebservice",context,log,"domibus_C2Dom1");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendWebservice",context,log);
</script></con:config></con:testStep><con:testStep type="request" id="bc55c388-403a-4eef-93c0-c93d8003abb5" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:ns="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:_1="http://org.ecodex.backend/1_1/" xmlns:xm="http://www.w3.org/2005/05/xmlmime">
   <soap:Header>
      <ns:Messaging>
         <ns:UserMessage>
            <ns:MessageInfo>
               <ns:MessageId>-DomX13-</ns:MessageId>
            </ns:MessageInfo>
            <ns:PartyInfo>
               <ns:From>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</ns:Role>
               </ns:From>
               <ns:To>
                  <ns:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</ns:PartyId>
                  <ns:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</ns:Role>
               </ns:To>
            </ns:PartyInfo>
            <ns:CollaborationInfo>
               <ns:Service type="tc1">bdx:noprocess</ns:Service>
               <ns:Action>TC1Leg1</ns:Action>
            </ns:CollaborationInfo>
            <ns:MessageProperties>
               <ns:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</ns:Property>
               <ns:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</ns:Property>
            </ns:MessageProperties>
            <ns:PayloadInfo>
               <ns:PartInfo href="cid:message">
                  <ns:PartProperties>
                     <ns:Property name="MimeType">text/xml</ns:Property>
                  </ns:PartProperties>
               </ns:PartInfo>
            </ns:PayloadInfo>
         </ns:UserMessage>
      </ns:Messaging>
   </soap:Header>
   <soap:Body>
      <_1:submitRequest>
         <payload payloadId="cid:message">
            <value>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGhlbGxvPndvcmxkPC9oZWxsbz4=</value>
         </payload>
      </_1:submitRequest>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="55691702-a96e-4270-b659-69659336509f" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="0437d1bc-ceaa-4c63-8cdd-a8d9332f02db" name="Not SOAP Fault"/><con:assertion type="GroovyScriptAssertion" id="8bfe8083-e19c-452d-8980-86635b045d8b" name="Script Assertion"><con:configuration><scriptText>def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED", "RECEIVED", null, null, null, "C2Dom1", "C3Default")
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="5270b72c-ce51-4c56-9c34-aed71f24396e" name="getStatus C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX13-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="1007dc97-97a7-441c-8de3-0dae5d222059" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="50f6845d-a2c8-4cc1-ab52-0a059b578f12" name="getStatus C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX13-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>RECEIVED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="24e132f2-5877-43d5-84fe-efa1b07d8ab1" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 Default" id="1471c2b7-2f2d-4d6a-bbd7-f0c313892ac3">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 Default" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="Simple Contains" id="7c94bb26-69f3-4771-92ca-96b365c71ec7" name="Contains"><con:configuration><token>-DomX13-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="3fb533ae-fe7e-46fc-bda4-56ebbea13b1e" name="Not SOAP Fault"/><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="b816dca4-0ed9-4965-a6ec-4804748882a4" name="retrieveMessage"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>retrieveMessage</con:operation><con:request name="retrieveMessage" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="85e5ccac-5aea-4b2f-94d8-ab1a46142d4e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:retrieveMessageRequest>\r
         <messageID>-DomX13-</messageID>\r
      </_1:retrieveMessageRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="210630ad-1205-4eb3-86c3-2efc781a8cb6"/><con:assertion type="SOAP Fault Assertion" id="78b4bb05-5a4f-41c3-a809-9fb968a74bf3" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/retrieveMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="List Pending Messages C3 After Download" id="dd6fe173-0b46-402b-8876-2d17a2db40d1">
                <con:settings/>
                <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                    <con:interface>BackendService_1_1SoapBinding</con:interface>
                    <con:operation>listPendingMessages</con:operation>
                    <con:request name="List Pending Messages C3 After Download" id="3bd62923-7ca0-487d-94d2-76fdfd82bf15">
                        <con:settings>
                            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
                        </con:settings>
                        <con:encoding>UTF-8</con:encoding>
                        <con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint>
                        <con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">
   <soap:Header/>
   <soap:Body>
      <_1:listPendingMessagesRequest></_1:listPendingMessagesRequest>
   </soap:Body>
</soap:Envelope>]]></con:request>
                        <con:assertion type="SOAP Response" id="15aaf1d5-2a16-4a4c-9f88-823775512faf"/>
                        <con:assertion type="SOAP Fault Assertion" id="af93e5ba-4c76-4cab-8452-0abff8db5e41" name="Not SOAP Fault"/><con:assertion type="Simple NotContains" id="eca7570d-af76-4f17-b6e4-160b32acae68" name="Not Contains"><con:configuration><token>-DomX13-</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials>
                            <con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType>
                        </con:credentials>
                        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
                        <con:jmsPropertyConfig/>
                        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
                        <con:wsrmConfig version="1.2"/>
                    </con:request>
                </con:config>
            </con:testStep><con:testStep type="request" id="a1dcdf06-dc82-40fd-b932-f8d7bfd25b3c" name="getStatus C2 Dom1 After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C2 Dom1 After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX13-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>ACKNOWLEDGED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="SOAP Fault Assertion" id="7ed36985-296c-49c2-9b28-07c7be4f6d47" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="4fb78372-425f-4a23-a300-d25589b051da" name="getStatus C3 Default After Download"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getStatus</con:operation><con:request name="getStatus C3 Default After Download" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="5bfa294e-cfc1-45e2-8020-c01c115a9252"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#remoteUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:statusRequest>\r
         <messageID>-DomX13-</messageID>\r
      </_1:statusRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6802c3da-8316-4b9e-a0b0-5e5cd5e87571" name="SOAP Response"/><con:assertion type="Not SOAP Fault Assertion" id="c30b43c9-0dc6-49a3-b69a-be2b791ea470" name="SOAP Fault"/><con:assertion type="Simple Contains" id="51f27293-b330-4af8-a8ea-64bd3ba84d71" name="Contains"><con:configuration><token>(?s).*[DOWNLOADED|DELETED].*</token><ignoreCase>false</ignoreCase><useRegEx>true</useRegEx></con:configuration></con:assertion><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getStatus"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="3e07e809-70a5-444d-95b1-b4e02a79a120" name="getMessageErrors C2 Dom1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C2 Dom1" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX13-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="e097eba2-b44b-400b-9d9d-f9f5a1be9707" name="Not SOAP Fault"/><con:credentials><con:username>userC1C2Dom1</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="e6f87d4f-ba84-46c4-9fb2-0f6dc05f3015" name="getMessageErrors C3 Default"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>getMessageErrors</con:operation><con:request name="getMessageErrors C3 Default" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="4aece6dd-167a-49cc-979b-a8d1ecebad84"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:_1="http://org.ecodex.backend/1_1/">\r
   <soap:Header/>\r
   <soap:Body>\r
      <_1:getErrorsRequest>\r
         <messageID>-DomX13-</messageID>\r
      </_1:getErrorsRequest>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6c04b101-695b-445e-9406-a7fcb5b07ab6" name="SOAP Response"/><con:assertion type="SOAP Fault Assertion" id="5418f8a3-85a5-48d1-8511-8838acabbb52" name="Not SOAP Fault"/><con:credentials><con:username>userC4</con:username><con:password>Domibus-123</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/getMessageErrors"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="fb429b44-8029-40a4-abd4-f6ae5a648882" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"DOMAIN_ALLOWED_CHARS","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="9ce15b06-f28d-4b88-a05b-b20723629d1f" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX13-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="e8d28617-f96a-43f7-ba70-5893eaebb823" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX14-Multitenancy-Tenant selection-Outgoing message-Not allowed characters-ws" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="750f5e1a-69c1-4215-859d-ac507f824518"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain with name "do-mi\$us_C2Dom1" is configured for C2.
- domain with name "1domibus_C2Dom1" is configured for C2.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (2,0).
""", log, testRunner)
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="8d321736-c524-42e4-a76a-45dc9437d39e" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "2");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 2.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="56d6b885-ce78-459d-aa20-02cad06eb459"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that domains "do-mi\$us_C2Dom1" and "1domibus_C2Dom1" are not recognized/configured in domibus:
- Domain "do-mi\$us_C2Dom1" and "1domibus_C2Dom1" are not available for selection in the admin console. 
...
""", log, testRunner) 
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="fbcb187b-7099-43be-83ff-407c5d9fc6cd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="DomX40-Multitenancy-Tenant selection-Outgoing message-Allowed characters-fs" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Configuration" id="d345ef14-1eb7-4d27-8880-840c29ff7ac4"><con:settings/><con:config><script>Domibus.showPopUpForManualConfigurationChange("""\
- Create general DB schemas.
- Plugin security is enabled for C2.
- domain with name having allowed special characters is configured for C2: DOMAIN_ALLOWED_CHARS
- Multitenany is not configured for C3.
- Set properties (multitenancyModeC2,multitenancyModeC3) to (1,0).
- Create plugin authentication user on C2: "userC1C2Dom1" linked to "originalSender" and domain DOMAIN_ALLOWED_CHARS. 
- Create plugin authentication user on C3: "userC4" linked to "finalRecipient".
""", log, testRunner)
</script></con:config></con:testStep><con:testStep type="groovy" name="Configure multitenancy mode" id="63614631-8d18-4373-be70-07543390d496" disabled="true"><con:settings/><con:config><script>testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC2", "1");
testRunner.testCase.testSuite.project.setPropertyValue("multitenancyModeC3", "0");
log.info "multitenancyModeC2 custom property set to 1.";
log.info "multitenancyModeC3 custom property set to 0.";</script></con:config></con:testStep><con:testStep type="groovy" name="Enable plugin security" id="9f56abe7-40bd-4c57-9061-6d987ccffc75" disabled="true"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Enable plugin security for C2.
""", log, testRunner) 
</script></con:config></con:testStep><con:testStep type="groovy" name="Create plugin users" id="e756926d-97e1-4d4b-b301-62d4554bef04" disabled="true"><con:settings/><con:config><script>// Create userC1 in C2
Domibus.addPluginUser("C2",context,log,"DOMAIN_ALLOWED_CHARS","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Create userC4 in C3
Domibus.addPluginUser("red",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");

</script></con:config></con:testStep><con:testStep type="groovy" name="Upload PModes" id="d12613d4-ab0a-4eb4-8e3c-95ed78abc883" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload pmodes C2 ================"
Domibus.uploadPmode("C2","default","\\blue\\domibus-pmode-blue.xml",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload pmodes C3 ================"
Domibus.uploadPmode("C3","default","\\red\\domibus-pmode-red.xml",context,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Upload Truststores" id="e606b3f7-ed6b-4a7a-b59b-c3f2219ad0ef" disabled="true"><con:settings/><con:config><script>// C2
log.info "================ Upload truststores C2 ================"
Domibus.uploadTruststore("C2","default","\\blue\\gateway_truststore.jks",context,log,"domibus_C2Dom1");

// C3
log.info "================ Upload truststores C3 ================"
Domibus.uploadTruststore("C3","default","\\red\\gateway_truststore.jks",context,log);

</script></con:config></con:testStep><con:testStep type="groovy" name="Set Message Filter FS" id="c0061afd-7199-4fbe-8145-cd336c050874" disabled="true"><con:settings/><con:config><script>// Select message filters for C2
Domibus.setMessageFilters("C2","backendFSPlugin",context,log,"domibus_C2Dom1");

// Select message filters for C3
Domibus.setMessageFilters("C3","backendFSPlugin",context,log);
</script></con:config></con:testStep><con:testStep type="groovy" name="Submit Message" id="e80f89c8-d34b-4b63-80b7-d8214918dd6e"><con:settings/><con:config><script>// Copy xml payload
def source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\Test_file.xml";
def dest = "C:\\domibus\\sender\\fs_plugin_data\\domibus_C2Dom1\\OUT\\Test_file.xml"; 
Domibus.copyFile(source,dest,log);

// Copy pdf payload
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\fileSmall.pdf";
dest = "C:\\domibus\\sender\\fs_plugin_data\\domibus_C2Dom1\\OUT\\fileSmall.pdf"; 
Domibus.copyFile(source,dest,log);

// Copy metadata file
source = context.expand('${projectDir}')+"\\resources\\PModesandKeystoresSpecialTests\\fsPlugin\\standard\\metadata.xml";
dest = "C:\\domibus\\sender\\fs_plugin_data\\domibus_C2Dom1\\OUT\\metadata.xml"; 
Domibus.copyFile(source,dest,log);</script></con:config></con:testStep><con:testStep type="groovy" name="Test" id="e79171f7-f7fd-488c-bf0e-cbcc2050f264"><con:settings/><con:config><script>// TODO: automate
Domibus.showPopUpForManualConfigurationChange("""\
Check that the message is acknowledged.
""", log, testRunner) </script></con:config></con:testStep><con:testStep type="groovy" name="Delete plugin users" id="402fa579-86dc-40fc-9ec8-50f6f889f1c9" disabled="true"><con:settings/><con:config><script>// Remove userC1 in C2
Domibus.removePluginUser("blue",context,log,"domibus_C2Dom1","ROLE_USER","userC1C2Dom1","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1");

// Remove userC4 in C3
Domibus.removePluginUser("blue",context,log,"Default","ROLE_USER","userC4","Domibus-123","urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4");</script></con:config></con:testStep><con:testStep type="groovy" name="Delete Message" id="eedd96e9-3cbe-49e3-ab9f-f33659f4a75e" disabled="true"><con:settings/><con:config><script>def test = new Domibus(log,null,context);
test.cleanDBMessageIDStartsWith(context.expand('-DomX39-'))
test.finalize();	
</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="c3aadbe0-b631-4187-b6a2-1a39628dbc19" name="For load test play" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="669eb14c-6ca4-4f19-bf8f-493ceb847479" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Copy of Dom102-Test Experience-Several payloads" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Copy of Simple test report" id="a88d485e-7017-469c-b448-df42648c1570" disabled="true"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def projectPath = groovyUtils.projectPath
def folderName = projectPath + "\\testResults2"
log.info "Folder name: " + folderName
def createFolder = new File(folderName)
createFolder.mkdir()

def projectName = testRunner.testCase.testSuite.project.name

date = new Date()
dateFormat = new java.text.SimpleDateFormat('dd_MMM_yyyy_HH_mm_ss')
shortDate = dateFormat.format(date)

def filename = folderName + '/' + projectName + "_" + shortDate + '.csv'
log.info filename
f = new File(filename)

def testSuiteList = testRunner.testCase.testSuite.project.getTestSuiteList()
def indent = "    "
for ( ts in testSuiteList ) {
	log.info 	(indent + "Ts:" + ts.getLabel())
	for ( tc in ts.getTestCaseList() ) {
		log.info (indent*3 + tc.getLabel()  + " " + tc.isDisabled() + " " ) //+ tc.getStatus().toString())
		f.append(ts.getLabel() + "," + tc.getLabel() + "," + tc.isDisabled() + "\r\n")
	}
}

f.close</script></con:config></con:testStep><con:testStep type="groovy" name="clean Three Domibus scenario" id="335802ca-4d11-4bd9-b0a2-f30358a6ece5" disabled="true"><con:settings/><con:config><script>
def test = new Domibus(log,null,context)
test.cleanDBMessageIDStartsWith("-Dom120-");
Domibus.swapJdbcUrls("Green","Red",testRunner,log);
test.cleanDBMessageIDStartsWith("-Dom120-");
Domibus.swapJdbcUrls("Green","Red",testRunner,log);
test.finalize();</script></con:config></con:testStep><con:loadTest id="6411ed7e-39e0-4421-b8e8-9a4ed689cd78" name="LoadTest 1"><con:settings/><con:threadCount>4</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>60</con:testLimit><con:limitType>TIME</con:limitType><con:loadStrategy><con:type>Simple</con:type></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:tearDownScript>//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/></con:testCase><con:testCase id="ad6f447a-dfdc-44be-b020-305c86881e14" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Copy of Dom125-EDELIVERY-1731-Manual- CXF attachment temporary files leakage" searchProperties="true" disabled="true"><con:description>TODO 
	&lt;prop key="domibus.attachment.storage.location">../payloads&lt;/prop> 
+ create folders
</con:description><con:settings/><con:testStep type="delay" name="Delay" id="76f42d3e-7454-4061-a6c5-22f5573c5519"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:tearDownScript>//def test = new Domibus(log,null,context);
//test.cleanDBMessageIDStartsWith("-Dom125-");
//test.finalize();
//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/><con:reportParameters/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Client Example Configuration" searchProperties="true" id="1889ed53-017b-4bc6-b5ba-0f45cd811200">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="groovy" name="Start Blue and Red" id="bee3f378-5d3c-407e-b77f-0b3c79a622e3"><con:settings/><con:config><script>Domibus.startMSH("sender", context, log);
Domibus.startMSH("receiver", context, log);
</script></con:config></con:testStep><con:testStep type="httprequest" name="Upload P-Mode red default" id="60b9acd1-7bf6-4d57-a0ec-faf421224279"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="7d8d7688-62d8-485a-9855-44e191f83832" name="Upload P-Mode red default" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#remoteUrl}/home/uploadPmodeFile</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" id="e8d073e0-a5e8-4934-a3c4-fce5cf677033" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee0a9716-f73d-41f3-90b3-1cba230211c1" name="Contains"><con:configuration><token>PMode file has been successfully uploaded</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>domibus-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:contentId>pmode</con:contentId><con:part xsi:nil="true"/><con:url>${#Project#specialPModesPath}/clientPlugin/red/domibus-pmode-red.xml</con:url><con:id>2836aa1f-ae95-4661-a5f8-a2c598bbbe8e</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:testStep type="httprequest" name="Upload P-Mode blue default" id="5a9b581a-c0ae-42e2-a8e3-f8737a1642c7"><con:settings/><con:config method="POST" xsi:type="con:HttpRequest" id="7d8d7688-62d8-485a-9855-44e191f83832" name="Upload P-Mode blue default" postQueryString="false" mediaType="multipart/form-data" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding/><con:endpoint>${#Project#localUrl}/home/uploadPmodeFile</con:endpoint><con:request/><con:assertion type="Simple Contains" id="8749654b-1ee8-45da-8cec-2a1ecee56828" name="Contains"><con:configuration><token>PMode file has been successfully uploaded</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="51edc8a0-5041-497e-9abd-1377274bf503" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>admin</con:username><con:password>123456</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:attachment><con:name>domibus-pmode-blue.xml</con:name><con:contentType>text/xml</con:contentType><con:contentId>pmode</con:contentId><con:url>${#Project#specialPModesPath}/clientPlugin/blue/domibus-pmode-blue.xml</con:url><con:id>452ff68f-c6fb-4006-9ffd-15741474dc99</con:id></con:attachment><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:config></con:testStep><con:tearDownScript>/*def test = new Domibus(log,null,context);
test.cleanDBMessageID(context.expand('${Submit Message#Request#//ns:MessageId}'))
test.finalize();*/	

//ExcelReporting.reportTestCase(testRunner, log)</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ae53824d-2f38-4547-ad45-05fa2fa6d147</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60b9acd1-7bf6-4d57-a0ec-faf421224279</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5a9b581a-c0ae-42e2-a8e3-f8737a1642c7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bee3f378-5d3c-407e-b77f-0b3c79a622e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="XML DISPLAY" searchProperties="true" id="1f099916-b6d8-487f-8852-218ea23708f8" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
            <con:settings/>
            
            
            
            
            
            
            
            
            
            
            
            
            <con:testStep type="request" id="76776923-0f44-491a-bb3d-a260394b47a3" name="Submit Message"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Submit Message" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">\r
   <env:Header>\r
      <eb:Messaging env:mustUnderstand="true" wsu:Id="_43cebff8-d730-4a0e-af5d-dc682ecf83ab" xmlns:eb="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">\r
         <eb:UserMessage mpc="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultMPC">\r
            <eb:MessageInfo>\r
               <eb:Timestamp>2018-09-11T09:04:15.000Z</eb:Timestamp>\r
               <eb:MessageId>7dc393e7-c4c6-4ca1-9246-809b3a63308e@domibus.eu</eb:MessageId>\r
            </eb:MessageInfo>\r
            <eb:PartyInfo>\r
               <eb:From>\r
                  <eb:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</eb:PartyId>\r
                  <eb:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</eb:Role>\r
               </eb:From>\r
               <eb:To>\r
                  <eb:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</eb:PartyId>\r
                  <eb:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</eb:Role>\r
               </eb:To>\r
            </eb:PartyInfo>\r
            <eb:CollaborationInfo>\r
               <eb:Service type="tc1">bdx:noprocess</eb:Service>\r
               <eb:Action>TC1Leg1</eb:Action>\r
               <eb:ConversationId>f7a29fc2-e362-404e-81db-f327fbcdad56@domibus.eu</eb:ConversationId>\r
            </eb:CollaborationInfo>\r
            <eb:MessageProperties>\r
               <eb:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</eb:Property>\r
               <eb:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</eb:Property>\r
            </eb:MessageProperties>\r
            <eb:PayloadInfo>\r
               <eb:PartInfo href="cid:message">\r
                  <eb:PartProperties>\r
                     <eb:Property name="MimeType">text/xml</eb:Property>\r
                     <eb:Property name="CompressionType">application/gzip</eb:Property>\r
                  </eb:PartProperties>\r
               </eb:PartInfo>\r
            </eb:PayloadInfo>\r
         </eb:UserMessage>\r
      </eb:Messaging>\r
      <wsse:Security env:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">\r
         <xenc:EncryptedKey Id="EK-c624cd2c-f84e-422f-a40a-cb14a86153ea" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">\r
            <xenc:EncryptionMethod Algorithm="http://www.w3.org/2009/xmlenc11#rsa-oaep">\r
               <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" xmlns:ds="http://www.w3.org/2000/09/xmldsig#"/>\r
               <xenc11:MGF Algorithm="http://www.w3.org/2009/xmlenc11#mgf1sha256" xmlns:xenc11="http://www.w3.org/2009/xmlenc11#"/>\r
            </xenc:EncryptionMethod>\r
            <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">\r
               <wsse:SecurityTokenReference>\r
                  <wsse:KeyIdentifier EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509SubjectKeyIdentifier">7AJeAnEL5EE5l3lLc+EoFpOfJCo=</wsse:KeyIdentifier>\r
               </wsse:SecurityTokenReference>\r
            </ds:KeyInfo>\r
            <xenc:CipherData>\r
               <xenc:CipherValue>ZTkkzHjhhQ+1JR4T3qeI6NS+XCqLIYCm2Z/7SSe8aRXrsztUZ5s3qXHY5zM4u8N9ckP/OlQ5tFK1\r
Vm0dcyRRcKhWlZdiYUhtLQlYghUQgs9zv7yV6hK+Wqu12yHF1w9zo9etaSJQMKPtMKGW5Y2EkfKE\r
CBcuOygE2SbIF/wwl8k/+HGKI7sDIcuBNxhneBZIK2PdSEbHOHfnISTAikGdsPQ8680//FqZg5Cb\r
VhV3Jg5OpSLbWRL/8w4RUphAgyOO3O1MvAI15RIpsFAN46OMTSyGli6LaFtrrB3ARgIbaUBd4h/q\r
NBHX2G8am77Fsysvpyd+aQBG6A443JPFhoTm0Q==</xenc:CipherValue>\r
            </xenc:CipherData>\r
            <xenc:ReferenceList>\r
               <xenc:DataReference URI="#ED-2c0d2bde-8e01-44a1-998e-8927ed14313c"/>\r
            </xenc:ReferenceList>\r
         </xenc:EncryptedKey>\r
         <xenc:EncryptedData Id="ED-2c0d2bde-8e01-44a1-998e-8927ed14313c" MimeType="application/octet-stream" Type="http://docs.oasis-open.org/wss/oasis-wss-SwAProfile-1.1#Attachment-Content-Only" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">\r
            <xenc:EncryptionMethod Algorithm="http://www.w3.org/2009/xmlenc11#aes128-gcm"/>\r
            <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">\r
               <wsse:SecurityTokenReference wsse11:TokenType="http://docs.oasis-open.org/wss/oasis-wss-soap-message-security-1.1#EncryptedKey" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd">\r
                  <wsse:Reference URI="#EK-c624cd2c-f84e-422f-a40a-cb14a86153ea"/>\r
               </wsse:SecurityTokenReference>\r
            </ds:KeyInfo>\r
            <xenc:CipherData>\r
               <xenc:CipherReference URI="cid:message">\r
                  <xenc:Transforms>\r
                     <ds:Transform Algorithm="http://docs.oasis-open.org/wss/oasis-wss-SwAProfile-1.1#Attachment-Ciphertext-Transform" xmlns:ds="http://www.w3.org/2000/09/xmldsig#"/>\r
                  </xenc:Transforms>\r
               </xenc:CipherReference>\r
            </xenc:CipherData>\r
         </xenc:EncryptedData>\r
         <ds:Signature Id="SIG-ad649f3e-bed8-48d9-9b23-8664ea986485" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">\r
            <ds:SignedInfo>\r
               <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">\r
                  <ec:InclusiveNamespaces PrefixList="env" xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#"/>\r
               </ds:CanonicalizationMethod>\r
               <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>\r
               <ds:Reference URI="#_1edc0773-14a0-4685-91bd-368826cbca47">\r
                  <ds:Transforms>\r
                     <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>\r
                  </ds:Transforms>\r
                  <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>\r
                  <ds:DigestValue>qVunA+B32+FlmTe3IOwc6Hsh95clAaLg/srpW2JP6dA=</ds:DigestValue>\r
               </ds:Reference>\r
               <ds:Reference URI="#_43cebff8-d730-4a0e-af5d-dc682ecf83ab">\r
                  <ds:Transforms>\r
                     <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>\r
                  </ds:Transforms>\r
                  <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>\r
                  <ds:DigestValue>km3JVp4+PH0yIPc12HzgXD9nHKR9jyG31srvBMIlYm8=</ds:DigestValue>\r
               </ds:Reference>\r
               <ds:Reference URI="cid:message">\r
                  <ds:Transforms>\r
                     <ds:Transform Algorithm="http://docs.oasis-open.org/wss/oasis-wss-SwAProfile-1.1#Attachment-Content-Signature-Transform"/>\r
                  </ds:Transforms>\r
                  <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>\r
                  <ds:DigestValue>EsCW4yjyIQ0WVh8swWQx16Nt84LBP7ufBWcyBePJEE8=</ds:DigestValue>\r
               </ds:Reference>\r
            </ds:SignedInfo>\r
            <ds:SignatureValue>h2n43RXJ3zqChKxbWBUsf1F6xnfW0lTQvysCCvaqjmpJD2QeSz45PXdOlwxobIyWCVZU8lFCicZ1\r
tkZAZiG+Ae3I8XJ3YO8B83IuDlzcyTUSM2DhqsbRSJ+Qs7uUDi7dx/5tMEb+Qx/ORXHu+phP+DBa\r
RIF92zho6RAsTolH9mwmLKHyuPfoL+cxYhjL9SBnGVFQQrdhGws9eqkvUVMpCzYLK8jc0N2WZ6Z4\r
Iu9/PadUuTnu/CYXjz66/BHXgUSWw0+UM+J8lZcGd8s8uMWmXuQviHy8ZqHMYiU3bLP2Fp03mZ9g\r
/xNfbLMTvu0j6WVf7dxFkBnNKXQvBmRi3NwXxA==</ds:SignatureValue>\r
            <ds:KeyInfo Id="KI-bc7c2ee8-ed46-482f-a9a2-562cc2421825">\r
               <wsse:SecurityTokenReference wsu:Id="STR-97563666-9404-419b-9522-31308d862123">\r
                  <wsse:KeyIdentifier EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509SubjectKeyIdentifier">HPqVjsgDN900CCgLwAvG03x+R2I=</wsse:KeyIdentifier>\r
               </wsse:SecurityTokenReference>\r
            </ds:KeyInfo>\r
         </ds:Signature>\r
      </wsse:Security>\r
   </env:Header>\r
   <env:Body wsu:Id="_1edc0773-14a0-4685-91bd-368826cbca47" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"/>\r
</env:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" id="89fae9d0-ddad-4b78-8414-727ddd3fb9f5" name="Template 2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>BackendService_1_1SoapBinding</con:interface><con:operation>submitMessage</con:operation><con:request name="Template 2" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e022ccff-cc86-4b74-9723-3e474bc04cd9"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#localUrl}/services/backend</con:endpoint><con:request><![CDATA[<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">\r
   <env:Header>\r
      <eb:Messaging env:mustUnderstand="true" xmlns:eb="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/">\r
         <eb:UserMessage mpc="http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultMPC">\r
            <eb:MessageInfo>\r
               <eb:Timestamp>2018-09-11T11:50:17.000Z</eb:Timestamp>\r
               <eb:MessageId>a39ad6d8-7f1d-4236-ba00-71bc71f870b8@domibus.eu</eb:MessageId>\r
            </eb:MessageInfo>\r
            <eb:PartyInfo>\r
               <eb:From>\r
                  <eb:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-blue</eb:PartyId>\r
                  <eb:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/initiator</eb:Role>\r
               </eb:From>\r
               <eb:To>\r
                  <eb:PartyId type="urn:oasis:names:tc:ebcore:partyid-type:unregistered">domibus-red</eb:PartyId>\r
                  <eb:Role>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/responder</eb:Role>\r
               </eb:To>\r
            </eb:PartyInfo>\r
            <eb:CollaborationInfo>\r
               <eb:Service type="tc2">bdx:noprocess</eb:Service>\r
               <eb:Action>TC2Leg1</eb:Action>\r
               <eb:ConversationId>1f8ce8e2-8ea1-478b-8cdc-ae19f4cb08c2@domibus.eu</eb:ConversationId>\r
            </eb:CollaborationInfo>\r
            <eb:MessageProperties>\r
               <eb:Property name="originalSender">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C1</eb:Property>\r
               <eb:Property name="finalRecipient">urn:oasis:names:tc:ebcore:partyid-type:unregistered:C4</eb:Property>\r
            </eb:MessageProperties>\r
            <eb:PayloadInfo>\r
               <eb:PartInfo href="cid:message">\r
                  <eb:PartProperties>\r
                     <eb:Property name="MimeType">text/xml</eb:Property>\r
                  </eb:PartProperties>\r
               </eb:PartInfo>\r
            </eb:PayloadInfo>\r
         </eb:UserMessage>\r
      </eb:Messaging>\r
   </env:Header>\r
   <env:Body/>\r
</env:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response1" id="cd57a04c-25ec-4747-830d-3232f50acae3"/><con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="d660f0c2-2f39-442f-a5ad-ad89cee0da5f"/><con:assertion type="XPath Match" name="XPath Match" id="c8f079bd-9c98-4d03-9769-220891a40294"><con:configuration><path>exists(//messageID)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion" id="5a19348e-d8bc-4594-80d4-adddb8be0d2a"><con:configuration><scriptText>

def test = new Domibus(log,messageExchange,context);
test.waitForStatus("ACKNOWLEDGED","RECEIVED");
test.finalize();</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://org.ecodex.backend/1_1/BackendInterface/submitMessage"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>
//ExcelReporting.reportTestCase(testRunner, log)

def test = new Domibus(log,null,context)
def msgID = context.expand( '${Submit Message#Response#//messageID}' )
test.cleanDBMessageID(msgID)
test.finalize()
</con:tearDownScript><con:properties/>
        <con:reportParameters/><con:breakPoints><con:testStepId>2eb6a89f-41c9-40f9-9d70-074e25d6ff5a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d1a0cbdd-efe1-412d-aac5-b62315a3ac06</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f84a4b44-9f2f-41e5-aeb5-ad4b50027daf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:requirements/><con:properties><con:property><con:name>localUrl</con:name><con:value>http://localhost:8280/domibus</con:value></con:property><con:property><con:name>remoteUrl</con:name><con:value>http://localhost:8180/domibus</con:value></con:property><con:property><con:name>greenUrl</con:name><con:value>http://localhost:8280/domibus</con:value></con:property><con:property><con:name>thirdGateway</con:name><con:value>false</con:value></con:property><con:property><con:name>multitenancyModeC2</con:name><con:value>0</con:value></con:property><con:property><con:name>multitenancyModeC3</con:name><con:value>0</con:value></con:property><con:property><con:name>updateReport</con:name><con:value>false</con:value></con:property><con:property><con:name>pathBlue</con:name><con:value>C:/ec/blue/domibus/</con:value></con:property><con:property><con:name>pathRed</con:name><con:value>C:/ec/red/domibus/</con:value></con:property><con:property><con:name>pathGreen</con:name><con:value>C:/domibus/1-mainBranch/greenReceiver/domibus/</con:value></con:property><con:property><con:name>pathExeSender</con:name><con:value>${#Project#pathBlue}bin/</con:value></con:property><con:property><con:name>pathExeReceiver</con:name><con:value>${#Project#pathRed}bin/</con:value></con:property><con:property><con:name>pathExeGreen</con:name><con:value>${#Project#pathGreen}/bin/</con:value></con:property><con:property><con:name>reportFilePath</con:name><con:value>${projectDir}/reports/Domibus_3_3_2_test_results.xlsx</con:value></con:property><con:property><con:name>defaultPModesPath</con:name><con:value>${projectDir}/resources/PModesandKeystoresDefault</con:value></con:property><con:property><con:name>specialPModesPath</con:name><con:value>${projectDir}/resources/PModesandKeystoresSpecialTests</con:value></con:property><con:property><con:name>subPathToDomibusProperties</con:name><con:value>conf/domibus/domibus.properties</con:value></con:property><con:property><con:name>pdfAttachment</con:name><con:value>${projectDir}/resources/fileSmall.pdf </con:value></con:property><con:property><con:name>moreThan100mbAttachment</con:name><con:value>${projectDir}/resources/videoplayback_mp4.pdf</con:value></con:property><con:property><con:name>adminC1Default</con:name><con:value>adminC1Default_5</con:value></con:property><con:property><con:name>adminC4Default</con:name><con:value>adminC4Default_5</con:value></con:property><con:property><con:name>defaultBlueDomainID</con:name><con:value>C2Default</con:value></con:property><con:property><con:name>defaultRedDomainId</con:name><con:value>C3Default</con:value></con:property><con:property><con:name>defaultGreenDomainID</con:name><con:value>thirdDefault</con:value></con:property><con:property><con:name>allDomainsProperties</con:name><con:value>{"C2Default":{"site":"C2","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_blue","dbUser":"root","dbPassword":"root"},  "C3Default":{"site":"C3","domainName":"default","domNo":0,"dbType":"mysql","dbDriver":"com.mysql.jdbc.Driver","dbJdbcUrl":"jdbc:mysql://localhost:3306/domibus_red","dbUser":"root","dbPassword":"root"}}</con:value></con:property><con:property><con:name>adminDefaultPassword</con:name><con:value>Domibus-123</con:value></con:property><con:property><con:name>superAdminUsername</con:name><con:value>super</con:value></con:property><con:property><con:name>superAdminPassword</con:name><con:value>Domibus-123</con:value></con:property><con:property><con:name>defaultAdminUsername</con:name><con:value>admin</con:value></con:property><con:property><con:name>defaultAdminPassword</con:name><con:value>123456</con:value></con:property><con:property><con:name>unsecureLoginAllowed</con:name><con:value>true</con:value></con:property><con:property><con:name>multitenancyModeThird</con:name><con:value>0</con:value></con:property><con:property><con:name>unsecureLoginAllowedC2</con:name><con:value>true</con:value></con:property><con:property><con:name>unsecureLoginAllowedC3</con:name><con:value>true</con:value></con:property></con:properties><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:reporting><con:reportTemplates/><con:xmlTemplates/><con:parameters/></con:reporting><con:sensitiveInformation/></con:soapui-project>